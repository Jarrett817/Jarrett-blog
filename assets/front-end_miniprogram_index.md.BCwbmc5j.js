import{_ as i,E as a,H as n,az as t}from"./chunks/framework.C0ZVvu-t.js";const g=JSON.parse('{"title":"小程序","description":"","frontmatter":{},"headers":[],"relativePath":"front-end/miniprogram/index.md","filePath":"front-end/miniprogram/index.md","lastUpdated":1756092625000}'),l={name:"front-end/miniprogram/index.md"};function h(e,s,k,p,r,d){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="小程序" tabindex="-1">小程序 <a class="header-anchor" href="#小程序" aria-label="Permalink to “小程序”">​</a></h1><p>主要是微信小程序</p><h2 id="踩坑记录" tabindex="-1">踩坑记录 <a class="header-anchor" href="#踩坑记录" aria-label="Permalink to “踩坑记录”">​</a></h2><h3 id="单页模式-提示无法触发" tabindex="-1">单页模式，提示无法触发 <a class="header-anchor" href="#单页模式-提示无法触发" aria-label="Permalink to “单页模式，提示无法触发”">​</a></h3><p>小程序转发到朋友圈，会进入单页模式，该模式下，大多数内置 api 被禁用，调用会提示“请前往小程序使用完整功能”，在特定情况下无法触发该提示</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 能触发提示</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">navigateTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 无法触发提示</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">navigateTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>出现在按钮调用 debounce 函数包裹的业务逻辑中，可以使用 lodash 提供的 debounce 的 leading:true 设置点击立即触发来解决</p><h3 id="遮罩层导致的-ios-键盘无法呼出的问题" tabindex="-1">遮罩层导致的 ios 键盘无法呼出的问题 <a class="header-anchor" href="#遮罩层导致的-ios-键盘无法呼出的问题" aria-label="Permalink to “遮罩层导致的 ios 键盘无法呼出的问题”">​</a></h3><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-overlay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-field</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{openKeyBoard}}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> disabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{disabled}}&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bind:click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;handleSubmit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;发送&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-overlay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li>使用 van-overlay，将 openKeyBoard 置为 true，ios、鸿蒙皆无法唤起键盘</li><li>使用微信官方提供的 page-container 组件，安卓、鸿蒙可唤起键盘，ios 不能，键盘弹出即消失</li><li>自行使用 fixed 实现遮罩，键盘呼出正常，发送按钮点击无效，使用 bind:tap + 事件函数逻辑中判断是否禁用解决</li></ul>`,10)]))}const o=i(l,[["render",h]]);export{g as __pageData,o as default};
