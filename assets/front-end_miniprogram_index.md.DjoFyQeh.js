import{_ as s,G as a,E as n,ao as l}from"./chunks/framework.C1rSk1pR.js";const _=JSON.parse('{"title":"小程序","description":"","frontmatter":{},"headers":[],"relativePath":"front-end/miniprogram/index.md","filePath":"front-end/miniprogram/index.md","lastUpdated":1734073656000}'),o={name:"front-end/miniprogram/index.md"},e=l(`<h1 id="小程序" tabindex="-1">小程序 <a class="header-anchor" href="#小程序" aria-label="Permalink to &quot;小程序&quot;">​</a></h1><p>主要是微信小程序</p><h2 id="踩坑记录" tabindex="-1">踩坑记录 <a class="header-anchor" href="#踩坑记录" aria-label="Permalink to &quot;踩坑记录&quot;">​</a></h2><h3 id="单页模式-提示无法触发" tabindex="-1">单页模式，提示无法触发 <a class="header-anchor" href="#单页模式-提示无法触发" aria-label="Permalink to &quot;单页模式，提示无法触发&quot;">​</a></h3><p>小程序转发到朋友圈，会进入单页模式，该模式下，大多数内置 api 被禁用，调用会提示“请前往小程序使用完整功能”，在特定情况下无法触发该提示</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;font-style:italic;">// 能触发提示</span></span>
<span class="line"><span style="color:#268BD2;">setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  wx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">navigateTo</span><span style="color:#839496;">({ url: </span><span style="color:#2AA198;">&#39;test&#39;</span><span style="color:#839496;"> });</span></span>
<span class="line"><span style="color:#839496;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// 无法触发提示</span></span>
<span class="line"><span style="color:#268BD2;">setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  wx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">navigateTo</span><span style="color:#839496;">({ url: </span><span style="color:#2AA198;">&#39;test&#39;</span><span style="color:#839496;"> });</span></span>
<span class="line"><span style="color:#839496;">}, </span><span style="color:#D33682;">100</span><span style="color:#839496;">);</span></span></code></pre></div><p>出现在按钮调用 debounce 函数包裹的业务逻辑中，可以使用 lodash 提供的 debounce 的 leading:true 设置点击立即触发来解决</p><h3 id="遮罩层导致的-ios-键盘无法呼出的问题" tabindex="-1">遮罩层导致的 ios 键盘无法呼出的问题 <a class="header-anchor" href="#遮罩层导致的-ios-键盘无法呼出的问题" aria-label="Permalink to &quot;遮罩层导致的 ios 键盘无法呼出的问题&quot;">​</a></h3><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;">&lt;</span><span style="color:#268BD2;">van-overlay</span><span style="color:#586E75;">&gt;</span></span>
<span class="line"><span style="color:#586E75;">  &lt;</span><span style="color:#268BD2;">van-field</span><span style="color:#93A1A1;"> focus</span><span style="color:#839496;">=</span><span style="color:#2AA198;">&quot;{{openKeyBoard}}&quot;</span><span style="color:#586E75;"> /&gt;</span></span>
<span class="line"><span style="color:#586E75;">  &lt;</span><span style="color:#268BD2;">van-button</span><span style="color:#93A1A1;"> disabled</span><span style="color:#839496;">=</span><span style="color:#2AA198;">&quot;{{disabled}}&quot;</span><span style="color:#93A1A1;"> bind:click</span><span style="color:#839496;">=</span><span style="color:#2AA198;">&quot;handleSubmit&quot;</span><span style="color:#586E75;">&gt;</span><span style="color:#839496;">发送</span><span style="color:#586E75;">&lt;/</span><span style="color:#268BD2;">van-button</span><span style="color:#586E75;">&gt;</span></span>
<span class="line"><span style="color:#586E75;">&lt;/</span><span style="color:#268BD2;">van-overlay</span><span style="color:#586E75;">&gt;</span></span></code></pre></div><ul><li>使用 van-overlay，将 openKeyBoard 置为 true，ios、鸿蒙皆无法唤起键盘</li><li>使用微信官方提供的 page-container 组件，安卓、鸿蒙可唤起键盘，ios 不能，键盘弹出即消失</li><li>自行使用 fixed 实现遮罩，键盘呼出正常，发送按钮点击无效，使用 bind:tap + 事件函数逻辑中判断是否禁用解决</li></ul>`,10),p=[e];function t(r,c,i,d,y,u){return n(),a("div",null,p)}const b=s(o,[["render",t]]);export{_ as __pageData,b as default};
