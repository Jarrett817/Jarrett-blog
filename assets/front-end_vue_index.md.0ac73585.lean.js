import{o as n,c as s,b as a,d as t}from"./app.dff7797b.js";const o='{"title":"vue","description":"","frontmatter":{"title":"vue","desc":"《JavaScript设计模式》、《大话设计模式》笔记","keywords":"设计模式、笔记","date":"2020-02-17T01:01:00.000Z","cover":"https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/02/1.jpg"},"headers":[{"level":2,"title":"为什么要使用单页面应用","slug":"为什么要使用单页面应用"},{"level":3,"title":"传统的网页应用","slug":"传统的网页应用"},{"level":3,"title":"单页面应用","slug":"单页面应用"},{"level":3,"title":"单页面应用的优点","slug":"单页面应用的优点"},{"level":3,"title":"单页面应用的缺点","slug":"单页面应用的缺点"},{"level":2,"title":"vue 核心","slug":"vue-核心"},{"level":3,"title":"vue 的响应式原理","slug":"vue-的响应式原理"},{"level":2,"title":"关于对象","slug":"关于对象"},{"level":2,"title":"关于数组","slug":"关于数组"},{"level":2,"title":"生命周期","slug":"生命周期"},{"level":2,"title":"组件间通信","slug":"组件间通信"},{"level":2,"title":"其他不常用的方法","slug":"其他不常用的方法"},{"level":2,"title":"State","slug":"state"},{"level":2,"title":"Getters","slug":"getters"},{"level":2,"title":"Mutations","slug":"mutations"},{"level":2,"title":"Actions","slug":"actions"},{"level":2,"title":"Modules","slug":"modules"},{"level":2,"title":"vue-router 核心","slug":"vue-router-核心"}],"relativePath":"front-end/vue/index.md","lastUpdated":1658914366601}',e={},c=[a("h1",{id:"vue"},[a("a",{class:"header-anchor",href:"#vue","aria-hidden":"true"},"#"),t(" vue")],-1),a("h2",{id:"为什么要使用单页面应用"},[a("a",{class:"header-anchor",href:"#为什么要使用单页面应用","aria-hidden":"true"},"#"),t(" 为什么要使用单页面应用")],-1),a("h3",{id:"传统的网页应用"},[a("a",{class:"header-anchor",href:"#传统的网页应用","aria-hidden":"true"},"#"),t(" 传统的网页应用")],-1),a("hr",null,null,-1),a("p",null,[a("img",{src:"/Jarrett-blog/assets/browser-server.d25bed38.png",alt:""}),a("img",{src:"/Jarrett-blog/assets/mvc.502c4236.png",alt:""}),t(" 传统的网页应用，浏览器作为展示层，路由处理、服务调用、页面跳转都由后端处理，即便有 ajax，但也并不是标准的单页面应用。 这种网页应用的重心都在后端，后端几乎包揽了 MVC，浏览器端仅是一个展示层")],-1),a("h3",{id:"单页面应用"},[a("a",{class:"header-anchor",href:"#单页面应用","aria-hidden":"true"},"#"),t(" 单页面应用")],-1),a("hr",null,null,-1),a("p",null,"MVC 前置到浏览器端，前端负责路由，各个小的组件组成页面，在路由变化时，不刷新整个页面，仅仅是组合小的组件，替换变化部分。甚至数据层也在前端，前端封装后端 API，这种情况下，后端只是提供操作数据库的 API",-1),a("h3",{id:"单页面应用的优点"},[a("a",{class:"header-anchor",href:"#单页面应用的优点","aria-hidden":"true"},"#"),t(" 单页面应用的优点")],-1),a("hr",null,null,-1),a("ul",null,[a("li",null,"不刷新页面，相应快速，提升了用户体验"),a("li",null,"前端组件化，代码的结构和组织更加规划化，利于修改和维护，并且可以开发独立的组件库，开发时直接使用即可，极大提高了开发效率"),a("li",null,"API 共享，如果要多端开发（浏览器、微信、安卓、ios），只需要修改容易变化的前端 UI，对后端 API 的调用基本是相同的，极大的降低了开发成本")],-1),a("h3",{id:"单页面应用的缺点"},[a("a",{class:"header-anchor",href:"#单页面应用的缺点","aria-hidden":"true"},"#"),t(" 单页面应用的缺点")],-1),a("hr",null,null,-1),a("ul",null,[a("li",null,"首次加载大量资源"),a("li",null,"提高了前端的技术门槛"),a("li",null,"不利于 SEO，因为数据在前端渲染，动态的数据不利于爬虫抓取"),a("li",null,"不方便使用浏览器自带的导航")],-1),a("hr",null,null,-1),a("h2",{id:"vue-核心"},[a("a",{class:"header-anchor",href:"#vue-核心","aria-hidden":"true"},"#"),t(" vue 核心")],-1),a("h3",{id:"vue-的响应式原理"},[a("a",{class:"header-anchor",href:"#vue-的响应式原理","aria-hidden":"true"},"#"),t(" vue 的响应式原理")],-1),a("p",null,[t("vue2 通过数据劫持 ➕ 发布订阅模式实现数据响应式 主要由"),a("code",null,"Object.defineProperty"),t("、"),a("code",null,"Observer"),t("、"),a("code",null,"Dep"),t("、"),a("code",null,"Watcher"),t("实现 "),a("img",{src:"/Jarrett-blog/assets/vue-reactive.f79dd221.png",alt:""})],-1),a("h4",{id:"observer、dep-和-watcher"},[a("a",{class:"header-anchor",href:"#observer、dep-和-watcher","aria-hidden":"true"},"#"),t(" Observer、Dep 和 Watcher")],-1),a("hr",null,null,-1),a("p",null,[t("Vue 封装了一个"),a("code",null,"defineReactive"),t("方法来对数据进行"),a("code",null,"defineProperty"),t("改造")],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"function"),t(),a("span",{class:"token function"},"defineReactive"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("obj"),a("span",{class:"token operator"},":"),t(" Object"),a("span",{class:"token punctuation"},","),t(" key"),a("span",{class:"token operator"},":"),t(" string"),a("span",{class:"token punctuation"},","),t(" val"),a("span",{class:"token operator"},":"),t(" any")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n  Object"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"defineProperty"),a("span",{class:"token punctuation"},"("),t("obj"),a("span",{class:"token punctuation"},","),t(" key"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token function-variable function"},"get"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token keyword"},"function"),t(),a("span",{class:"token function"},"reactiveGetter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token comment"},"//添加依赖"),t("\n      dep"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"depend"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n      "),a("span",{class:"token keyword"},"return"),t(" value"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n\n    "),a("span",{class:"token function-variable function"},"set"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token keyword"},"function"),t(),a("span",{class:"token function"},"reactiveSetter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"newVal"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token comment"},"//发布"),t("\n      dep"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"notify"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n复制代码"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,[a("code",null,"defineReactive"),t("方法在改造数据的时候，数据 get 时进行依赖的添加，set 时发布")],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"class"),t(),a("span",{class:"token class-name"},"Observer"),t(),a("span",{class:"token punctuation"},"{"),t("\n  value"),a("span",{class:"token operator"},":"),t(" any"),a("span",{class:"token punctuation"},";"),t("\n  dep"),a("span",{class:"token operator"},":"),t(" Dep"),a("span",{class:"token punctuation"},";"),t("\n\n  "),a("span",{class:"token function"},"constructor"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("value"),a("span",{class:"token operator"},":"),t(" any")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("value "),a("span",{class:"token operator"},"="),t(" value\n    "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("dep "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},"Dep"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t("\n    "),a("span",{class:"token keyword"},"if"),a("span",{class:"token punctuation"},"("),t("Array"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"isArray"),a("span",{class:"token punctuation"},"("),t("value"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token comment"},"//遍历出来挨个用Observer去new一下"),t("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token keyword"},"else"),a("span",{class:"token punctuation"},"{"),t("\n       "),a("span",{class:"token comment"},"//是对象就遍历，挨个进行响应式改造改造"),t("\n       "),a("span",{class:"token keyword"},"const"),t(" keys "),a("span",{class:"token operator"},"="),t(" Object"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"keys"),a("span",{class:"token punctuation"},"("),t("obj"),a("span",{class:"token punctuation"},")"),t("\n       "),a("span",{class:"token keyword"},"for"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"let"),t(" i "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},";"),t(" i "),a("span",{class:"token operator"},"<"),t(" keys"),a("span",{class:"token punctuation"},"."),t("length"),a("span",{class:"token punctuation"},";"),t(" i"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n           "),a("span",{class:"token function"},"defineReactive"),a("span",{class:"token punctuation"},"("),t("obj"),a("span",{class:"token punctuation"},","),t(" keys"),a("span",{class:"token punctuation"},"["),t("i"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),t("\n       "),a("span",{class:"token punctuation"},"}"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n "),a("span",{class:"token punctuation"},"}"),t("\n复制代码\n")])])],-1),a("p",null,[a("code",null,"Observer"),t("的作用其实就是"),a("strong",null,"数据劫持"),t("，而 Vue 让每一个"),a("strong",null,"响应式"),t("的数据都是被"),a("code",null,"Observer"),t("改造过的")],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"class"),t(),a("span",{class:"token class-name"},"Dep"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token keyword"},"static"),t(" target"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token operator"},"?"),t("Watcher"),a("span",{class:"token punctuation"},";"),t("\n  id"),a("span",{class:"token operator"},":"),t(" number"),a("span",{class:"token punctuation"},";"),t("\n  subs"),a("span",{class:"token operator"},":"),t(" Array"),a("span",{class:"token operator"},"<"),t("Watcher"),a("span",{class:"token operator"},">"),a("span",{class:"token punctuation"},";"),t("\n  "),a("span",{class:"token function"},"constructor"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("id "),a("span",{class:"token operator"},"="),t(" uid"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("subs "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},";"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token function"},"addSub"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("sub"),a("span",{class:"token operator"},":"),t(" Watcher")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("subs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"push"),a("span",{class:"token punctuation"},"("),t("sub"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token function"},"removeSub"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("sub"),a("span",{class:"token operator"},":"),t(" Watcher")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token function"},"remove"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("subs"),a("span",{class:"token punctuation"},","),t(" sub"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token function"},"depend"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),t("Dep"),a("span",{class:"token punctuation"},"."),t("target"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      Dep"),a("span",{class:"token punctuation"},"."),t("target"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addDep"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token function"},"notify"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"const"),t(" subs "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("subs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"slice"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n\n    "),a("span",{class:"token keyword"},"for"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"let"),t(" i "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),t(" l "),a("span",{class:"token operator"},"="),t(" subs"),a("span",{class:"token punctuation"},"."),t("length"),a("span",{class:"token punctuation"},";"),t(" i "),a("span",{class:"token operator"},"<"),t(" l"),a("span",{class:"token punctuation"},";"),t(" i"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      subs"),a("span",{class:"token punctuation"},"["),t("i"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"update"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n复制代码"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,[a("code",null,"dep"),t("里维护一个"),a("code",null,"watcher"),t("列表"),a("code",null,"subs"),t("，并且有"),a("code",null,"depend"),t("和"),a("code",null,"notify"),t("方法，能添加"),a("code",null,"watcher"),t("并且发布通知，在 get 数据时，添加"),a("code",null,"watcher"),t("到"),a("code",null,"subs"),t("，"),a("code",null,"set"),t("数据时，遍历"),a("code",null,"subs"),t("并挨个执行更新 "),a("code",null,"Watcher"),t("  类，"),a("code",null,"addDep"),t("添加依赖（订阅），并具有"),a("code",null,"update"),t("方法")],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"class"),t(),a("span",{class:"token class-name"},"Watcher"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token function"},"addDep"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("dep"),a("span",{class:"token operator"},":"),t(" Dep")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"const"),t(" id "),a("span",{class:"token operator"},"="),t(" dep"),a("span",{class:"token punctuation"},"."),t("id\n    "),a("span",{class:"token comment"},"//添加依赖（订阅操作）"),t("\n    dep"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addSub"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},")"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token function"},"update"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"run"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token function"},"run"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("active"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n       "),a("span",{class:"token comment"},"//执行数据更新"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n复制代码\n")])])],-1),a("h2",{id:"关于对象"},[a("a",{class:"header-anchor",href:"#关于对象","aria-hidden":"true"},"#"),t(" 关于对象")],-1),a("p",null,[t("vue 无法检测属性的添加或移除，对于已经创建的实例，Vue 不允许动态添加根级别的响应式 property。但是可以用"),a("code",null,"Vue.set(object,propertyName,value)"),t(" 如果要为已有对象赋值多个新的 property，应该用原对象与要混合进去的对象的 property 一起创建一个新的对象。")],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// 代替 `Object.assign(this.someObject, { a: 1, b: 2 })`"),t("\n"),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("someObject "),a("span",{class:"token operator"},"="),t(" Object"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"assign"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("someObject"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token punctuation"},"{"),t(" a"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),t(" b"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"2"),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("h2",{id:"关于数组"},[a("a",{class:"header-anchor",href:"#关于数组","aria-hidden":"true"},"#"),t(" 关于数组")],-1),a("p",null,"数据也不是响应式的，直接修改数组内某项和修改数组的长度都是无法被检测的。也需要用 Vue.set",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// Vue.set"),t("\nVue"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"set"),a("span",{class:"token punctuation"},"("),t("vm"),a("span",{class:"token punctuation"},"."),t("items"),a("span",{class:"token punctuation"},","),t(" indexOfItem"),a("span",{class:"token punctuation"},","),t(" newValue"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,"vue 改写了数组的常用方法，用这些方法操作数组能使数组被检测到",-1),a("ul",null,[a("li",null,[a("code",null,"push()")]),a("li",null,[a("code",null,"pop()")]),a("li",null,[a("code",null,"shift()")]),a("li",null,[a("code",null,"unshift()")]),a("li",null,[a("code",null,"splice()")]),a("li",null,[a("code",null,"sort()")]),a("li",null,[a("code",null,"reverse()")])],-1),a("h2",{id:"生命周期"},[a("a",{class:"header-anchor",href:"#生命周期","aria-hidden":"true"},"#"),t(" 生命周期")],-1),a("p",null,"生命周期钩子自动绑定 this 上下文，所以不能用尖头函数，因为箭头函数绑定了父上下文，而不是当前实例",-1),a("table",null,[a("thead",null,[a("tr",null,[a("th",null,"生命周期钩子"),a("th",null,"调用时机")])]),a("tbody",null,[a("tr",null,[a("td",null,"beforeCreate"),a("td",null,"实例初始化后，还没有进行数据观测 (data observer) 和 event/watcher 事件配置")]),a("tr",null,[a("td",null,"created"),a("td",null,"实例创建完成之后立即调用，已经完成数据观测 (data observer)，property 和方法的运算，watch/event 事件回调，但还没有挂载 dom，所以$el 不可用")]),a("tr",null,[a("td",null,"beforeMount"),a("td",null,"挂载开始之前，render 首次被调用")]),a("tr",null,[a("td",null,"mounted"),a("td",null,"挂载完毕时调用，此时根实例已经挂载到了某个文档元素上。但是不保证所有子组建也都被挂载，用 vm.$nextTick 可等到整个视图渲染完毕")]),a("tr",null,[a("td",null,"beforeUpdate"),a("td",null,"数据更新时调用，但是是在虚拟 dom 打补丁之前")]),a("tr",null,[a("td",null,"updated"),a("td",null,"虚拟 dom 重新渲染和打补丁完毕后调用。")]),a("tr",null,[a("td",null,"updated 不会保证所有的子组件一起被重绘，如果要等到整个视图重绘完毕，需要使用 vm.$nextTick"),a("td")]),a("tr",null,[a("td",null,"activated"),a("td",null,"kepp-alive 缓存的组建激活时调用")]),a("tr",null,[a("td",null,"deactivated"),a("td",null,"keep-alive 的组件停用时调用")]),a("tr",null,[a("td",null,"beforeDestroy"),a("td",null,"实例销毁前调用，这一步里实例仍然完全可用")]),a("tr",null,[a("td",null,"destroyed"),a("td",null,"实例销毁后调用")])])],-1),a("h2",{id:"组件间通信"},[a("a",{class:"header-anchor",href:"#组件间通信","aria-hidden":"true"},"#"),t(" 组件间通信")],-1),a("ol",null,[a("li",null,"父传子用 prop"),a("li",null,"子向父用$on和$emit，子组件通知父组件改值"),a("li",null,"兄弟组件传值，通过父组件传递或者用 eventBus")],-1),a("p",null,"举例：",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"//Bus.js"),t("\n"),a("span",{class:"token keyword"},"import"),t(" Vue "),a("span",{class:"token keyword"},"from"),t(),a("span",{class:"token string"},"'vue'"),t("\n\n"),a("span",{class:"token keyword"},"export"),t(),a("span",{class:"token keyword"},"default"),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},"Vue"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t("\n\n"),a("span",{class:"token comment"},"//Child1.vue"),t("\n"),a("span",{class:"token operator"},"<"),t("template"),a("span",{class:"token operator"},">"),t("\n    "),a("span",{class:"token operator"},"<"),t("button @click"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"clickHandle"'),a("span",{class:"token operator"},">"),t(),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"{"),t("n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("button"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("template"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token operator"},"<"),t("script"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token keyword"},"import"),t(" Event "),a("span",{class:"token keyword"},"from"),t(),a("span",{class:"token string"},"'../bus'"),t("\n\n"),a("span",{class:"token keyword"},"export"),t(),a("span",{class:"token keyword"},"default"),t(),a("span",{class:"token punctuation"},"{"),t("\n  name"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"'Child1'"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token function"},"data"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"return"),a("span",{class:"token punctuation"},"{"),t("\n      n"),a("span",{class:"token operator"},":"),a("span",{class:"token number"},"100"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  methods"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token function"},"clickHandle"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      Event"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"$emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'update:count'"),a("span",{class:"token punctuation"},","),t("n"),a("span",{class:"token punctuation"},")"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("script"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token operator"},"<"),t("style"),a("span",{class:"token operator"},">"),t("\n "),a("span",{class:"token operator"},"..."),t("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("style"),a("span",{class:"token operator"},">"),t("\n\n"),a("span",{class:"token comment"},"//Child2.vue"),t("\n"),a("span",{class:"token operator"},"<"),t("template"),a("span",{class:"token operator"},">"),t("\n    "),a("span",{class:"token operator"},"<"),t("p"),a("span",{class:"token operator"},">"),t("这是新的n"),a("span",{class:"token operator"},":"),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"{"),t("n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("p"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("template"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token operator"},"<"),t("script"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token keyword"},"import"),t(" Event "),a("span",{class:"token keyword"},"from"),t(),a("span",{class:"token string"},"'../bus'"),t("\n\n"),a("span",{class:"token keyword"},"export"),t(),a("span",{class:"token keyword"},"default"),t(),a("span",{class:"token punctuation"},"{"),t("\n  name"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"'Child2'"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token function"},"data"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"return"),a("span",{class:"token punctuation"},"{"),t("\n      n"),a("span",{class:"token operator"},":"),a("span",{class:"token number"},"0"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token function"},"created"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),t("\n      Event"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"$on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'update:count'"),a("span",{class:"token punctuation"},","),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"n"),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),a("span",{class:"token punctuation"},"{"),t("\n        console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),t("n"),a("span",{class:"token punctuation"},")"),t("\n        "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("n"),a("span",{class:"token operator"},"="),t("n\n      "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("script"),a("span",{class:"token operator"},">"),t("\n"),a("span",{class:"token operator"},"<"),t("style"),a("span",{class:"token operator"},">"),t("\n "),a("span",{class:"token operator"},"..."),t("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),t("style"),a("span",{class:"token operator"},">"),t("\n")])])],-1),a("ol",{start:"4"},[a("li",null,"任意组件传值，用 vuex")],-1),a("h2",{id:"其他不常用的方法"},[a("a",{class:"header-anchor",href:"#其他不常用的方法","aria-hidden":"true"},"#"),t(" 其他不常用的方法")],-1),a("ol",null,[a("li",null,[t("所有子组件都可以通过"),a("code",null,"$root"),t("获取根实例。")])],-1),a("p",null,[t("可以直接"),a("code",null,"this.$root.xxx"),t("读写根组件的数据、计算属性和方法。 可以将根实例作为一个全局 store 来使用 只适用于小型 demo，大型项目直接用 vuex")],-1),a("ol",{start:"2"},[a("li",null,[t("子组件可以通过"),a("code",null,"$parent"),t("访问父组件")])],-1),a("p",null,"用法同上，但是不推荐使用，因为这样会导致程序复杂时无法得知父组件的变更是从哪里发起的",-1),a("ol",{start:"3"},[a("li",null,"依赖注入 provide/inject")],-1),a("p",null,"祖先组件提供一个数据/方法",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token function-variable function"},"provide"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token keyword"},"function"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token keyword"},"return"),t(),a("span",{class:"token punctuation"},"{"),t("\n    getMap"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("getMap\n  "),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n")])])],-1),a("p",null,"任意的后代获取这个数据/方法",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[t("inject"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'getMap'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("ol",{start:"4"},[a("li",null,"ref 访问子组件实例或子元素")],-1),a("p",null,[t("你可以通过 "),a("code",null,"ref"),t(" 这个 attribute 为子组件赋予一个 ID 引用。例如：")],-1),a("div",{class:"language-vue"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("base-input")]),t(),a("span",{class:"token attr-name"},"ref"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("usernameInput"),a("span",{class:"token punctuation"},'"')]),a("span",{class:"token punctuation"},">")]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),t("base-input")]),a("span",{class:"token punctuation"},">")]),t("\n")])])],-1),a("p",null,[t("现在在你已经定义了这个 "),a("code",null,"ref"),t(" 的组件里，你可以使用：")],-1),a("div",{class:"language-vue"},[a("pre",null,[a("code",null,"this.$refs.usernameInput\n")])],-1),a("p",null,[a("code",null,"$refs"),t("只会在组件渲染完成后生效，并且不是响应式的。避免在模版或计算属性中访问$refs")],-1),a("h1",{id:"vuex-核心"},[a("a",{class:"header-anchor",href:"#vuex-核心","aria-hidden":"true"},"#"),t(" vuex 核心")],-1),a("p",null,"vuex 是一个单一状态树，作为一个唯一数据源使用",-1),a("h2",{id:"state"},[a("a",{class:"header-anchor",href:"#state","aria-hidden":"true"},"#"),t(" State")],-1),a("p",null,"全局注册",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),t(" app "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},"Vue"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t("\n  el"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"'#app'"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token comment"},"// 把 store 对象提供给 “store” 选项，这可以把 store 的实例注入所有的子组件"),t("\n  store"),a("span",{class:"token punctuation"},","),t("\n  components"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t(" Counter "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  template"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},'\n    <div class="app">\n      <counter></counter>\n    </div>\n  '),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,"通过 this.$store 访问，vuex 也是响应式的，我们可以用计算属性获取 vuex 中的数据",-1),a("h2",{id:"getters"},[a("a",{class:"header-anchor",href:"#getters","aria-hidden":"true"},"#"),t(" Getters")],-1),a("p",null,"vuex 的计算属性 接受 state 作为第一个参数",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),t(" store "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},[t("Vuex"),a("span",{class:"token punctuation"},"."),t("Store")]),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t("\n  state"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    todos"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"["),t("\n      "),a("span",{class:"token punctuation"},"{"),t(" id"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),t(" text"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"'...'"),a("span",{class:"token punctuation"},","),t(" done"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token boolean"},"true"),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n      "),a("span",{class:"token punctuation"},"{"),t(" id"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},","),t(" text"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"'...'"),a("span",{class:"token punctuation"},","),t(" done"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token boolean"},"false"),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n    "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  getters"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token function-variable function"},"doneTodos"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token parameter"},"state"),t(),a("span",{class:"token operator"},"=>"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token keyword"},"return"),t(" state"),a("span",{class:"token punctuation"},"."),t("todos"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"filter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"todo"),t(),a("span",{class:"token operator"},"=>"),t(" todo"),a("span",{class:"token punctuation"},"."),t("done"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,[t("同样通过 "),a("code",null,"this.$store.getters.xxx"),t("  访问 getter 也可以返回一个函数，可以实现给 getter 传参，但是这样会每次都进行调用，而不会缓存结果")],-1),a("h2",{id:"mutations"},[a("a",{class:"header-anchor",href:"#mutations","aria-hidden":"true"},"#"),t(" Mutations")],-1),a("p",null,"注册一个事件，接收 state 作为第一个参数",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),t(" store "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},[t("Vuex"),a("span",{class:"token punctuation"},"."),t("Store")]),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t("\n  state"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    count"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  mutations"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token function"},"increment"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"state"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token comment"},"// 变更状态"),t("\n      state"),a("span",{class:"token punctuation"},"."),t("count"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,"子组件中触发这个事件",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[t("store"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"commit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'increment'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,[t("可以传参数，vuex 里叫做 "),a("strong",null,"载荷 payload"),t("  可以传单个参数，推荐用对象的形式提交载荷")],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// ..."),t("\nmutations"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token function"},"increment"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("state"),a("span",{class:"token punctuation"},","),t(" payload")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    state"),a("span",{class:"token punctuation"},"."),t("count "),a("span",{class:"token operator"},"+="),t(" payload"),a("span",{class:"token punctuation"},"."),t("amount\n  "),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n")])])],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[t("store"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"commit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'increment'"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token punctuation"},"{"),t("\n  amount"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,"此外，还有对象风格的提交方式，其他用法照常",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[t("store"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"commit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t("\n  type"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"'increment'"),a("span",{class:"token punctuation"},","),t("\n  amount"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("p",null,"mutation 需要遵守 Vue 的响应规则",-1),a("h2",{id:"actions"},[a("a",{class:"header-anchor",href:"#actions","aria-hidden":"true"},"#"),t(" Actions")],-1),a("p",null,"mutation 必须是同步函数，异步回调中进行的状态的改变都是不可追踪的 Action 类似于 mutation，但是",-1),a("ul",null,[a("li",null,"Action 提交的是 mutation，而不是直接变更状态"),a("li",null,"Action 可以包含任意异步操作")],-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),t(" store "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},[t("Vuex"),a("span",{class:"token punctuation"},"."),t("Store")]),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t("\n  state"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    count"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  mutations"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token function"},"increment"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"state"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      state"),a("span",{class:"token punctuation"},"."),t("count"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  actions"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token function"},"increment"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"context"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      context"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"commit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'increment'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),t("\n")])])],-1),a("h2",{id:"modules"},[a("a",{class:"header-anchor",href:"#modules","aria-hidden":"true"},"#"),t(" Modules")],-1),a("p",null,"为了避免 store 太过臃肿，我们可以分割模块",-1),a("div",{class:"language-javascript"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),t(" moduleA "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token function-variable function"},"state"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token operator"},"=>"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t(),a("span",{class:"token operator"},"..."),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},","),t("\n  mutations"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t(),a("span",{class:"token operator"},"..."),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  actions"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t(),a("span",{class:"token operator"},"..."),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  getters"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t(),a("span",{class:"token operator"},"..."),t(),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token keyword"},"const"),t(" moduleB "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token function-variable function"},"state"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token operator"},"=>"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t(),a("span",{class:"token operator"},"..."),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},","),t("\n  mutations"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t(),a("span",{class:"token operator"},"..."),t(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  actions"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t(),a("span",{class:"token operator"},"..."),t(),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token keyword"},"const"),t(" store "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},[t("Vuex"),a("span",{class:"token punctuation"},"."),t("Store")]),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),t("\n  modules"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token punctuation"},"{"),t("\n    a"),a("span",{class:"token operator"},":"),t(" moduleA"),a("span",{class:"token punctuation"},","),t("\n    b"),a("span",{class:"token operator"},":"),t(" moduleB\n  "),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),t("\n")])])],-1),a("h2",{id:"vue-router-核心"},[a("a",{class:"header-anchor",href:"#vue-router-核心","aria-hidden":"true"},"#"),t(" vue-router 核心")],-1)];e.render=function(a,t,o,e,p,l){return n(),s("div",null,c)};export{o as __pageData,e as default};
