<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>前端基建 ——— 接口、数据、类型在前端开发中的管理及应用 | Vite &amp; Vue powered static site generator</title>
    <meta name="description" content="前端学习笔记">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/Jarrett-blog/assets/style.BxYy6MEi.css" as="style">
    <link rel="preload stylesheet" href="/Jarrett-blog/vp-icons.css" as="style">
    
    <script type="module" src="/Jarrett-blog/assets/app.hQUXQupM.js"></script>
    <link rel="preload" href="/Jarrett-blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/theme.DXZAdxYV.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/framework.C1rSk1pR.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/ApiTest.6A2F-EZ-.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/Zod.vue_vue_type_script_setup_true_lang.Cu3DpBfs.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/plan_front-end-infrastructure_index.md.BsPm8t4N.lean.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="icon" href="/Jarrett-blogfavicon.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="n-config-provider" data-v-e044f95b><!----><div class="Layout" data-v-e044f95b data-v-ffb09705><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d2b01218></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-d2b01218> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ffb09705 data-v-d5086a5b><div class="VPNavBar has-sidebar top" data-v-d5086a5b data-v-b1dc54d2><div class="wrapper" data-v-b1dc54d2><div class="container" data-v-b1dc54d2><div class="title" data-v-b1dc54d2><div class="VPNavBarTitle has-sidebar" data-v-b1dc54d2 data-v-896105e3><a class="title" href="/Jarrett-blog/" data-v-896105e3><!--[--><!--]--><!----><span data-v-896105e3>🏠 JarrettBlog</span><!--[--><!--]--></a></div></div><div class="content" data-v-b1dc54d2><div class="content-body" data-v-b1dc54d2><!--[--><!--]--><div class="VPNavBarSearch search" data-v-b1dc54d2><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b1dc54d2 data-v-3f5a4db7><span id="main-nav-aria-label" class="visually-hidden" data-v-3f5a4db7> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/front-end/html/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📘 前端基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/computer-basic/design-pattern/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📚 计算机基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/Jarrett-blog/plan/micro-fe-communication/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>🏹 方案</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/practice/leetcode.html" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>✍ 练习题</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/web3/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📘 WEB3</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/resume/index.html" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>🔖 简历</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-b1dc54d2 data-v-d84b2752><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d84b2752 data-v-56ef3316 data-v-80588559><span class="check" data-v-80588559><span class="icon" data-v-80588559><!--[--><span class="vpi-sun sun" data-v-56ef3316></span><span class="vpi-moon moon" data-v-56ef3316></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b1dc54d2 data-v-29e6104c data-v-4603dc2a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b1dc54d2 data-v-a7f6646a data-v-17857302><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-17857302><span class="vpi-more-horizontal icon" data-v-17857302></span></button><div class="menu" data-v-17857302><div class="VPMenu" data-v-17857302 data-v-d932083f><!----><!--[--><!--[--><!----><div class="group" data-v-a7f6646a><div class="item appearance" data-v-a7f6646a><p class="label" data-v-a7f6646a>Appearance</p><div class="appearance-action" data-v-a7f6646a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-a7f6646a data-v-56ef3316 data-v-80588559><span class="check" data-v-80588559><span class="icon" data-v-80588559><!--[--><span class="vpi-sun sun" data-v-56ef3316></span><span class="vpi-moon moon" data-v-56ef3316></span><!--]--></span></span></button></div></div></div><div class="group" data-v-a7f6646a><div class="item social-links" data-v-a7f6646a><div class="VPSocialLinks social-links-list" data-v-a7f6646a data-v-4603dc2a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b1dc54d2 data-v-04046837><span class="container" data-v-04046837><span class="top" data-v-04046837></span><span class="middle" data-v-04046837></span><span class="bottom" data-v-04046837></span></span></button></div></div></div></div><div class="divider" data-v-b1dc54d2><div class="divider-line" data-v-b1dc54d2></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-ffb09705 data-v-a5ffc52e><div class="container" data-v-a5ffc52e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a5ffc52e><span class="vpi-align-left menu-icon" data-v-a5ffc52e></span><span class="menu-text" data-v-a5ffc52e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a5ffc52e data-v-98eee035><button data-v-98eee035>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-ffb09705 data-v-ae7e1657><div class="curtain" data-v-ae7e1657></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-ae7e1657><span class="visually-hidden" id="sidebar-aria-label" data-v-ae7e1657> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>前端基础</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/html/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>HTML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/css/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>CSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/js/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>JS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/ts/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>TS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/browser/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>浏览器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue3/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>vue3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/nodejs/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>nodejs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/git/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/canvas/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>canvas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/micro-front/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>微前端</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/miniprogram/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>小程序</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>计算机基础</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>设计模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/internet/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>计算机网络</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/arithmetic/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>数据结构与算法</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0 has-active" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>方案</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/navigation/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>多级跳转</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/micro-fe-communication/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>微前端下的主子通信</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/api-test/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>接口测试平台</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/how-to-make-ts-useful/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>10分钟速通TS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/front-end-infrastructure/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>前端基建（一）</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>WEB3</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/web3/index.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>新手入门</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>练习题</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/practice/leetcode.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>算法题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/practice/promise.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>Promise</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ffb09705 data-v-30f0ecb7><div class="VPDoc has-sidebar has-aside" data-v-30f0ecb7 data-v-3f19d6b0><!--[--><!--]--><div class="container" data-v-3f19d6b0><div class="aside" data-v-3f19d6b0><div class="aside-curtain" data-v-3f19d6b0></div><div class="aside-container" data-v-3f19d6b0><div class="aside-content" data-v-3f19d6b0><div class="VPDocAside" data-v-3f19d6b0 data-v-e53cbd78><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-e53cbd78 data-v-c3513957><div class="content" data-v-c3513957><div class="outline-marker" data-v-c3513957></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c3513957>On this page</div><ul class="VPDocOutlineItem root" data-v-c3513957 data-v-d1d61fd6><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-e53cbd78></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><button class="n-button n-button--info-type n-button--large-type" tabindex="0" type="button" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-bezier-ease-out:cubic-bezier(0, 0, .2, 1);--n-ripple-duration:.6s;--n-opacity-disabled:0.5;--n-wave-opacity:0.6;font-weight:400;--n-color:#0000;--n-color-hover:rgba(46, 51, 56, .09);--n-color-pressed:rgba(46, 51, 56, .13);--n-color-focus:rgba(46, 51, 56, .09);--n-color-disabled:#0000;--n-ripple-color:#0000;--n-text-color:#2080f0;--n-text-color-hover:#2080f0;--n-text-color-pressed:#2080f0;--n-text-color-focus:#2080f0;--n-text-color-disabled:#2080f0;--n-border:1px solid #2080f0;--n-border-hover:1px solid #4098fc;--n-border-pressed:1px solid #1060c9;--n-border-focus:1px solid #4098fc;--n-border-disabled:1px solid #2080f0;--n-width:40px;--n-height:40px;--n-font-size:15px;--n-padding:initial;--n-icon-size:20px;--n-icon-margin:6px;--n-border-radius:40px;" data-v-e044f95b><!----><span class="n-button__icon" style="margin:0;"><div class="n-icon-slot" role="none"><i role="img" class="n-icon" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-color:;--n-opacity:;font-size:20px;" data-v-e044f95b><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" data-v-e044f95b><path d="M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20z" fill="currentColor"></path><path d="M14 19.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z" fill="currentColor"></path></svg></i></div></span><!----><div aria-hidden="true" class="n-base-wave"></div><!----><!----></button><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-3f19d6b0><div class="content-container" data-v-3f19d6b0><!--[--><!--]--><main class="main" data-v-3f19d6b0><div style="position:relative;" class="vp-doc _Jarrett-blog_plan_front-end-infrastructure_" data-v-3f19d6b0><div><h1 id="前端基建-———-接口、数据、类型在前端开发中的管理及应用" tabindex="-1">前端基建 ——— 接口、数据、类型在前端开发中的管理及应用 <a class="header-anchor" href="#前端基建-———-接口、数据、类型在前端开发中的管理及应用" aria-label="Permalink to &quot;前端基建 ——— 接口、数据、类型在前端开发中的管理及应用&quot;">​</a></h1><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h2><p>前端基建，包括<code>构建工具、规范与质量保障、自动化测试、组件库、前后端协作</code>等等</p><p>目的是为了实现标准化 + 规范化 + 工具化 + 自动化，业务支撑是活在当下，技术基建是活好未来</p><p>本文主要针对前后端协作及质量保障展开。</p><p>接口、数据、类型贯穿了开发流程的始终：</p><div class="h-500px"><div class="knowledge-map relative w-full h-full overflow-hidden" data-v-61b5a500><div id="ela69eab618c6f4e6abca0899a6ba55631" class="w-full h-full relative" data-v-61b5a500></div></div></div><div class="warning custom-block"><p class="custom-block-title">开发过程中的痛点：</p><ol><li>前端 mock 数据写在项目代码里，如果没有及时清理，会增加不必要的项目体积</li><li>前期开发阶段没有真实的接口调用全流程，影响联调</li><li>后端给出的接口文档不具备修改通知和 diff 功能，需要仔细询问核对哪些经过修改，且后续无历史记录</li><li>TS 使用不高效，没有起到应有的作用</li><li>后端多个服务互相调用时，频繁出现数据类型变动的问题，未及时发现可能导致 bug</li></ol></div><div class="tip custom-block"><p class="custom-block-title">如何改进？</p><ol><li>可追溯、可 mock、交互友好的接口文档、测试平台</li><li>更高效、规范地使用 TS</li><li>建立运行时数据校验体系</li></ol></div><h1 id="接口测试平台" tabindex="-1">接口测试平台 <a class="header-anchor" href="#接口测试平台" aria-label="Permalink to &quot;接口测试平台&quot;">​</a></h1><h2 id="yapi-简介" tabindex="-1">yapi 简介 <a class="header-anchor" href="#yapi-简介" aria-label="Permalink to &quot;yapi 简介&quot;">​</a></h2><p>yapi 是一个开源的接口管理平台，目前 star 数量 27.3k，具备以下特性：</p><ol><li>权限管理</li><li>项目管理</li><li>可视化接口管理，接口修改记录可追溯</li><li>基于 mock.js，方便的 mock 数据生成器</li><li>接口自动化测试</li><li>数据导入，支持 swagger、postman、har 数据格式，便于迁移</li></ol><h2 id="快速上手" tabindex="-1">快速上手 <a class="header-anchor" href="#快速上手" aria-label="Permalink to &quot;快速上手&quot;">​</a></h2><p>新建项目-&gt;新建分类-&gt;添加接口</p><blockquote><p>手动演示</p></blockquote><p>配置接口代理，使用<code>nginx</code>或者<code>代理工具</code>配置代理</p><h4 id="举例-nginx-代理配置" tabindex="-1">举例 nginx 代理配置 <a class="header-anchor" href="#举例-nginx-代理配置" aria-label="Permalink to &quot;举例 nginx 代理配置&quot;">​</a></h4><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">server</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">  listen </span><span style="color:#D33682;">443</span><span style="color:#839496;"> ssl;</span></span>
<span class="line"><span style="color:#859900;">  server_name </span><span style="color:#839496;">test.jarrett.com;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">  ssl_certificate </span><span style="color:#839496;">SSL/test.jarrett.com.crt;</span></span>
<span class="line"><span style="color:#859900;">  ssl_certificate_key </span><span style="color:#839496;">SSL/test.jarrett.com.key;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  location</span><span style="color:#839496;"> / {</span></span>
<span class="line"><span style="color:#859900;">    proxy_pass </span><span style="color:#839496;">https://xx.xx.x.xxx:443/;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">Host https://xx.xx.x.xxx:443/;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">X-Real-IP </span><span style="color:#859900;">$</span><span style="color:#268BD2;">remote_addr</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">X-Forwarded-For </span><span style="color:#859900;">$</span><span style="color:#268BD2;">proxy_add_x_forwarded_for</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">X-Forwarded-Photo </span><span style="color:#859900;">$</span><span style="color:#268BD2;">scheme</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  location</span><span style="color:#839496;"> /api/getUsers{</span></span>
<span class="line"><span style="color:#859900;">    proxy_pass </span><span style="color:#839496;">http://xx.xx.x.xxx:3000/mock/83/api/getUsers;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">Host http://xx.xx.x.xxx:3000;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">X-Real-IP </span><span style="color:#859900;">$</span><span style="color:#268BD2;">remote_addr</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">X-Forwarded-For </span><span style="color:#859900;">$</span><span style="color:#268BD2;">proxy_add_x_forwarded_for</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">    proxy_set_header </span><span style="color:#839496;">X-Forwarded-Photo </span><span style="color:#859900;">$</span><span style="color:#268BD2;">scheme</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><p>vite 热更新配置</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#839496;">{</span></span>
<span class="line"><span style="color:#859900;">  &quot;server&quot;</span><span style="color:#839496;">: {</span></span>
<span class="line"><span style="color:#859900;">    &quot;hmr&quot;</span><span style="color:#839496;">: {</span></span>
<span class="line"><span style="color:#859900;">      &quot;port&quot;</span><span style="color:#839496;">: </span><span style="color:#D33682;">8888</span><span style="color:#586E75;font-style:italic;"> // 对应nginx监听的端口</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><p>接口测试</p><!----><h2 id="创建模拟数据" tabindex="-1">创建模拟数据 <a class="header-anchor" href="#创建模拟数据" aria-label="Permalink to &quot;创建模拟数据&quot;">​</a></h2><h3 id="mockjs-使用语法" tabindex="-1">mockjs 使用语法 <a class="header-anchor" href="#mockjs-使用语法" aria-label="Permalink to &quot;mockjs 使用语法&quot;">​</a></h3><p><a href="http://mockjs.com/examples.html" target="_blank" rel="noreferrer">数据模板定义示例</a></p><p>常用语法</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#839496;">{</span></span>
<span class="line"><span style="color:#859900;">  &quot;age|1-100&quot;</span><span style="color:#839496;">: </span><span style="color:#D33682;">100</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#859900;">  &quot;value|123.3&quot;</span><span style="color:#839496;">: </span><span style="color:#D33682;">123.111</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#859900;">  &quot;isVip|1-2&quot;</span><span style="color:#839496;">: </span><span style="color:#B58900;">true</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#859900;">  &quot;list|1-100&quot;</span><span style="color:#839496;">: [{ </span><span style="color:#859900;">&quot;name&quot;</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&quot;test&quot;</span><span style="color:#839496;"> }],</span></span>
<span class="line"><span style="color:#859900;">  &quot;address|2&quot;</span><span style="color:#839496;">: {</span></span>
<span class="line"><span style="color:#859900;">    &quot;310000&quot;</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&quot;上海市&quot;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#859900;">    &quot;320000&quot;</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&quot;江苏省&quot;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#859900;">    &quot;330000&quot;</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&quot;浙江省&quot;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#859900;">    &quot;340000&quot;</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&quot;安徽省&quot;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><h3 id="json-schema" tabindex="-1">json-schema <a class="header-anchor" href="#json-schema" aria-label="Permalink to &quot;json-schema&quot;">​</a></h3><p><img src="/Jarrett-blog/assets/schema-mock.CrfIr7ea.png" alt="json-schema" loading="lazy"></p><h2 id="高级-mock" tabindex="-1">高级 mock <a class="header-anchor" href="#高级-mock" aria-label="Permalink to &quot;高级 mock&quot;">​</a></h2><h3 id="mock-期望" tabindex="-1">Mock 期望 <a class="header-anchor" href="#mock-期望" aria-label="Permalink to &quot;Mock 期望&quot;">​</a></h3><ul><li>自定义过滤规则，返回自定义数据，支持 mock</li><li>可定义接口延时</li><li>可定义 http 状态码</li></ul><h3 id="自定义-mock-脚本" tabindex="-1">自定义 Mock 脚本 <a class="header-anchor" href="#自定义-mock-脚本" aria-label="Permalink to &quot;自定义 Mock 脚本&quot;">​</a></h3><h4 id="全局变量" tabindex="-1">全局变量 <a class="header-anchor" href="#全局变量" aria-label="Permalink to &quot;全局变量&quot;">​</a></h4><p>请求</p><ul><li><code>header</code> 请求的 HTTP 头</li><li><code>params</code> 请求参数，包括 Body、Query 中所有参数</li><li><code>cookie</code> 请求带的 Cookies</li></ul><p>响应</p><ul><li><code>mockJson</code> 接口定义的响应数据 Mock 模板</li><li><code>resHeader</code> 响应的 HTTP 头</li><li><code>httpCode</code> 响应的 HTTP 状态码</li><li><code>delay</code> Mock 响应延时，单位为 ms</li><li><code>Random</code> Mock.Random 方法，可以添加自定义占位符,详细使用方法请查看</li></ul><p>示例 1，根据请求参数重写 mockJson</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#859900;">if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">params</span><span style="color:#839496;">.</span><span style="color:#268BD2;">type</span><span style="color:#859900;"> ==</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">  mockJson</span><span style="color:#839496;">.</span><span style="color:#268BD2;">errcode</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 400</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">  mockJson</span><span style="color:#839496;">.</span><span style="color:#268BD2;">errmsg</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;error&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">header</span><span style="color:#839496;">.</span><span style="color:#268BD2;">token</span><span style="color:#859900;"> ==</span><span style="color:#2AA198;"> &#39;t&#39;</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">  mockJson</span><span style="color:#839496;">.</span><span style="color:#268BD2;">errcode</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 300</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">  mockJson</span><span style="color:#839496;">.</span><span style="color:#268BD2;">errmsg</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;error&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">cookie</span><span style="color:#839496;">.</span><span style="color:#268BD2;">type</span><span style="color:#859900;"> ==</span><span style="color:#2AA198;"> &#39;a&#39;</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">  mockJson</span><span style="color:#839496;">.</span><span style="color:#268BD2;">errcode</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 500</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">  mockJson</span><span style="color:#839496;">.</span><span style="color:#268BD2;">errmsg</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;error&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><h2 id="自动化测试" tabindex="-1">自动化测试 <a class="header-anchor" href="#自动化测试" aria-label="Permalink to &quot;自动化测试&quot;">​</a></h2><p>传统的接口自动化测试成本高，大量的项目没有使用自动化测试保证接口的质量，仅仅依靠手动测试，是非常不可靠和容易出错的。</p><p>YApi 为了解决这个问题，开发了可视化接口自动化测试功能，只需要配置每个接口的入参和对 RESPONSE 断言，即可实现对接口的自动化测试，大大提升了接口测试的效率。</p><p><img src="/Jarrett-blog/assets/case-list.D87dBEnp.gif" alt="自动化测试" loading="lazy"></p><p>用例之间可以互相引用数据</p><p><img src="/Jarrett-blog/assets/case_key_list.9mEwuduc.png" alt="" loading="lazy"></p><p><img src="/Jarrett-blog/assets/case_key_query.r9CE0zrl.png" alt="" loading="lazy"></p><h2 id="竞品" tabindex="-1">竞品 <a class="header-anchor" href="#竞品" aria-label="Permalink to &quot;竞品&quot;">​</a></h2><p>市面上还有一些商业化接口管理平台，如 Apifox，提供了更加丰富的功能，可付费私有化部署</p><p><a href="https://app.apifox.com/main/teams/2803313?tab=project" target="_blank" rel="noreferrer">Apifox</a></p><h3 id="数据模型" tabindex="-1">数据模型 <a class="header-anchor" href="#数据模型" aria-label="Permalink to &quot;数据模型&quot;">​</a></h3><p><img src="/Jarrett-blog/assets/model.4KdcuVHY.png" alt="数据模型" loading="lazy"></p><h3 id="组件" tabindex="-1">组件 <a class="header-anchor" href="#组件" aria-label="Permalink to &quot;组件&quot;">​</a></h3><p><img src="/Jarrett-blog/assets/edit-component.BC7SSfLk.png" alt="编辑组件" loading="lazy"></p><p><img src="/Jarrett-blog/assets/use-component.Com_zgiK.png" alt="使用组件" loading="lazy"></p><h1 id="_10-分钟速通-ts" tabindex="-1">10 分钟速通 TS <a class="header-anchor" href="#_10-分钟速通-ts" aria-label="Permalink to &quot;10 分钟速通 TS&quot;">​</a></h1><h2 id="ts-必知必会" tabindex="-1">TS 必知必会 <a class="header-anchor" href="#ts-必知必会" aria-label="Permalink to &quot;TS 必知必会&quot;">​</a></h2><p>用 20% 的知识解决 80% 的日常开发</p><h3 id="type-interface" tabindex="-1">type &amp; interface <a class="header-anchor" href="#type-interface" aria-label="Permalink to &quot;type &amp; interface&quot;">​</a></h3><ul><li>type 类型别名。适用于定义复杂的类型组合，如联合类型和交叉类型。<strong>当需要表示一个值可能是多种类型之一，或者一个类型需要同时满足多种类型的特征时，类型别名非常方便</strong></li><li>interface 接口。更适合用于定义对象的形状，尤其是在面向对象编程或者定义 API 的返回值和参数类型时。<strong>当需要描述一个类应该实现的契约（如具有哪些方法和属性）时，接口是很好的选择</strong></li></ul><div class="monaco-editor-wrap"></div><h3 id="条件类型" tabindex="-1">条件类型 <a class="header-anchor" href="#条件类型" aria-label="Permalink to &quot;条件类型&quot;">​</a></h3><p>extends 既可以用于继承，也可用于类型约束</p><div class="monaco-editor-wrap"></div><h3 id="namespace" tabindex="-1">namespace <a class="header-anchor" href="#namespace" aria-label="Permalink to &quot;namespace&quot;">​</a></h3><p>用于防止类型重命名冲突，比如微信小程序提供了全局类型的 namespace</p><div class="monaco-editor-wrap"></div><h3 id="泛型" tabindex="-1">泛型 <a class="header-anchor" href="#泛型" aria-label="Permalink to &quot;泛型&quot;">​</a></h3><p>合理使用泛型是 ts 的精髓，能够更好的封装通用方法</p><p>学会泛型能够轻松阅读各类社区库的类型声明，良好的变量命名、类型声明很多时候可以替代文档</p><div class="monaco-editor-wrap"></div><h3 id="枚举-常量枚举" tabindex="-1">枚举 &amp; 常量枚举 <a class="header-anchor" href="#枚举-常量枚举" aria-label="Permalink to &quot;枚举 &amp; 常量枚举&quot;">​</a></h3><p>业务代码中常有关于枚举的判断，比如<code>data.status===1</code>，这可能分散在各个项目文件，并且缺失语义</p><div class="danger custom-block"><p class="custom-block-title">建议</p><p>如果不想在业务变动时一处处地逐个修改枚举判断，建议所有使用常量或枚举而不是硬编码</p></div><div class="monaco-editor-wrap"></div><p>编译结果如下</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#2AA198;">&#39;use strict&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> Status</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">(</span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> (Status) {</span></span>
<span class="line"><span style="color:#268BD2;">  Status</span><span style="color:#839496;">[(</span><span style="color:#268BD2;">Status</span><span style="color:#839496;">[</span><span style="color:#2AA198;">&#39;SUCCESS&#39;</span><span style="color:#839496;">] </span><span style="color:#859900;">=</span><span style="color:#D33682;"> 0</span><span style="color:#839496;">)] </span><span style="color:#859900;">=</span><span style="color:#2AA198;"> &#39;SUCCESS&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">  Status</span><span style="color:#839496;">[(</span><span style="color:#268BD2;">Status</span><span style="color:#839496;">[</span><span style="color:#2AA198;">&#39;FAIL&#39;</span><span style="color:#839496;">] </span><span style="color:#859900;">=</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">)] </span><span style="color:#859900;">=</span><span style="color:#2AA198;"> &#39;FAIL&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">  Status</span><span style="color:#839496;">[(</span><span style="color:#268BD2;">Status</span><span style="color:#839496;">[</span><span style="color:#2AA198;">&#39;PENDING&#39;</span><span style="color:#839496;">] </span><span style="color:#859900;">=</span><span style="color:#D33682;"> 2</span><span style="color:#839496;">)] </span><span style="color:#859900;">=</span><span style="color:#2AA198;"> &#39;PENDING&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">})(</span><span style="color:#268BD2;">Status</span><span style="color:#859900;"> ||</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">Status</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {}));</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> _ConstStatus</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  SUCCESS: </span><span style="color:#D33682;">0</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  FAIL: </span><span style="color:#D33682;">1</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  PENDING: </span><span style="color:#D33682;">2</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">Status</span><span style="color:#839496;">.</span><span style="color:#268BD2;">SUCCESS</span><span style="color:#839496;">, </span><span style="color:#D33682;">0</span><span style="color:#586E75;font-style:italic;"> /* ConstStatus.SUCCESS */</span><span style="color:#839496;">, </span><span style="color:#268BD2;">_ConstStatus</span><span style="color:#839496;">.</span><span style="color:#268BD2;">SUCCESS</span><span style="color:#839496;">);</span></span></code></pre></div><h3 id="utility-types-实用工具类型" tabindex="-1">Utility Types 实用工具类型 <a class="header-anchor" href="#utility-types-实用工具类型" aria-label="Permalink to &quot;Utility Types 实用工具类型&quot;">​</a></h3><h4 id="_1-partial-t" tabindex="-1">1. <code>Partial&lt;T&gt;</code> <a class="header-anchor" href="#_1-partial-t" aria-label="Permalink to &quot;1. `Partial&lt;T&gt;`&quot;">​</a></h4><p>定义和用途： <code>Partial&lt;T&gt;</code>用于将一个类型 <code>T</code> 的所有属性变为可选的。这在处理对象类型时非常有用，比如在创建对象的部分属性更新函数时。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">interface</span><span style="color:#CB4B16;"> User</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  age</span><span style="color:#859900;">:</span><span style="color:#859900;"> number</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  email</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> partialUser</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Partial</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">User</span><span style="color:#839496;">&gt; </span><span style="color:#859900;">=</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name: </span><span style="color:#2AA198;">&#39;John&#39;</span></span>
<span class="line"><span style="color:#839496;">};</span></span></code></pre></div><p>在这个例子中，<code>partialUser</code> 可以只包含 User 接口中部分属性，因为 <code>Partial&lt;User&gt;</code>将 <code>User</code> 接口的所有属性都变成了可选属性。</p><h4 id="_2-required-t" tabindex="-1">2. <code>Required&lt;T&gt;</code> <a class="header-anchor" href="#_2-required-t" aria-label="Permalink to &quot;2. `Required&lt;T&gt;`&quot;">​</a></h4><p>定义和用途： 与 <code>Partial&lt;T&gt;</code>相反，<code>Required&lt;T&gt;</code>将类型 <code>T</code> 的所有可选属性变为必选属性。这有助于确保在某些场景下对象的完整性。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">interface</span><span style="color:#CB4B16;"> PartialProduct</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name</span><span style="color:#859900;">?:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  price</span><span style="color:#859900;">?:</span><span style="color:#859900;"> number</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> requiredProduct</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Required</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">PartialProduct</span><span style="color:#839496;">&gt; </span><span style="color:#859900;">=</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name: </span><span style="color:#2AA198;">&#39;Phone&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  price: </span><span style="color:#D33682;">599</span></span>
<span class="line"><span style="color:#839496;">};</span></span></code></pre></div><p>这里 <code>Required&lt;PartialProduct&gt;</code>强制要求 <code>requiredProduct</code> 必须包含 <code>name</code> 和 <code>price</code> 属性，不能有缺失。</p><h4 id="_3-readonly-t" tabindex="-1">3. <code>Readonly&lt;T&gt;</code> <a class="header-anchor" href="#_3-readonly-t" aria-label="Permalink to &quot;3. `Readonly&lt;T&gt;`&quot;">​</a></h4><p>定义和用途： <code>Readonly&lt;T&gt;</code>用于创建一个新的类型，其所有属性都是只读的。这在需要确保对象属性不被意外修改的场景下非常有用，比如配置对象或者常量对象。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">interface</span><span style="color:#CB4B16;"> Settings</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  theme</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  fontSize</span><span style="color:#859900;">:</span><span style="color:#859900;"> number</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> readonlySettings</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Readonly</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Settings</span><span style="color:#839496;">&gt; </span><span style="color:#859900;">=</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  theme: </span><span style="color:#2AA198;">&#39;dark&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  fontSize: </span><span style="color:#D33682;">14</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// readonlySettings.theme = &#39;light&#39;; // 这行代码会报错，因为属性是只读的</span></span></code></pre></div><h4 id="_4-pick-t-k" tabindex="-1">4. <code>Pick&lt;T, K&gt;</code> <a class="header-anchor" href="#_4-pick-t-k" aria-label="Permalink to &quot;4. `Pick&lt;T, K&gt;`&quot;">​</a></h4><p>定义和用途： <code>Pick&lt;T, K&gt;</code>从类型 T 中挑选出属性集 K 所指定的属性，创建一个新的类型。K 是一个联合类型，代表要选择的属性名。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">interface</span><span style="color:#CB4B16;"> Car</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  brand</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  model</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  year</span><span style="color:#859900;">:</span><span style="color:#859900;"> number</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  color</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> CarInfo</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> Pick</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Car</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;brand&#39;</span><span style="color:#859900;"> |</span><span style="color:#2AA198;"> &#39;model&#39;</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> myCarInfo</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> CarInfo</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  brand: </span><span style="color:#2AA198;">&#39;Toyota&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  model: </span><span style="color:#2AA198;">&#39;Corolla&#39;</span></span>
<span class="line"><span style="color:#839496;">};</span></span></code></pre></div><p>在这个例子中，CarInfo 类型只包含 Car 接口中的 brand 和 model 属性。</p><h4 id="_5-omit-t-k" tabindex="-1">5. <code>Omit&lt;T, K&gt;</code> <a class="header-anchor" href="#_5-omit-t-k" aria-label="Permalink to &quot;5. `Omit&lt;T, K&gt;`&quot;">​</a></h4><p>定义和用途： 与 <code>Pick&lt;T, K&gt;</code>相反，<code>Omit&lt;T, K&gt;</code>从类型 <code>T</code> 中排除属性集 <code>K</code> 所指定的属性，生成一个新的类型。这在想要去除某些不需要的属性时很有用。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">interface</span><span style="color:#CB4B16;"> Person</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  age</span><span style="color:#859900;">:</span><span style="color:#859900;"> number</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  address</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  phone</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> PersonWithoutAddress</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> Omit</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Person</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;address&#39;</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> person</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> PersonWithoutAddress</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name: </span><span style="color:#2AA198;">&#39;Alice&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  age: </span><span style="color:#D33682;">30</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  phone: </span><span style="color:#2AA198;">&#39;1234567890&#39;</span></span>
<span class="line"><span style="color:#839496;">};</span></span></code></pre></div><p>这里 <code>PersonWithoutAddress</code> 类型是从 <code>Person</code> 接口中排除了 <code>address</code> 属性后的新类型。</p><h4 id="_6-record-k-t" tabindex="-1">6. <code>Record&lt;K, T&gt;</code> <a class="header-anchor" href="#_6-record-k-t" aria-label="Permalink to &quot;6. `Record&lt;K, T&gt;`&quot;">​</a></h4><p>定义和用途： <code>Record&lt;K, T&gt;</code>用于创建一个新的类型，其属性键的类型为 <code>K</code>，属性值的类型为 <code>T</code>。<code>K</code> 通常是一个字符串字面量类型或者联合类型，<code>T</code> 可以是任何类型。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> Colors</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;red&#39;</span><span style="color:#859900;"> |</span><span style="color:#2AA198;"> &#39;green&#39;</span><span style="color:#859900;"> |</span><span style="color:#2AA198;"> &#39;blue&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> ColorMap</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> Record</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Colors</span><span style="color:#839496;">, </span><span style="color:#859900;">string</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> colorMap</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> ColorMap</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  red: </span><span style="color:#2AA198;">&#39;#FF0000&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  green: </span><span style="color:#2AA198;">&#39;#00FF00&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  blue: </span><span style="color:#2AA198;">&#39;#0000FF&#39;</span></span>
<span class="line"><span style="color:#839496;">};</span></span></code></pre></div><p>这个例子中，<code>ColorMap</code> 类型的对象以 <code>Colors</code> 联合类型中的字符串作为键，以 <code>string</code> 类型作为值。</p><h4 id="_7-exclude-t-u" tabindex="-1">7. <code>Exclude&lt;T, U&gt;</code> <a class="header-anchor" href="#_7-exclude-t-u" aria-label="Permalink to &quot;7. `Exclude&lt;T, U&gt;`&quot;">​</a></h4><p>定义和用途： <code>Exclude&lt;T, U&gt;</code>用于从类型 <code>T</code> 中排除可以赋值给类型 <code>U</code> 的元素，返回剩余的类型。它主要用于处理联合类型。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> Numbers</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 1</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 2</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 3</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 4</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 5</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> OddNumbers</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> Exclude</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Numbers</span><span style="color:#839496;">, </span><span style="color:#D33682;">2</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 4</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> oddNumber</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> OddNumbers</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">;</span></span></code></pre></div><p>在这里，<code>OddNumbers</code> 是从 <code>Numbers</code> 联合类型中排除了偶数 2 和 4 后剩下的奇数类型。</p><h4 id="_8-extract-t-u" tabindex="-1">8. <code>Extract&lt;T, U&gt;</code> <a class="header-anchor" href="#_8-extract-t-u" aria-label="Permalink to &quot;8. `Extract&lt;T, U&gt;`&quot;">​</a></h4><p>定义和用途： 与 <code>Exclude&lt;T, U&gt;</code>相反，<code>Extract&lt;T, U&gt;</code>从类型 <code>T</code> 中提取可以赋值给类型 <code>U</code> 的元素，生成一个新的类型。 示例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> AllNumbers</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 1</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 2</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 3</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 4</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 5</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> EvenNumbers</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> Extract</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">AllNumbers</span><span style="color:#839496;">, </span><span style="color:#D33682;">2</span><span style="color:#859900;"> |</span><span style="color:#D33682;"> 4</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> evenNumber</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> EvenNumbers</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 2</span><span style="color:#839496;">;</span></span></code></pre></div><p>此例中，<code>EvenNumbers</code> 是从 <code>AllNumbers</code> 联合类型中提取出偶数 2 和 4 后的类型。</p><h2 id="业务应用实践" tabindex="-1">业务应用实践 <a class="header-anchor" href="#业务应用实践" aria-label="Permalink to &quot;业务应用实践&quot;">​</a></h2><div class="h-500px"><div class="knowledge-map relative w-full h-full overflow-hidden" data-v-61b5a500><div id="elf8dc2a8eb04e465ea95a65c72461774f" class="w-full h-full relative" data-v-61b5a500></div></div></div><div class="monaco-editor-wrap"></div><p>以上是静态类型校验，那么如何过渡到动态类型校验？</p><h2 id="运行时数据校验" tabindex="-1">运行时数据校验 <a class="header-anchor" href="#运行时数据校验" aria-label="Permalink to &quot;运行时数据校验&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">解决什么问题</p><ul><li>后端服务互相调用，数据类型不确定</li><li>可能出现的属性空值</li><li>可能由类型导致的问题，比如 falsy 判断、字符串和数字相加</li></ul></div><h3 id="碰到的挑战" tabindex="-1">碰到的挑战 <a class="header-anchor" href="#碰到的挑战" aria-label="Permalink to &quot;碰到的挑战&quot;">​</a></h3><p><img src="/Jarrett-blog/assets/challenges.C9TSo1h8.png" alt="使用组件" loading="lazy"></p><p>经过调研，选用了 zod 库作为方案实现的核心库</p><p>该库较为成熟，社区活跃，原生支持 TS，且能够完全对标 TS 语法，一份 schema 同时生成校验器和 TS 静态类型，使用简单、直观、轻便</p><div class="h-500px"><div class="knowledge-map relative w-full h-full overflow-hidden" data-v-61b5a500><div id="elcce54e1448ed4c77a171b08eefed93a7" class="w-full h-full relative" data-v-61b5a500></div></div></div><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-vfs4S" id="tab-ZhjMJbu" checked><label data-title="/base-service/validator.ts" for="tab-ZhjMJbu">/base-service/validator.ts</label><input type="radio" name="group-vfs4S" id="tab-hkFyF0L"><label data-title="/detail-service/api.ts" for="tab-hkFyF0L">/detail-service/api.ts</label><input type="radio" name="group-vfs4S" id="tab-Te6_Cg6"><label data-title="/detail-service/validator.ts" for="tab-Te6_Cg6">/detail-service/validator.ts</label><input type="radio" name="group-vfs4S" id="tab-DiHbMU0"><label data-title="/detail-service/types.ts" for="tab-DiHbMU0">/detail-service/types.ts</label></div><div class="blocks"><div class="language-ts active"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeString</span><span style="color:#859900;"> =</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#268BD2;">  string</span><span style="color:#839496;">().</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    try</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">      const</span><span style="color:#268BD2;"> data</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> JSON</span><span style="color:#839496;">.</span><span style="color:#268BD2;">stringify</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">input</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#268BD2;"> data</span><span style="color:#859900;"> ||</span><span style="color:#2AA198;"> &#39;&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    } </span><span style="color:#859900;">catch</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">e</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#2AA198;"> &#39;&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// coerce number 解析如&#39;测试文本&#39;这样的文本字符串，无法类型强转，会parse error</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeNumber</span><span style="color:#859900;"> =</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#268BD2;">  number</span><span style="color:#839496;">().</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#839496;"> { </span><span style="color:#268BD2;">success</span><span style="color:#839496;">, </span><span style="color:#268BD2;">data</span><span style="color:#839496;"> } </span><span style="color:#859900;">=</span><span style="color:#268BD2;"> coerce</span><span style="color:#839496;">.</span><span style="color:#268BD2;">number</span><span style="color:#839496;">().</span><span style="color:#268BD2;">safeParse</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">input</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">success</span><span style="color:#839496;">) </span><span style="color:#859900;">return</span><span style="color:#268BD2;"> data</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">    else</span><span style="color:#859900;"> return</span><span style="color:#D33682;"> 0</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeBoolean</span><span style="color:#859900;"> =</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#268BD2;">  boolean</span><span style="color:#839496;">().</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#839496;"> { </span><span style="color:#268BD2;">success</span><span style="color:#839496;">, </span><span style="color:#268BD2;">data</span><span style="color:#839496;"> } </span><span style="color:#859900;">=</span><span style="color:#268BD2;"> coerce</span><span style="color:#839496;">.</span><span style="color:#268BD2;">boolean</span><span style="color:#839496;">().</span><span style="color:#268BD2;">safeParse</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">input</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">success</span><span style="color:#839496;">) </span><span style="color:#859900;">return</span><span style="color:#268BD2;"> data</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">    else</span><span style="color:#859900;"> return</span><span style="color:#B58900;"> false</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeArray</span><span style="color:#859900;"> =</span><span style="color:#839496;"> &lt;</span><span style="color:#CB4B16;">T</span><span style="color:#93A1A1;font-weight:bold;"> extends</span><span style="color:#CB4B16;"> ZodTypeAny</span><span style="color:#839496;">&gt;(</span></span>
<span class="line"><span style="color:#839496;">  schema</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> T</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  params</span><span style="color:#859900;">?:</span><span style="color:#CB4B16;"> RawCreateParams</span><span style="color:#859900;"> &amp;</span><span style="color:#839496;"> { </span><span style="color:#268BD2;">filter</span><span style="color:#859900;">?:</span><span style="color:#839496;"> (val</span><span style="color:#859900;">:</span><span style="color:#859900;"> unknown</span><span style="color:#839496;">[]) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#859900;"> unknown</span><span style="color:#839496;">[] }</span></span>
<span class="line"><span style="color:#839496;">) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> array</span><span style="color:#839496;">(</span><span style="color:#268BD2;">schema</span><span style="color:#839496;">).</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">Array</span><span style="color:#839496;">.</span><span style="color:#268BD2;">isArray</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">input</span><span style="color:#839496;">)) {</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#268BD2;"> params</span><span style="color:#839496;">?.</span><span style="color:#268BD2;">filter</span><span style="color:#859900;"> ?</span><span style="color:#268BD2;"> params</span><span style="color:#839496;">.</span><span style="color:#268BD2;">filter</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">input</span><span style="color:#839496;">) </span><span style="color:#859900;">:</span><span style="color:#268BD2;"> ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">input</span><span style="color:#839496;">; </span><span style="color:#586E75;font-style:italic;">// 避免混合类型数组报错 [{name:&#39;test&#39;},null]</span></span>
<span class="line"><span style="color:#839496;">    } </span><span style="color:#859900;">else</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> ObjectParams</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> ZodObject</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">ZodRawShape</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeObject</span><span style="color:#859900;"> =</span><span style="color:#839496;"> &lt;</span></span>
<span class="line"><span style="color:#CB4B16;">  T</span><span style="color:#93A1A1;font-weight:bold;"> extends</span></span>
<span class="line"><span style="color:#859900;">    |</span><span style="color:#CB4B16;"> ObjectParams</span></span>
<span class="line"><span style="color:#859900;">    |</span><span style="color:#CB4B16;"> ZodDefault</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">ObjectParams</span><span style="color:#839496;">&gt;</span></span>
<span class="line"><span style="color:#859900;">    |</span><span style="color:#CB4B16;"> ZodNullable</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">ObjectParams</span><span style="color:#839496;">&gt;</span></span>
<span class="line"><span style="color:#859900;">    |</span><span style="color:#CB4B16;"> ZodDefault</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">ZodNullable</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">ObjectParams</span><span style="color:#839496;">&gt;&gt;</span></span>
<span class="line"><span style="color:#839496;">&gt;(</span></span>
<span class="line"><span style="color:#839496;">  schema</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> T</span></span>
<span class="line"><span style="color:#839496;">) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> schema</span><span style="color:#839496;">.</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">((ctx</span><span style="color:#859900;">:</span><span style="color:#839496;"> { error</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> ZodError</span><span style="color:#839496;"> }) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#839496;"> {};</span></span>
<span class="line"><span style="color:#839496;">  }) </span><span style="color:#859900;">as</span><span style="color:#CB4B16;"> ZodCatch</span><span style="color:#839496;">&lt;</span><span style="color:#859900;">typeof</span><span style="color:#268BD2;"> schema</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeLiteral</span><span style="color:#859900;"> =</span><span style="color:#839496;"> &lt;</span><span style="color:#CB4B16;">T</span><span style="color:#93A1A1;font-weight:bold;"> extends</span><span style="color:#CB4B16;"> Primitive</span><span style="color:#839496;">&gt;(schema</span><span style="color:#859900;">?:</span><span style="color:#CB4B16;"> T</span><span style="color:#839496;">) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#268BD2;">  literal</span><span style="color:#839496;">(</span><span style="color:#268BD2;">schema</span><span style="color:#839496;">).</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#268BD2;"> schema</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeNativeEnum</span><span style="color:#859900;"> =</span><span style="color:#839496;"> &lt;</span><span style="color:#CB4B16;">T</span><span style="color:#93A1A1;font-weight:bold;"> extends</span><span style="color:#CB4B16;"> EnumLike</span><span style="color:#839496;">&gt;(schema</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> T</span><span style="color:#839496;">) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#268BD2;">  nativeEnum</span><span style="color:#839496;">(</span><span style="color:#268BD2;">schema</span><span style="color:#839496;">).</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#268BD2;"> Object</span><span style="color:#839496;">.</span><span style="color:#268BD2;">values</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">input</span><span style="color:#839496;">)[</span><span style="color:#D33682;">0</span><span style="color:#839496;">];</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeNull</span><span style="color:#859900;"> =</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#268BD2;">  zodNull</span><span style="color:#839496;">().</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#B58900;"> null</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> safeUnion</span><span style="color:#859900;"> =</span><span style="color:#839496;"> &lt;</span><span style="color:#CB4B16;">T</span><span style="color:#93A1A1;font-weight:bold;"> extends</span><span style="color:#CB4B16;"> Readonly</span><span style="color:#839496;">&lt;[</span><span style="color:#CB4B16;">ZodTypeAny</span><span style="color:#839496;">, </span><span style="color:#CB4B16;">ZodTypeAny</span><span style="color:#839496;">, </span><span style="color:#859900;">...</span><span style="color:#CB4B16;">ZodTypeAny</span><span style="color:#839496;">[]]&gt;&gt;(schema</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> T</span><span style="color:#839496;">) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> union</span><span style="color:#839496;">(</span><span style="color:#268BD2;">schema</span><span style="color:#839496;">).</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(ctx </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    log2wx</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ctx</span><span style="color:#839496;">.</span><span style="color:#268BD2;">error</span><span style="color:#839496;">.</span><span style="color:#268BD2;">message</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#2AA198;"> &#39;&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> createBaseResponseValidator</span><span style="color:#859900;"> =</span><span style="color:#839496;"> &lt;</span><span style="color:#CB4B16;">Data</span><span style="color:#93A1A1;font-weight:bold;"> extends</span><span style="color:#CB4B16;"> ZodType</span><span style="color:#839496;">, </span><span style="color:#CB4B16;">Meta</span><span style="color:#93A1A1;font-weight:bold;"> extends</span><span style="color:#CB4B16;"> ZodType</span><span style="color:#839496;">&gt;(</span></span>
<span class="line"><span style="color:#839496;">  data</span><span style="color:#859900;">?:</span><span style="color:#CB4B16;"> Data</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  meta</span><span style="color:#859900;">?:</span><span style="color:#CB4B16;"> Meta</span></span>
<span class="line"><span style="color:#839496;">) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> safeObject</span><span style="color:#839496;">(</span></span>
<span class="line"><span style="color:#268BD2;">    object</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">      code: </span><span style="color:#268BD2;">number</span><span style="color:#839496;">(),</span></span>
<span class="line"><span style="color:#839496;">      msg: </span><span style="color:#268BD2;">string</span><span style="color:#839496;">(),</span></span>
<span class="line"><span style="color:#839496;">      data: </span><span style="color:#268BD2;">preprocess</span><span style="color:#839496;">(val </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> val</span><span style="color:#859900;"> ||</span><span style="color:#B58900;"> null</span><span style="color:#839496;">, </span><span style="color:#268BD2;">data</span><span style="color:#859900;"> ||</span><span style="color:#268BD2;"> safeNull</span><span style="color:#839496;">()),</span></span>
<span class="line"><span style="color:#839496;">      meta: </span><span style="color:#268BD2;">preprocess</span><span style="color:#839496;">(val </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> val</span><span style="color:#859900;"> ||</span><span style="color:#B58900;"> null</span><span style="color:#839496;">, </span><span style="color:#268BD2;">meta</span><span style="color:#859900;"> ||</span><span style="color:#268BD2;"> safeNull</span><span style="color:#839496;">())</span></span>
<span class="line"><span style="color:#839496;">    }).</span><span style="color:#268BD2;">partial</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">      meta: </span><span style="color:#B58900;">true</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">      msg: </span><span style="color:#B58900;">true</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">      data: </span><span style="color:#B58900;">true</span></span>
<span class="line"><span style="color:#839496;">    })</span></span>
<span class="line"><span style="color:#839496;">  );</span></span>
<span class="line"><span style="color:#839496;">};</span></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#859900;">import</span><span style="color:#839496;"> { </span><span style="color:#268BD2;">createDetailValitor</span><span style="color:#839496;"> } </span><span style="color:#859900;">from</span><span style="color:#2AA198;"> &#39;./validator&#39;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">class</span><span style="color:#CB4B16;"> DetailService</span><span style="color:#93A1A1;font-weight:bold;"> extends</span><span style="color:#6C71C4;"> BaseServices</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  constructor</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">    super</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">  getDetail</span><span style="color:#839496;">(query</span><span style="color:#859900;">:</span><span style="color:#839496;"> { orderId</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;"> }) {</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#268BD2;"> this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">sendRequest</span><span style="color:#839496;">(</span></span>
<span class="line"><span style="color:#839496;">      {</span></span>
<span class="line"><span style="color:#839496;">        url:</span><span style="color:#2AA198;">&#39;/api/detail&#39;</span></span>
<span class="line"><span style="color:#268BD2;">        method</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&#39;POST&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#268BD2;">        query</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">        validator: </span><span style="color:#268BD2;">createDetailValitor</span></span>
<span class="line"><span style="color:#839496;">      },</span></span>
<span class="line"><span style="color:#839496;">    );</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">export</span><span style="color:#93A1A1;font-weight:bold;"> const</span><span style="color:#268BD2;"> detailService</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> DetailServices</span><span style="color:#839496;">();</span></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">enum Status {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  SUCCESS,</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  FAIL</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">}</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">export interface ListItem {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  name: string;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  age: number;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  status: Status;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  children?: ListItem[];</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">}</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">export interface DetailResponse extends BaseResponse {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  data: {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    id: string;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    name: string;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    tags: string[];</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    list: ListItem[];</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  };</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">}</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> listItem</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> safeObjectWrap</span><span style="color:#839496;">(</span></span>
<span class="line"><span style="color:#268BD2;">  object</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">    status: </span><span style="color:#268BD2;">safeNativeEnum</span><span style="color:#839496;">(</span><span style="color:#268BD2;">Status</span><span style="color:#839496;">).</span><span style="color:#268BD2;">default</span><span style="color:#839496;">(</span><span style="color:#268BD2;">Status</span><span style="color:#839496;">.</span><span style="color:#268BD2;">FAIL</span><span style="color:#839496;">),</span></span>
<span class="line"><span style="color:#839496;">    name: </span><span style="color:#268BD2;">safeString</span><span style="color:#839496;">().</span><span style="color:#268BD2;">default</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;&#39;</span><span style="color:#839496;">),</span></span>
<span class="line"><span style="color:#839496;">    age: </span><span style="color:#268BD2;">safeNumber</span><span style="color:#839496;">().</span><span style="color:#268BD2;">default</span><span style="color:#839496;">(</span><span style="color:#D33682;">20</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">  }).</span><span style="color:#268BD2;">passthrough</span><span style="color:#839496;">()</span></span>
<span class="line"><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> createDetailValidator</span><span style="color:#859900;"> =</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  type</span><span style="color:#CB4B16;"> Input</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> input</span><span style="color:#839496;">&lt;</span><span style="color:#859900;">typeof</span><span style="color:#268BD2;"> listItem</span><span style="color:#839496;">&gt; </span><span style="color:#859900;">&amp;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    children</span><span style="color:#859900;">?:</span><span style="color:#CB4B16;"> Input</span><span style="color:#839496;">[];</span></span>
<span class="line"><span style="color:#839496;">  };</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  type</span><span style="color:#CB4B16;"> Output</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> output</span><span style="color:#839496;">&lt;</span><span style="color:#859900;">typeof</span><span style="color:#268BD2;"> listItem</span><span style="color:#839496;">&gt; </span><span style="color:#859900;">&amp;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    children</span><span style="color:#859900;">?:</span><span style="color:#CB4B16;"> Output</span><span style="color:#839496;">[];</span></span>
<span class="line"><span style="color:#839496;">  };</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> schema</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> ZodType</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Output</span><span style="color:#839496;">, </span><span style="color:#CB4B16;">ZodTypeDef</span><span style="color:#839496;">, </span><span style="color:#CB4B16;">Input</span><span style="color:#839496;">&gt; </span><span style="color:#859900;">=</span><span style="color:#268BD2;"> listItem</span></span>
<span class="line"><span style="color:#839496;">    .</span><span style="color:#268BD2;">extend</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">      children: </span><span style="color:#268BD2;">lazy</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> schema</span><span style="color:#839496;">.</span><span style="color:#268BD2;">array</span><span style="color:#839496;">())</span></span>
<span class="line"><span style="color:#839496;">    })</span></span>
<span class="line"><span style="color:#839496;">    .</span><span style="color:#268BD2;">partial</span><span style="color:#839496;">({ children: </span><span style="color:#B58900;">true</span><span style="color:#839496;"> });</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> createBaseResponseValidator</span><span style="color:#839496;">(</span></span>
<span class="line"><span style="color:#268BD2;">    safeObjectWrap</span><span style="color:#839496;">(</span></span>
<span class="line"><span style="color:#268BD2;">      object</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">        id: </span><span style="color:#268BD2;">safeString</span><span style="color:#839496;">(),</span></span>
<span class="line"><span style="color:#839496;">        name: </span><span style="color:#268BD2;">safeString</span><span style="color:#839496;">(),</span></span>
<span class="line"><span style="color:#839496;">        tags: </span><span style="color:#268BD2;">safeArray</span><span style="color:#839496;">(</span><span style="color:#268BD2;">safeString</span><span style="color:#839496;">()).</span><span style="color:#268BD2;">default</span><span style="color:#839496;">([]),</span></span>
<span class="line"><span style="color:#839496;">        list: </span><span style="color:#268BD2;">safeArray</span><span style="color:#839496;">(</span><span style="color:#268BD2;">schema</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">      }).</span><span style="color:#268BD2;">partial</span><span style="color:#839496;">({ list: </span><span style="color:#B58900;">true</span><span style="color:#839496;"> })</span></span>
<span class="line"><span style="color:#839496;">    )</span></span>
<span class="line"><span style="color:#839496;">  );</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">export</span><span style="color:#93A1A1;font-weight:bold;"> const</span><span style="color:#268BD2;"> detailSchema</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> createDetailValidator</span><span style="color:#839496;">();</span></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#859900;">import</span><span style="color:#839496;"> { </span><span style="color:#268BD2;">detailSchema</span><span style="color:#839496;"> } </span><span style="color:#859900;">from</span><span style="color:#2AA198;"> &#39;./validator&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">type</span><span style="color:#CB4B16;"> DetailSchema</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> z</span><span style="color:#839496;">.</span><span style="color:#CB4B16;">infer</span><span style="color:#839496;">&lt;</span><span style="color:#859900;">typeof</span><span style="color:#268BD2;"> detailSchema</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">export</span><span style="color:#93A1A1;font-weight:bold;"> type</span><span style="color:#CB4B16;"> Data</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> DetailSchema</span><span style="color:#839496;">[</span><span style="color:#2AA198;">&#39;data&#39;</span><span style="color:#839496;">];</span></span>
<span class="line"><span style="color:#859900;">export</span><span style="color:#93A1A1;font-weight:bold;"> type</span><span style="color:#CB4B16;"> List</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> DetailSchema</span><span style="color:#839496;">[</span><span style="color:#2AA198;">&#39;data&#39;</span><span style="color:#839496;">][</span><span style="color:#2AA198;">&#39;list&#39;</span><span style="color:#839496;">];</span></span>
<span class="line"><span style="color:#859900;">export</span><span style="color:#93A1A1;font-weight:bold;"> type</span><span style="color:#CB4B16;"> DataWithoutId</span><span style="color:#859900;"> =</span><span style="color:#CB4B16;"> Omit</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Data</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;id&#39;</span><span style="color:#839496;">&gt;;</span></span></code></pre></div></div></div></div></div></main><footer class="VPDocFooter" data-v-3f19d6b0 data-v-9ba61ddb><!--[--><!--]--><div class="edit-info" data-v-9ba61ddb><div class="edit-link" data-v-9ba61ddb><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/plan/front-end-infrastructure/index.md" target="_blank" rel="noreferrer" data-v-9ba61ddb><!--[--><span class="vpi-square-pen edit-link-icon" data-v-9ba61ddb></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-9ba61ddb><p class="VPLastUpdated" data-v-9ba61ddb data-v-dce6c4e2>Last Updated: <time datetime="2025-01-18T05:48:33.000Z" data-v-dce6c4e2></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-9ba61ddb><span class="visually-hidden" id="doc-footer-aria-label" data-v-9ba61ddb>Pager</span><div class="pager" data-v-9ba61ddb><a class="VPLink link pager-link prev" href="/Jarrett-blog/plan/how-to-make-ts-useful/" data-v-9ba61ddb><!--[--><span class="desc" data-v-9ba61ddb>Previous page</span><span class="title" data-v-9ba61ddb>10分钟速通TS</span><!--]--></a></div><div class="pager" data-v-9ba61ddb><a class="VPLink link pager-link next" href="/Jarrett-blog/web3/index.html" data-v-9ba61ddb><!--[--><span class="desc" data-v-9ba61ddb>Next page</span><span class="title" data-v-9ba61ddb>新手入门</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-ffb09705 data-v-3496d641><div class="container" data-v-3496d641><p class="message" data-v-3496d641>Released under the MIT License.</p><p class="copyright" data-v-3496d641>MIT Licensed | Copyright © 2021-present Jarrett Wang</p></div></footer><!--[--><div class="n-back-top-placeholder" style="display: none" aria-hidden="true" data-v-e044f95b><!----></div><!--]--></div></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"computer-basic_arithmetic_index.md\":\"CzT_rlIp\",\"computer-basic_design-pattern_index.md\":\"rGAEb7kM\",\"computer-basic_internet_index.md\":\"DPUxJmKp\",\"front-end_browser_index.md\":\"Cs27taAQ\",\"front-end_canvas_index.md\":\"CHFjyw0_\",\"front-end_css_index.md\":\"Bcp7l5W1\",\"front-end_git_index.md\":\"CKJu7ueo\",\"front-end_html_index.md\":\"D8ZslFa7\",\"front-end_js_faq.md\":\"D6-DVbE8\",\"front-end_js_index.md\":\"CEXmCnp2\",\"front-end_micro-front_index.md\":\"CvufYgRx\",\"front-end_miniprogram_index.md\":\"D8UiokhN\",\"front-end_nodejs_index.md\":\"C0JariJ-\",\"front-end_ts_faq.md\":\"CcOrCXrk\",\"front-end_ts_index.md\":\"BBKFg3hc\",\"front-end_vue3_diff.md\":\"CCFSPgFi\",\"front-end_vue3_index.md\":\"D9ykJFfH\",\"front-end_vue_index.md\":\"C8etICUo\",\"index.md\":\"bnZHaE_A\",\"knowledge-map.md\":\"BDaTGmYZ\",\"plan_api-test_index.md\":\"CWo9gAea\",\"plan_front-end-infrastructure_index.md\":\"BsPm8t4N\",\"plan_how-to-make-ts-useful_index.md\":\"Dn2DcqHP\",\"plan_micro-fe-communication_index.md\":\"CNpvxoc4\",\"plan_navigation_index.md\":\"w0EYq4v_\",\"practice_leetcode.md\":\"WkMp1Edn\",\"practice_promise.md\":\"BzvcvJpP\",\"resume_index.md\":\"Ds_WKrNd\",\"tools_slides.md\":\"Bzbfs_Cf\",\"web3_index.md\":\"DrWiqKoY\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"🏠 JarrettBlog\",\"titleTemplate\":\"Vite & Vue powered static site generator\",\"description\":\"前端学习笔记\",\"base\":\"/Jarrett-blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Jarrett817/Jarrett-blog\"},{\"icon\":{\"svg\":\"<svg t=\\\"1658975064450\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"14624\\\" width=\\\"500\\\" height=\\\"500\\\"><path d=\\\"M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14625\\\"></path><path d=\\\"M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14626\\\"></path></svg>\"},\"link\":\"https://juejin.cn/user/3940246036687774\"}],\"editLink\":{\"pattern\":\"https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"lastUpdatedText\":\"Last Updated\",\"nav\":[{\"text\":\"📘 前端基础\",\"link\":\"/front-end/html/\",\"activeMatch\":\"^/front-end/\"},{\"text\":\"📚 计算机基础\",\"link\":\"/computer-basic/design-pattern/\",\"activeMatch\":\"^/computer-basic/\"},{\"text\":\"🏹 方案\",\"link\":\"/plan/micro-fe-communication/\",\"activeMatch\":\"^/plan/\"},{\"text\":\"✍ 练习题\",\"link\":\"/practice/leetcode\",\"activeMatch\":\"^/pratice/\"},{\"text\":\"📘 WEB3\",\"link\":\"/web3/\",\"activeMatch\":\"^/web3/\"},{\"text\":\"🔖 简历\",\"link\":\"/resume/index.html\",\"activeMatch\":\"^/resume/\"}],\"sidebar\":[{\"text\":\"前端基础\",\"items\":[{\"text\":\"HTML\",\"link\":\"/front-end/html/\"},{\"text\":\"CSS\",\"link\":\"/front-end/css/\"},{\"text\":\"JS\",\"link\":\"/front-end/js/\"},{\"text\":\"TS\",\"link\":\"/front-end/ts/\"},{\"text\":\"浏览器\",\"link\":\"/front-end/browser/\"},{\"text\":\"vue\",\"link\":\"/front-end/vue/\"},{\"text\":\"vue3\",\"link\":\"/front-end/vue3/\"},{\"text\":\"nodejs\",\"link\":\"/front-end/nodejs/\"},{\"text\":\"git\",\"link\":\"/front-end/git/\"},{\"text\":\"canvas\",\"link\":\"/front-end/canvas/\"},{\"text\":\"微前端\",\"link\":\"/front-end/micro-front/\"},{\"text\":\"小程序\",\"link\":\"/front-end/miniprogram/\"}]},{\"text\":\"计算机基础\",\"items\":[{\"text\":\"设计模式\",\"link\":\"/computer-basic/design-pattern/\"},{\"text\":\"计算机网络\",\"link\":\"/computer-basic/internet/\"},{\"text\":\"数据结构与算法\",\"link\":\"/computer-basic/arithmetic/\"}]},{\"text\":\"方案\",\"items\":[{\"text\":\"多级跳转\",\"link\":\"/plan/navigation/\"},{\"text\":\"微前端下的主子通信\",\"link\":\"/plan/micro-fe-communication/\"},{\"text\":\"接口测试平台\",\"link\":\"/plan/api-test/\"},{\"text\":\"10分钟速通TS\",\"link\":\"/plan/how-to-make-ts-useful/\"},{\"text\":\"前端基建（一）\",\"link\":\"/plan/front-end-infrastructure/\"}]},{\"text\":\"WEB3\",\"items\":[{\"text\":\"新手入门\",\"link\":\"/web3/index\"}]},{\"text\":\"练习题\",\"items\":[{\"text\":\"算法题\",\"link\":\"/practice/leetcode\"},{\"text\":\"Promise\",\"link\":\"/practice/promise\"}]}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"MIT Licensed | Copyright © 2021-present Jarrett Wang\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>