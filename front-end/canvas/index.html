<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>canvas | 🏠 JarrettBlog</title>
    <meta name="description" content="前端学习笔记">
    <link rel="stylesheet" href="/Jarrett-blog/assets/style.f2b3dc79.css">
    <link rel="modulepreload" href="/Jarrett-blog/assets/Home.c5e88031.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/reveal.esm.7135e7ce.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/highlight.esm.c7d93732.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/markdown.esm.479aed26.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/app.dff7797b.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/front-end_canvas_index.md.315c87cc.lean.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/app.dff7797b.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="twitter:title" content="canvas | 🏠 JarrettBlog">
    <meta property="og:title" content="canvas | 🏠 JarrettBlog">
  </head>
  <body>
    <div id="app"><!--[--><!----><!----><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/Jarrett-blog/" aria-label="🏠 JarrettBlog, back to home" data-v-675d8756 data-v-4a583abe><!----> 🏠 JarrettBlog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/Jarrett-blog/front-end/html/" data-v-b8818f8c>✏️ 前端学习笔记 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-b8818f8c>⛰️ 计算机基础 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/tools/slides" data-v-b8818f8c>🔧 工具包 <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/Jarrett817/Jarrett-blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/Jarrett-blog/front-end/html/" data-v-b8818f8c>✏️ 前端学习笔记 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-b8818f8c>⛰️ 计算机基础 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/tools/slides" data-v-b8818f8c>🔧 工具包 <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/Jarrett817/Jarrett-blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/html/">HTML</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/css/">CSS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/js/">JS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/ts/">TS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/browser/">浏览器</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/vue/">vue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/nodejs/">nodejs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/git/">git</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/Jarrett-blog/front-end/canvas/">canvas</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#是什么？">是什么？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#什么用处？">什么用处？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#怎么用？">怎么用？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#基本用法">基本用法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#绘制形状">绘制形状</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#绘制命令">绘制命令</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#添加样式和颜色">添加样式和颜色</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#绘制文本">绘制文本</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#操作图片">操作图片</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#变形">变形</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#合成与裁剪">合成与裁剪</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#基本动画">基本动画</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#像素操作">像素操作</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="canvas"><a class="header-anchor" href="#canvas" aria-hidden="true">#</a> canvas</h1><h2 id="是什么？"><a class="header-anchor" href="#是什么？" aria-hidden="true">#</a> 是什么？</h2><p>canvas 是一个可以使用 js 脚本绘制图形的 HTML 元素</p><h2 id="什么用处？"><a class="header-anchor" href="#什么用处？" aria-hidden="true">#</a> 什么用处？</h2><p>可绘制图标、图形、制作图片</p><h2 id="怎么用？"><a class="header-anchor" href="#怎么用？" aria-hidden="true">#</a> 怎么用？</h2><h3 id="基本用法"><a class="header-anchor" href="#基本用法" aria-hidden="true">#</a> 基本用法</h3><ol><li>准备一个<code>&lt;canvas id=&quot;xxx&quot;&gt;&lt;/canvas&gt;</code>标签</li><li>获取 dom 对象，<code>let canvas=document.getElementById(&#39;xxx&#39;)</code></li><li>获取 canvas 的渲染上下文，<code>let ctx=canvas.getContext(&#39;2d&#39;)</code></li></ol><blockquote><p>canvas 标签没有 src 和 alt，只有 width 和 height 属性 可以插入后备内容，支持 canvas 的显示 canvas，不支持的浏览器忽略 canvas，显示插入的后备内容，因此必须闭合</p></blockquote><h3 id="绘制形状"><a class="header-anchor" href="#绘制形状" aria-hidden="true">#</a> 绘制形状</h3><ol><li>栅格 canvas 元素默认具有网格，一个单元格相当于一个 canvas 像素</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2165937/1608701881543-31456ccf-d71f-49a4-9bc6-6c6738828405.png#align=left&amp;display=inline&amp;height=220&amp;margin=%5Bobject%20Object%5D&amp;originHeight=220&amp;originWidth=220&amp;size=0&amp;status=done&amp;style=none&amp;width=220" alt=""></p><ol start="2"><li>矩形 canvas 只支持两种形式的图形绘制：矩形和路径（即线段） 绘制矩形的三种方法：</li></ol><ul><li><code>fillRect(x, y, width, height)</code> 绘制一个填充的矩形</li><li><code>strokeRect(x, y, width, height)</code> 绘制一个矩形的边框</li><li><code>clearRect(x, y, width, height)</code> 清除指定矩形区域，让清除部分完全透明。 3.路径（线段）</li><li><code>beginPath()</code> 新建一条路径，生成之后，图形绘制命令被指向到路径上生成路径。</li><li><code>closePath()</code> 绘制完后调用，闭合路径之后图形绘制命令又重新指向到上下文中。</li><li><code>stroke()</code> 通过线条来绘制图形轮廓。</li><li><code>fill()</code> 通过填充路径的内容区域生成实心的图形。 调用了 fill 不需要再调用 closePath，会自动闭合</li></ul><h3 id="绘制命令"><a class="header-anchor" href="#绘制命令" aria-hidden="true">#</a> 绘制命令</h3><ol><li><code>moveTo(x,y)</code> 移动笔触,放置相对于左上角起始点的点位</li><li><code>lineTo(x,y)</code> 绘制一条从当前位置到指定坐标点的直线</li><li><code>arc(x, y, radius, startAngle, endAngle, anticlockwise)</code> 画一个以（x,y）为圆心的以 radius 为半径的圆弧（圆），从 startAngle 开始到 endAngle 结束，按照 anticlockwise 给定的方向（默认为顺时针）来生成。</li></ol><blockquote><p>还可以用<code>arcTo(x1, y1, x2, y2, radius)</code>，给定点和半径画一个圆弧，再以直线连接两个控制点</p></blockquote><ol start="4"><li>二次贝塞尔曲线及三次贝塞尔曲线</li></ol><ul><li><p><code>quadraticCurveTo(cp1x, cp1y, x, y)</code> 绘制二次贝塞尔曲线，cp1x,cp1y 为一个控制点，x,y 为结束点。</p></li><li><p><code>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code> 绘制三次贝塞尔曲线，cp1x,cp1y 为控制点一，cp2x,cp2y 为控制点二，x,y 为结束点。</p><p>5.Path2D 一个对象，用来缓存或记录绘画命令</p></li></ul><div class="language-javascript"><pre><code><span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;2d&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Path2D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rectangle<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Path2D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
circle<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
circle<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="6"><li>SVG paths 新的 Path2D API，使用 SVG path data 来初始化 canvas 路径 <code>var p = new Path2D(&quot;M10 10 h 80 v 80 h -80 Z&quot;);</code> 表示先移动到点 (M10 10) 然后再水平移动 80 个单位(h 80)，然后下移 80 个单位 (v 80)，接着左移 80 个单位 (h -80)，再回到起点处 (z)</li></ol><h3 id="添加样式和颜色"><a class="header-anchor" href="#添加样式和颜色" aria-hidden="true">#</a> 添加样式和颜色</h3><h4 id="设置颜色"><a class="header-anchor" href="#设置颜色" aria-hidden="true">#</a> 设置颜色</h4><ol><li>fillStyle=color 设置图形填充颜色</li><li>strokeStyle=color 设置图形轮廓颜色</li><li>Transparency</li></ol><ul><li>全局透明度：globalAlpha = transparencyValue</li><li>也可以直接用 rgba 设置透明度</li></ul><h4 id="设置线型"><a class="header-anchor" href="#设置线型" aria-hidden="true">#</a> 设置线型</h4><ol><li>lineWidth = value 设置线条宽度。</li><li>lineCap = type 设置线条末端样式。</li><li>lineJoin = type 设定线条与线条间接合处的样式。</li><li>miterLimit = value 限制当两条线相交时交接处最大长度；所谓交接处长度（斜接长度）是指线条交接处内角顶点到外角顶点的长度。</li><li>getLineDash() 返回一个包含当前虚线样式，长度为非负偶数的数组。</li><li>setLineDash(segments) 设置当前虚线样式。</li><li>lineDashOffset = value 设置虚线样式的起始偏移量。</li></ol><h4 id="设置渐变"><a class="header-anchor" href="#设置渐变" aria-hidden="true">#</a> 设置渐变</h4><ol><li><code>createLinearGradient(x1, y1, x2, y2)</code><code>createLinearGradient</code> 方法接受 4 个参数，表示渐变的起点 <code>(x1,y1)</code> 与终点 <code>(x2,y2)</code>。</li></ol><p><code>var lineargradient = ctx.createLinearGradient(0,0,150,150);</code></p><ol start="2"><li><code>createRadialGradient(x1, y1, r1, x2, y2, r2)</code></li></ol><p><code>createRadialGradient</code> 方法接受 6 个参数，前三个定义一个以 <code>(x1,y1)</code> 为原点，半径为 r1 的圆，后三个参数则定义另一个以 <code>(x2,y2)</code>为原点，半径为 r2 的圆。</p><p><code>var radialgradient = ctx.createRadialGradient(75,75,0,75,75,100);</code></p><blockquote><p>创建出 <code>canvasGradient</code> 对象后，可以用 <code>gradient.addColorStop(position, color)</code> 上色。</p></blockquote><blockquote><p><code>addColorStop</code> 方法接受 2 个参数，<code>position</code> 参数必须是一个 0.0 与 1.0 之间的数值，表示渐变中颜色所在的相对位置。例如，0.5 表示颜色会出现在正中间。<code>color</code> 参数必须是一个有效的 CSS 颜色值（如 #FFF， rgba(0,0,0,1)，等等）。</p></blockquote><h4 id="设置图案样式-patterns"><a class="header-anchor" href="#设置图案样式-patterns" aria-hidden="true">#</a> 设置图案样式 Patterns</h4><ul><li>createPattern(image, type) 该方法接受两个参数。Image 可以是一个 Image 对象的引用，或者另一个 canvas 对象。Type 必须是下面的字符串值之一：repeat，repeat-x，repeat-y 和 no-repeat。</li></ul><div class="language-javascript"><pre><code>  <span class="token keyword">var</span> ctx <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;canvas&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;2d&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 创建新 image 对象，用作图案</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&#39;https://mdn.mozillademos.org/files/222/Canvas_createpattern.png&#39;</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 创建图案</span>
    <span class="token keyword">var</span> ptrn <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createPattern</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token string">&#39;repeat&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> ptrn<span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="设置阴影-shadows"><a class="header-anchor" href="#设置阴影-shadows" aria-hidden="true">#</a> 设置阴影 Shadows</h4><ol><li><code>shadowOffsetX = float</code> shadowOffsetX 和 shadowOffsetY 用来设定阴影在 X 和 Y 轴的延伸距离，它们是不受变换矩阵所影响的。负值表示阴影会往上或左延伸，正值则表示会往下或右延伸，它们默认都为 0。</li><li><code>shadowOffsetY = float</code> shadowOffsetX 和 shadowOffsetY 用来设定阴影在 X 和 Y 轴的延伸距离，它们是不受变换矩阵所影响的。负值表示阴影会往上或左延伸，正值则表示会往下或右延伸，它们默认都为 0。</li><li><code>shadowBlur = float</code> shadowBlur 用于设定阴影的模糊程度，其数值并不跟像素数量挂钩，也不受变换矩阵的影响，默认为 0。</li><li><code>hadowColor = color</code> shadowColor 是标准的 CSS 颜色值，用于设定阴影颜色效果，默认是全透明的黑色。</li></ol><h4 id="设置填充规则"><a class="header-anchor" href="#设置填充规则" aria-hidden="true">#</a> 设置填充规则</h4><p>用到 fill（或者 clip 和 isPointinPath ）可以选择一个填充规则，该填充规则根据某处在路径的外面或者里面来决定该处是否被填充</p><ol><li>&quot;nonzero&quot;</li><li>&quot;evenodd&quot;</li></ol><h3 id="绘制文本"><a class="header-anchor" href="#绘制文本" aria-hidden="true">#</a> 绘制文本</h3><ol><li>fillText(text, x, y [, maxWidth]) 在指定的(x,y)位置填充指定的文本，绘制的最大宽度是可选的.</li><li>strokeText(text, x, y [, maxWidth]) 在指定的(x,y)位置绘制文本边框，绘制的最大宽度是可选的.</li></ol><p>还有一系列的样式属性：</p><ol><li><code>font = value</code> 当前我们用来绘制文本的样式. 这个字符串使用和 CSS font 属性相同的语法. 默认的字体是 10px sans-serif。</li><li><code>textAlign = value</code> 文本对齐选项. 可选的值包括：start, end, left, right or center. 默认值是 start。</li><li><code>textBaseline = value</code> 基线对齐选项. 可选的值包括：top, hanging, middle, alphabetic, ideographic, bottom。默认值是 alphabetic。</li><li><code>direction = value</code> 文本方向。可能的值包括：ltr, rtl, inherit。默认值是 inherit。</li></ol><p>以及<code>measureText()</code>获取文本宽度，返回一个 TextMetrics 对象的宽度、所在像素，这些体现文本特性的属性。</p><h3 id="操作图片"><a class="header-anchor" href="#操作图片" aria-hidden="true">#</a> 操作图片</h3><p>有多种类型元素可以作为图片的源</p><ol><li><code>HTMLImageElement</code> 这些图片是由 Image()函数构造出来的，或者任何的元素</li><li><code>HTMLVideoElement</code> 用一个 HTML 的</li><li><code>HTMLCanvasElement</code> 可以使用另一个   元素作为你的图片源。</li><li><code>ImageBitmap</code> 这是一个高性能的位图，可以低延迟地绘制，它可以从上述的所有源以及其它几种源中生成。</li></ol><h4 id="基本使用："><a class="header-anchor" href="#基本使用：" aria-hidden="true">#</a> 基本使用：</h4><ol><li><code>drawImage(image, x, y, width, height)</code></li></ol><p>其中 image 是 image 或者 canvas 对象，x 和 y 是其在目标 canvas 里的起始坐标。width,height 用来控制缩放</p><ol start="2"><li>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) 第一个参数和其它的是相同的，都是一个图像或者另一个 canvas 的引用。其它 8 个参数，前 4 个是定义图像源的切片位置和大小，后 4 个则是定义切片的目标显示位置和大小。</li></ol><blockquote><p>过度缩放图像会导致图像模糊或像素化，可以通过使用绘图环境的 imageSmoothingEnabled 属性来控制是否在缩放图像时使用平滑算法。默认值为 true，即启用平滑缩放。也可以通过 imageSmoothingEnabled=false 禁用</p></blockquote><h3 id="变形"><a class="header-anchor" href="#变形" aria-hidden="true">#</a> 变形</h3><h4 id="状态的保存和恢复"><a class="header-anchor" href="#状态的保存和恢复" aria-hidden="true">#</a> 状态的保存和恢复</h4><ol><li><code>save()</code> 保存画布的所有状态</li><li><code>restore()</code> restore 用来恢复 canvas 状态</li></ol><h4 id="变形相关-api"><a class="header-anchor" href="#变形相关-api" aria-hidden="true">#</a> 变形相关 API</h4><ol><li>移动<code>translate(x,y)</code></li><li><code>rotate(angle)</code></li><li><code>scale(x,y)</code></li><li><code>transform(a,b,c,d,e,f)</code><ul><li><code>a (m11)</code> 水平方向的缩放</li><li><code>b(m12)</code> 竖直方向的倾斜偏移</li><li><code>c(m21)</code> 水平方向的倾斜偏移</li><li><code>d(m22)</code> 竖直方向的缩放</li><li><code>e(dx)</code> 水平方向的移动</li><li><code>f(dy)</code> 竖直方向的移动</li></ul></li><li><code>setTransform(a,b,c,d,e,f)</code><ul><li>取消了当前变形,然后设置为指定的变形</li></ul></li><li><code>resetTransform()</code>，字面意思，重置</li></ol><h3 id="合成与裁剪"><a class="header-anchor" href="#合成与裁剪" aria-hidden="true">#</a> 合成与裁剪</h3><p>直接看 mdn 效果：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Compositing" target="_blank" rel="noopener noreferrer">合成与裁剪 mdn</a></p><h3 id="基本动画"><a class="header-anchor" href="#基本动画" aria-hidden="true">#</a> 基本动画</h3><p>步骤：</p><ol><li>清空 canvas 除非接下来要画的内容会完全充满 canvas （例如背景图），否则你需要清空所有。最简单的做法就是用 clearRect 方法。</li><li>保存 canvas 状态 如果你要改变一些会改变 canvas 状态的设置（样式，变形之类的），又要在每画一帧之时都是原始状态的话，你需要先保存一下。</li><li>绘制动画图形（animated shapes） 这一步才是重绘动画帧。</li><li>恢复 canvas 状态 如果已经保存了 canvas 的状态，可以先恢复它，然后重绘下一帧。</li></ol><blockquote><p>使用 setInterval()、setTimeout()、requestAnimationFrame()操控动画</p></blockquote><blockquote><p>requestAnimationFrame()一般每秒钟执行回调 60 次</p></blockquote><p><strong>具体实践</strong>：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Advanced_animations" target="_blank" rel="noopener noreferrer">mdn 高级动画</a></p><h3 id="像素操作"><a class="header-anchor" href="#像素操作" aria-hidden="true">#</a> 像素操作</h3><ul><li>ImageData 对象存储着 canvas 对象真实的像素数据，包含 width、height、data</li><li>保存图片 toDataURL(imageType,quality)，会创建一个图片分辨率为 96dpi 的数据链接。quality0 到 1</li></ul><hr><h4 id="参考"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h4><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial" target="_blank" rel="noopener noreferrer">canvas 教程 MDN</a></li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/Jarrett817/Jarrett-blog/edit/master/docs/front-end/canvas/index.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>Last Updated:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/Jarrett-blog/front-end/git/" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>git</span></a></div><div class="next" data-v-38ede35f><!----></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"f16df007\",\"tools_slides.md\":\"ac1cf889\",\"computer-basic_design-pattern_index.md\":\"5e203ae1\",\"computer-basic_fucking-arithmetic_index.md\":\"9900c140\",\"computer-basic_internet_index.md\":\"653ef890\",\"front-end_browser_index.md\":\"6475c368\",\"front-end_canvas_index.md\":\"315c87cc\",\"front-end_css_index.md\":\"9161c7b8\",\"front-end_git_index.md\":\"572d444d\",\"front-end_html_index.md\":\"1857da16\",\"front-end_js_index.md\":\"a922a2f2\",\"front-end_nodejs_index.md\":\"76e10abc\",\"front-end_ts_index.md\":\"d8e36f4c\",\"front-end_vue_index.md\":\"0ac73585\"}")</script>
    <script type="module" async src="/Jarrett-blog/assets/app.dff7797b.js"></script>
  </body>
</html>