<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>🏠 JarrettBlog | Vite &amp; Vue powered static site generator</title>
    <meta name="description" content="前端学习笔记">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/Jarrett-blog/assets/style.BxYy6MEi.css" as="style">
    <link rel="preload stylesheet" href="/Jarrett-blog/vp-icons.css" as="style">
    
    <script type="module" src="/Jarrett-blog/assets/app.hQUXQupM.js"></script>
    <link rel="preload" href="/Jarrett-blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/theme.DXZAdxYV.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/framework.C1rSk1pR.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/XmlAbort.vue_vue_type_script_setup_true_lang.BiFkVvDG.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/front-end_js_FAQ.md.D6-DVbE8.lean.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="icon" href="/Jarrett-blogfavicon.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="n-config-provider" data-v-e044f95b><!----><div class="Layout" data-v-e044f95b data-v-ffb09705><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d2b01218></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-d2b01218> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ffb09705 data-v-d5086a5b><div class="VPNavBar has-sidebar top" data-v-d5086a5b data-v-b1dc54d2><div class="wrapper" data-v-b1dc54d2><div class="container" data-v-b1dc54d2><div class="title" data-v-b1dc54d2><div class="VPNavBarTitle has-sidebar" data-v-b1dc54d2 data-v-896105e3><a class="title" href="/Jarrett-blog/" data-v-896105e3><!--[--><!--]--><!----><span data-v-896105e3>🏠 JarrettBlog</span><!--[--><!--]--></a></div></div><div class="content" data-v-b1dc54d2><div class="content-body" data-v-b1dc54d2><!--[--><!--]--><div class="VPNavBarSearch search" data-v-b1dc54d2><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b1dc54d2 data-v-3f5a4db7><span id="main-nav-aria-label" class="visually-hidden" data-v-3f5a4db7> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/Jarrett-blog/front-end/html/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📘 前端基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/computer-basic/design-pattern/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📚 计算机基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/plan/micro-fe-communication/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>🏹 方案</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/practice/leetcode.html" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>✍ 练习题</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/web3/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📘 WEB3</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/resume/index.html" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>🔖 简历</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-b1dc54d2 data-v-d84b2752><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d84b2752 data-v-56ef3316 data-v-80588559><span class="check" data-v-80588559><span class="icon" data-v-80588559><!--[--><span class="vpi-sun sun" data-v-56ef3316></span><span class="vpi-moon moon" data-v-56ef3316></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b1dc54d2 data-v-29e6104c data-v-4603dc2a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b1dc54d2 data-v-a7f6646a data-v-17857302><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-17857302><span class="vpi-more-horizontal icon" data-v-17857302></span></button><div class="menu" data-v-17857302><div class="VPMenu" data-v-17857302 data-v-d932083f><!----><!--[--><!--[--><!----><div class="group" data-v-a7f6646a><div class="item appearance" data-v-a7f6646a><p class="label" data-v-a7f6646a>Appearance</p><div class="appearance-action" data-v-a7f6646a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-a7f6646a data-v-56ef3316 data-v-80588559><span class="check" data-v-80588559><span class="icon" data-v-80588559><!--[--><span class="vpi-sun sun" data-v-56ef3316></span><span class="vpi-moon moon" data-v-56ef3316></span><!--]--></span></span></button></div></div></div><div class="group" data-v-a7f6646a><div class="item social-links" data-v-a7f6646a><div class="VPSocialLinks social-links-list" data-v-a7f6646a data-v-4603dc2a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b1dc54d2 data-v-04046837><span class="container" data-v-04046837><span class="top" data-v-04046837></span><span class="middle" data-v-04046837></span><span class="bottom" data-v-04046837></span></span></button></div></div></div></div><div class="divider" data-v-b1dc54d2><div class="divider-line" data-v-b1dc54d2></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-ffb09705 data-v-a5ffc52e><div class="container" data-v-a5ffc52e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a5ffc52e><span class="vpi-align-left menu-icon" data-v-a5ffc52e></span><span class="menu-text" data-v-a5ffc52e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a5ffc52e data-v-98eee035><button data-v-98eee035>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-ffb09705 data-v-ae7e1657><div class="curtain" data-v-ae7e1657></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-ae7e1657><span class="visually-hidden" id="sidebar-aria-label" data-v-ae7e1657> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>前端基础</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/html/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>HTML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/css/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>CSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/js/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>JS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/ts/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>TS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/browser/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>浏览器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue3/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>vue3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/nodejs/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>nodejs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/git/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/canvas/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>canvas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/micro-front/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>微前端</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/miniprogram/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>小程序</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>计算机基础</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>设计模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/internet/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>计算机网络</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/arithmetic/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>数据结构与算法</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>方案</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/navigation/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>多级跳转</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/micro-fe-communication/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>微前端下的主子通信</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/api-test/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>接口测试平台</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/how-to-make-ts-useful/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>10分钟速通TS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/front-end-infrastructure/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>前端基建（一）</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>WEB3</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/web3/index.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>新手入门</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>练习题</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/practice/leetcode.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>算法题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/practice/promise.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>Promise</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ffb09705 data-v-30f0ecb7><div class="VPDoc has-sidebar has-aside" data-v-30f0ecb7 data-v-3f19d6b0><!--[--><!--]--><div class="container" data-v-3f19d6b0><div class="aside" data-v-3f19d6b0><div class="aside-curtain" data-v-3f19d6b0></div><div class="aside-container" data-v-3f19d6b0><div class="aside-content" data-v-3f19d6b0><div class="VPDocAside" data-v-3f19d6b0 data-v-e53cbd78><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-e53cbd78 data-v-c3513957><div class="content" data-v-c3513957><div class="outline-marker" data-v-c3513957></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c3513957>On this page</div><ul class="VPDocOutlineItem root" data-v-c3513957 data-v-d1d61fd6><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-e53cbd78></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><button class="n-button n-button--info-type n-button--large-type" tabindex="0" type="button" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-bezier-ease-out:cubic-bezier(0, 0, .2, 1);--n-ripple-duration:.6s;--n-opacity-disabled:0.5;--n-wave-opacity:0.6;font-weight:400;--n-color:#0000;--n-color-hover:rgba(46, 51, 56, .09);--n-color-pressed:rgba(46, 51, 56, .13);--n-color-focus:rgba(46, 51, 56, .09);--n-color-disabled:#0000;--n-ripple-color:#0000;--n-text-color:#2080f0;--n-text-color-hover:#2080f0;--n-text-color-pressed:#2080f0;--n-text-color-focus:#2080f0;--n-text-color-disabled:#2080f0;--n-border:1px solid #2080f0;--n-border-hover:1px solid #4098fc;--n-border-pressed:1px solid #1060c9;--n-border-focus:1px solid #4098fc;--n-border-disabled:1px solid #2080f0;--n-width:40px;--n-height:40px;--n-font-size:15px;--n-padding:initial;--n-icon-size:20px;--n-icon-margin:6px;--n-border-radius:40px;" data-v-e044f95b><!----><span class="n-button__icon" style="margin:0;"><div class="n-icon-slot" role="none"><i role="img" class="n-icon" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-color:;--n-opacity:;font-size:20px;" data-v-e044f95b><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" data-v-e044f95b><path d="M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20z" fill="currentColor"></path><path d="M14 19.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z" fill="currentColor"></path></svg></i></div></span><!----><div aria-hidden="true" class="n-base-wave"></div><!----><!----></button><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-3f19d6b0><div class="content-container" data-v-3f19d6b0><!--[--><!--]--><main class="main" data-v-3f19d6b0><div style="position:relative;" class="vp-doc _Jarrett-blog_front-end_js_FAQ" data-v-3f19d6b0><div><h3 id="数据类型" tabindex="-1">数据类型 <a class="header-anchor" href="#数据类型" aria-label="Permalink to &quot;数据类型&quot;">​</a></h3><ul><li><p>写出下面运行的结果,解释原因</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#D33682;">1</span><span style="color:#859900;"> +</span><span style="color:#2AA198;"> &#39;1&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// 结果为11，数字与字符串相加，会把数字转为字符串，再相加</span></span>
<span class="line"><span style="color:#2AA198;">&#39;a&#39;</span><span style="color:#859900;"> +</span><span style="color:#859900;"> +</span><span style="color:#2AA198;">&#39;b&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// 结果为aNaN,+&#39;b&#39;结果为NaN，NaN与字符串相加，转为字符串，所以是aNaN</span></span></code></pre></div></li><li><p>如何让 (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) 的值为 true?</p></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> i</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">Number</span><span style="color:#839496;">.prototype.</span><span style="color:#268BD2;">valueOf</span><span style="color:#859900;"> =</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> i</span><span style="color:#859900;">++</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> a</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Number</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">);</span></span></code></pre></div><ul><li><p>写出下面运行的结果,解释原因</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> test</span><span style="color:#839496;">(person) {</span></span>
<span class="line"><span style="color:#268BD2;">  person</span><span style="color:#839496;">.</span><span style="color:#268BD2;">age</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 26</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">  person</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    name: </span><span style="color:#2AA198;">&#39;张三&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">    age: </span><span style="color:#D33682;">12</span></span>
<span class="line"><span style="color:#839496;">  };</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> person</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> p1</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name: </span><span style="color:#2AA198;">&#39;李四&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  age: </span><span style="color:#D33682;">19</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> p2</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> test</span><span style="color:#839496;">(</span><span style="color:#268BD2;">p1</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">p1</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// -&gt; {name:&#39;张三&#39;,age:26}</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// 函数内复制了p1的副本到局部变量person，与p1指向同一个保存引用的堆内存地址，因此age被改为26</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">p2</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// -&gt; {name:&#39;李四&#39;,age:12}</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// 函数内部对person变量重新赋值，指向了新的堆内存地址，最后return出来的person是新赋值的person</span></span></code></pre></div></li><li><p>实现两个大数相加</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> a</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;123456789012345678&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> b</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;876543210987654321&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> add</span><span style="color:#839496;">(a, b) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> maxLength</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> Math</span><span style="color:#839496;">.</span><span style="color:#268BD2;">max</span><span style="color:#839496;">(</span><span style="color:#268BD2;">a</span><span style="color:#839496;">.length, </span><span style="color:#268BD2;">b</span><span style="color:#839496;">.length);</span></span>
<span class="line"><span style="color:#268BD2;">  a</span><span style="color:#859900;"> !==</span><span style="color:#268BD2;"> maxLength</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">a</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> a</span><span style="color:#839496;">.</span><span style="color:#268BD2;">padStart</span><span style="color:#839496;">(</span><span style="color:#268BD2;">maxLength</span><span style="color:#839496;">, </span><span style="color:#D33682;">0</span><span style="color:#839496;">));</span></span>
<span class="line"><span style="color:#268BD2;">  b</span><span style="color:#859900;"> !==</span><span style="color:#268BD2;"> maxLength</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">b</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> b</span><span style="color:#839496;">.</span><span style="color:#268BD2;">padStart</span><span style="color:#839496;">(</span><span style="color:#268BD2;">maxLength</span><span style="color:#839496;">, </span><span style="color:#D33682;">0</span><span style="color:#839496;">));</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  let</span><span style="color:#268BD2;"> carryFlag</span><span style="color:#859900;"> =</span><span style="color:#B58900;"> false</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#268BD2;">    result</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">  for</span><span style="color:#839496;"> (</span><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> i</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> maxLength</span><span style="color:#859900;"> -</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">; </span><span style="color:#268BD2;">i</span><span style="color:#859900;"> &gt;=</span><span style="color:#D33682;"> 0</span><span style="color:#839496;">; </span><span style="color:#268BD2;">i</span><span style="color:#859900;">--</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    let</span><span style="color:#268BD2;"> sum</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> parseInt</span><span style="color:#839496;">(</span><span style="color:#268BD2;">a</span><span style="color:#839496;">[</span><span style="color:#268BD2;">i</span><span style="color:#839496;">]) </span><span style="color:#859900;">+</span><span style="color:#268BD2;"> parseInt</span><span style="color:#839496;">(</span><span style="color:#268BD2;">b</span><span style="color:#839496;">[</span><span style="color:#268BD2;">i</span><span style="color:#839496;">]);</span></span>
<span class="line"><span style="color:#268BD2;">    carryFlag</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#268BD2;"> sum</span><span style="color:#859900;">++</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">carryFlag</span><span style="color:#859900;"> =</span><span style="color:#B58900;"> false</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">sum</span><span style="color:#859900;"> /</span><span style="color:#D33682;"> 10</span><span style="color:#859900;"> &gt;=</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">      carryFlag</span><span style="color:#859900;"> =</span><span style="color:#B58900;"> true</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">      result</span><span style="color:#859900;"> =</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">sum</span><span style="color:#859900;"> %</span><span style="color:#D33682;"> 10</span><span style="color:#839496;">) </span><span style="color:#859900;">+</span><span style="color:#268BD2;"> result</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    } </span><span style="color:#859900;">else</span><span style="color:#268BD2;"> result</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> sum</span><span style="color:#859900;"> +</span><span style="color:#268BD2;"> result</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> carryFlag</span><span style="color:#859900;"> ?</span><span style="color:#D33682;"> 1</span><span style="color:#859900;"> +</span><span style="color:#268BD2;"> result</span><span style="color:#859900;"> :</span><span style="color:#268BD2;"> result</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#268BD2;">add</span><span style="color:#839496;">(</span><span style="color:#268BD2;">a</span><span style="color:#839496;">, </span><span style="color:#268BD2;">b</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;999999999999999999&#39;</span></span></code></pre></div></li><li><p>手写类型判断函数</p></li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> myTypeOf</span><span style="color:#839496;">(params) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> res</span><span style="color:#859900;"> =</span><span style="color:#859900;"> Object</span><span style="color:#839496;">.prototype.</span><span style="color:#268BD2;">toString</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">params</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> res</span><span style="color:#839496;">.</span><span style="color:#268BD2;">slice</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#859900;">-</span><span style="color:#D33682;">1</span><span style="color:#839496;">).</span><span style="color:#268BD2;">split</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39; &#39;</span><span style="color:#839496;">)[</span><span style="color:#D33682;">1</span><span style="color:#839496;">].</span><span style="color:#268BD2;">toLowerCase</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><ul><li>手写深拷贝函数</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> myTypeOf</span><span style="color:#839496;">(params) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> res</span><span style="color:#859900;"> =</span><span style="color:#859900;"> Object</span><span style="color:#839496;">.prototype.</span><span style="color:#268BD2;">toString</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">params</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> res</span><span style="color:#839496;">.</span><span style="color:#268BD2;">slice</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#859900;">-</span><span style="color:#D33682;">1</span><span style="color:#839496;">).</span><span style="color:#268BD2;">split</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39; &#39;</span><span style="color:#839496;">)[</span><span style="color:#D33682;">1</span><span style="color:#839496;">].</span><span style="color:#268BD2;">toLowerCase</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> forEach</span><span style="color:#839496;">(ary, fn) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  let</span><span style="color:#268BD2;"> index</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 0</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> length</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> ary</span><span style="color:#839496;">.length;</span></span>
<span class="line"><span style="color:#859900;">  while</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">index</span><span style="color:#859900;"> &lt;</span><span style="color:#268BD2;"> length</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">    fn</span><span style="color:#839496;">(</span><span style="color:#268BD2;">ary</span><span style="color:#839496;">[</span><span style="color:#268BD2;">index</span><span style="color:#839496;">], </span><span style="color:#268BD2;">index</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">    index</span><span style="color:#859900;">++</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> deepClone</span><span style="color:#839496;">(target, map </span><span style="color:#859900;">=</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> WeakMap</span><span style="color:#839496;">()) {</span></span>
<span class="line"><span style="color:#859900;">  if</span><span style="color:#839496;"> ([</span><span style="color:#2AA198;">&#39;object&#39;</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;array&#39;</span><span style="color:#839496;">].</span><span style="color:#268BD2;">includes</span><span style="color:#839496;">(</span><span style="color:#268BD2;">myTypeOf</span><span style="color:#839496;">(</span><span style="color:#268BD2;">target</span><span style="color:#839496;">))) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#268BD2;"> isObj</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> myTypeOf</span><span style="color:#839496;">(</span><span style="color:#268BD2;">target</span><span style="color:#839496;">) </span><span style="color:#859900;">===</span><span style="color:#2AA198;"> &#39;object&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    let</span><span style="color:#268BD2;"> result</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> isObj</span><span style="color:#859900;"> ?</span><span style="color:#839496;"> {} </span><span style="color:#859900;">:</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">map</span><span style="color:#839496;">.</span><span style="color:#268BD2;">get</span><span style="color:#839496;">(</span><span style="color:#268BD2;">target</span><span style="color:#839496;">)) </span><span style="color:#859900;">return</span><span style="color:#268BD2;"> map</span><span style="color:#839496;">.</span><span style="color:#268BD2;">get</span><span style="color:#839496;">(</span><span style="color:#268BD2;">target</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">    map</span><span style="color:#839496;">.</span><span style="color:#268BD2;">set</span><span style="color:#839496;">(</span><span style="color:#268BD2;">target</span><span style="color:#839496;">, </span><span style="color:#268BD2;">result</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#268BD2;"> keys</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> isObj</span><span style="color:#859900;"> ?</span><span style="color:#268BD2;"> Object</span><span style="color:#839496;">.</span><span style="color:#268BD2;">keys</span><span style="color:#839496;">(</span><span style="color:#268BD2;">target</span><span style="color:#839496;">) </span><span style="color:#859900;">:</span><span style="color:#268BD2;"> target</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">    forEach</span><span style="color:#839496;">(</span><span style="color:#268BD2;">keys</span><span style="color:#839496;">, (value, key) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">      if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">isObj</span><span style="color:#839496;">) </span><span style="color:#268BD2;">key</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> value</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">      result</span><span style="color:#839496;">[</span><span style="color:#268BD2;">key</span><span style="color:#839496;">] </span><span style="color:#859900;">=</span><span style="color:#268BD2;"> deepClone</span><span style="color:#839496;">(</span><span style="color:#268BD2;">target</span><span style="color:#839496;">[</span><span style="color:#268BD2;">key</span><span style="color:#839496;">], </span><span style="color:#268BD2;">map</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    });</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#268BD2;"> result</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  } </span><span style="color:#859900;">else</span><span style="color:#859900;"> return</span><span style="color:#268BD2;"> target</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><h3 id="作用域与闭包" tabindex="-1">作用域与闭包 <a class="header-anchor" href="#作用域与闭包" aria-label="Permalink to &quot;作用域与闭包&quot;">​</a></h3><ol><li>下面代码的输出结果</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> a</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 20</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> foo</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#859900;">  if</span><span style="color:#839496;"> (</span><span style="color:#859900;">!</span><span style="color:#268BD2;">a</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">    a</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 100</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  var</span><span style="color:#268BD2;"> a</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 10</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> a</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">foo</span><span style="color:#839496;">());</span></span></code></pre></div><p>解：输出为 10，因为 js 采用词法作用域，函数内部的作用域在函数定义时就确定了，优先查找并使用函数内部新创建的 a 变量</p><ol><li>以下代码在执行过程中是否存在闭包</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> outer</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  var</span><span style="color:#268BD2;"> a</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  function</span><span style="color:#268BD2;"> inner</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    var</span><span style="color:#268BD2;"> b</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 2</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">b</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> inner</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">outer</span><span style="color:#839496;">()();</span></span></code></pre></div><p>解：不存在，虽然 inner 函数在 outer 函数的作用域链里，但是没有引用外部变量，未形成闭包</p><ol><li>以下变种代码是否存在闭包，并且说出 inner 函数执行时的作用域链</li></ol><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#839496;">function outer() {</span></span>
<span class="line"><span style="color:#839496;">  var a = 1;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#839496;">  function inner() {</span></span>
<span class="line"><span style="color:#839496;">    var b = 2;</span></span>
<span class="line"><span style="color:#DC322F;">-    console.log(b);</span></span>
<span class="line"><span style="color:#859900;">+    console.log(a);</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#839496;">  return inner;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#839496;">outer()();</span></span></code></pre></div><p>解：存在，inner 函数的 scopeChain:[inner,outer,global]</p><ol><li>以下代码是否存在闭包</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> outer</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  var</span><span style="color:#268BD2;"> a</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  function</span><span style="color:#268BD2;"> inner</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">a</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">  inner</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">outer</span><span style="color:#839496;">();</span></span></code></pre></div><p>解：存在，内部 inner 函数引用了其外部作用域链上的变量，形成闭包，但由于没有 return 出来，在执行完毕后，闭包会被回收</p><h3 id="原型链" tabindex="-1">原型链 <a class="header-anchor" href="#原型链" aria-label="Permalink to &quot;原型链&quot;">​</a></h3><ul><li>手动实现 new 函数</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> New</span><span style="color:#839496;">(func) {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  // 创建一个中间对象实例</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> res</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {};</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  // 将实例的原型指向构造函数的原型</span></span>
<span class="line"><span style="color:#859900;">  if</span><span style="color:#839496;"> (</span><span style="color:#859900;">func</span><span style="color:#839496;">.prototype </span><span style="color:#859900;">!==</span><span style="color:#B58900;"> null</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">    res</span><span style="color:#839496;">.__proto__ </span><span style="color:#859900;">=</span><span style="color:#859900;"> func</span><span style="color:#839496;">.prototype;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  // 将构造函数的this指向新创建的中间对象</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> ret</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> func</span><span style="color:#839496;">.</span><span style="color:#268BD2;">apply</span><span style="color:#839496;">(</span><span style="color:#268BD2;">res</span><span style="color:#839496;">, </span><span style="color:#859900;">Array</span><span style="color:#839496;">.prototype.</span><span style="color:#268BD2;">slice</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">arguments</span><span style="color:#839496;">, </span><span style="color:#D33682;">1</span><span style="color:#839496;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  // 如果构造函数有明确指定返回对象，当返回结果类型是object或者function时，返回对象，否则返回指定的结果</span></span>
<span class="line"><span style="color:#859900;">  if</span><span style="color:#839496;"> ((</span><span style="color:#859900;">typeof</span><span style="color:#268BD2;"> ret</span><span style="color:#859900;"> ===</span><span style="color:#2AA198;"> &#39;object&#39;</span><span style="color:#859900;"> ||</span><span style="color:#859900;"> typeof</span><span style="color:#268BD2;"> ret</span><span style="color:#859900;"> ===</span><span style="color:#2AA198;"> &#39;function&#39;</span><span style="color:#839496;">) </span><span style="color:#859900;">&amp;&amp;</span><span style="color:#268BD2;"> ret</span><span style="color:#859900;"> !==</span><span style="color:#B58900;"> null</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#268BD2;"> ret</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> res</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><ul><li>手动实现 <code>instanceof</code> 的功能</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> myInstanceof</span><span style="color:#839496;">(instance, target) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> instanceProto</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> instance</span><span style="color:#839496;">.__proto__,</span></span>
<span class="line"><span style="color:#268BD2;">    targetProto</span><span style="color:#859900;"> =</span><span style="color:#859900;"> target</span><span style="color:#839496;">.prototype;</span></span>
<span class="line"><span style="color:#859900;">  if</span><span style="color:#839496;"> (</span><span style="color:#859900;">!</span><span style="color:#268BD2;">instanceProto</span><span style="color:#839496;">) </span><span style="color:#859900;">return</span><span style="color:#B58900;"> false</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">  if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">instanceProto</span><span style="color:#859900;"> ===</span><span style="color:#268BD2;"> targetProto</span><span style="color:#839496;">) </span><span style="color:#859900;">return</span><span style="color:#B58900;"> true</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#859900;">  else</span><span style="color:#859900;"> return</span><span style="color:#268BD2;"> myInstanceof</span><span style="color:#839496;">(</span><span style="color:#268BD2;">instanceProto</span><span style="color:#839496;">, </span><span style="color:#268BD2;">target</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><h3 id="this、闭包" tabindex="-1">this、闭包 <a class="header-anchor" href="#this、闭包" aria-label="Permalink to &quot;this、闭包&quot;">​</a></h3><ul><li><p>写出下面运行的结果</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> name</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;window&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> person1</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  name: </span><span style="color:#2AA198;">&#39;person1&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#268BD2;">  foo1</span><span style="color:#839496;">: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  },</span></span>
<span class="line"><span style="color:#268BD2;">  foo2</span><span style="color:#839496;">: () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">),</span></span>
<span class="line"><span style="color:#268BD2;">  foo3</span><span style="color:#839496;">: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    };</span></span>
<span class="line"><span style="color:#839496;">  },</span></span>
<span class="line"><span style="color:#268BD2;">  foo4</span><span style="color:#839496;">: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    };</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> person2</span><span style="color:#859900;"> =</span><span style="color:#839496;"> { name: </span><span style="color:#2AA198;">&#39;person2&#39;</span><span style="color:#839496;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo1</span><span style="color:#839496;">(); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，this指向调用foo1的person1</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;person2&#39;，通过call指定foo1的this为person2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo2</span><span style="color:#839496;">(); </span><span style="color:#586E75;font-style:italic;">// &#39;window&#39;，箭头函数的this由所在的作用域决定，var person不会创建作用域，因此指向全局作用域window</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo2</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;window&#39;，箭头函数的this在声明时就已经确定，无法被call、apply改变</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo3</span><span style="color:#839496;">()(); </span><span style="color:#586E75;font-style:italic;">// &#39;window&#39;，person1.foo3()返回了内部函数，调用时是在全局作用域</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo3</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">)(); </span><span style="color:#586E75;font-style:italic;">// &#39;window&#39;，内部函数的调用依然是在全局作用域</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo3</span><span style="color:#839496;">().</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;person2&#39;，改变了内部函数的this</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo4</span><span style="color:#839496;">()(); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，内部箭头函数的this即foo4的作用域的this</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo4</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">)(); </span><span style="color:#586E75;font-style:italic;">// &#39;person2&#39;，改变了foo4的this</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo4</span><span style="color:#839496;">().</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，箭头函数不会被改变this</span></span></code></pre></div></li><li><p>写出下面运行的结果</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> name</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;window&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> Person</span><span style="color:#839496;">(name) {</span></span>
<span class="line"><span style="color:#268BD2;">  this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> name</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">  this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo1</span><span style="color:#859900;"> =</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  };</span></span>
<span class="line"><span style="color:#268BD2;">  this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo2</span><span style="color:#859900;"> =</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">  this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo3</span><span style="color:#859900;"> =</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    };</span></span>
<span class="line"><span style="color:#839496;">  };</span></span>
<span class="line"><span style="color:#268BD2;">  this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo4</span><span style="color:#859900;"> =</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#859900;">    return</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">name</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    };</span></span>
<span class="line"><span style="color:#839496;">  };</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> person1</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Person</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;person1&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> person2</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Person</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;person2&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo1</span><span style="color:#839496;">(); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，构造函数的this指向实例对象</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;person2&#39;，改变this指向</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo2</span><span style="color:#839496;">(); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，箭头函数的this声明时已确定，指向实例</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo2</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，箭头函数不会被call改变this</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo3</span><span style="color:#839496;">()(); </span><span style="color:#586E75;font-style:italic;">// &#39;window&#39;，内部函数先返回再执行，this指向window</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo3</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">)(); </span><span style="color:#586E75;font-style:italic;">// &#39;window&#39;，函数的this在被调用时确定，先返回了函数，再执行，指向window</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo3</span><span style="color:#839496;">().</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;person2&#39;，指定了内部函数的this</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo4</span><span style="color:#839496;">()(); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，内部箭头函数的this即foo4的this，指向实例</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo4</span><span style="color:#839496;">.</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">)(); </span><span style="color:#586E75;font-style:italic;">// &#39;person2&#39;，指定的foo4的this即内部箭头函数的this</span></span>
<span class="line"><span style="color:#268BD2;">person1</span><span style="color:#839496;">.</span><span style="color:#268BD2;">foo4</span><span style="color:#839496;">().</span><span style="color:#268BD2;">call</span><span style="color:#839496;">(</span><span style="color:#268BD2;">person2</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// &#39;person1&#39;，无法指定箭头函数的this</span></span></code></pre></div></li><li><p>写出下面运行的结果</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> foo</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  var</span><span style="color:#268BD2;"> myName</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;章三&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  let</span><span style="color:#268BD2;"> test1</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  const</span><span style="color:#268BD2;"> test2</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 2</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  var</span><span style="color:#268BD2;"> innerBar</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    getName</span><span style="color:#839496;">: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">test1</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#268BD2;"> myName</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    },</span></span>
<span class="line"><span style="color:#268BD2;">    setName</span><span style="color:#839496;">: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> (newName) {</span></span>
<span class="line"><span style="color:#268BD2;">      myName</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> newName</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  };</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#268BD2;"> innerBar</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">var</span><span style="color:#268BD2;"> bar</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> foo</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#268BD2;">bar</span><span style="color:#839496;">.</span><span style="color:#268BD2;">setName</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;李四&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">bar</span><span style="color:#839496;">.</span><span style="color:#268BD2;">getName</span><span style="color:#839496;">(); </span><span style="color:#586E75;font-style:italic;">// 1</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">bar</span><span style="color:#839496;">.</span><span style="color:#268BD2;">getName</span><span style="color:#839496;">()); </span><span style="color:#586E75;font-style:italic;">// 1 &#39;李四&#39;，存在闭包</span></span></code></pre></div></li></ul><h3 id="事件循环" tabindex="-1">事件循环 <a class="header-anchor" href="#事件循环" aria-label="Permalink to &quot;事件循环&quot;">​</a></h3><p>注意点： 1、<code>promise.then</code> 会将状态持续传递下去，除非抛出错误或者 <code>return</code> 了 <code>Promise.reject</code> 2、没有显示返回值的函数默认返回 <code>undefined</code>，这同样会将<code>.then</code> 返回的 <code>promise</code> 状态置为 <code>fulfilled</code>,同样能将<code>.then</code>中的回调放入微任务队列 3、同步任务优先、异步任务挂起，处理顺序根据任务队列情况而定，宏任务优先级低，只有微任务队列清空才会去拿一个宏任务出来执行 4、PromiseA+规定当 then 中参数不为函数时，必须忽略，表现在.then 中，会原样返回 promise 结果</p><ul><li><p>写出下面运行的结果</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#859900;">Promise</span><span style="color:#839496;">.</span><span style="color:#268BD2;">resolve</span><span style="color:#839496;">(</span><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">0</span><span style="color:#839496;">))</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">    Promise</span><span style="color:#839496;">.</span><span style="color:#268BD2;">resolve</span><span style="color:#839496;">(</span><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">5</span><span style="color:#839496;">))</span></span>
<span class="line"><span style="color:#839496;">      .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">3</span><span style="color:#839496;">))</span></span>
<span class="line"><span style="color:#839496;">      .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">4</span><span style="color:#839496;">))</span></span>
<span class="line"><span style="color:#839496;">      .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">6</span><span style="color:#839496;">));</span></span>
<span class="line"><span style="color:#839496;">  })</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">2</span><span style="color:#839496;">))</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">7</span><span style="color:#839496;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// 0、1、5、3、2、4、7、6</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">script开始</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">第一行的resolve同步执行 log 0，然后主线程直接执行到后续的第一个then，其中的回调直接放入微任务队列</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">此时script中同步任务执行完毕，主线程空闲，开始处理微任务，log 1</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">同步执行Promise.resolve,log 5，.then，当前上下文中同步任务执行完毕，将log 3 放入微任务队列，任务挂起</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">此时当前上下文中同步任务执行完毕，没有显式返回，相当于resolve，执行外层第二个.then，把log 2 放入微任务队列，任务挂起，此时没有同步任务，主线程去执行微任务队列，log 3</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">执行完后，return undefined，将后面log 4放入微任务队列，任务挂起</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">没有同步任务，主线程去处理微任务，log 2，执行完成后return undefined，将后面log 7放入微任务</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">没有同步任务，主线程去处理微任务，log 4，完成后返回undefined，将后面log 6放入微任务队列，任务挂起</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">没有同步任务，主线程去处理微任务，log 7</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">现在只剩下微任务队列里还剩一个log 6，执行log 6</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">*/</span></span></code></pre></div></li><li><p>写出下面运行的结果</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> first</span><span style="color:#859900;"> =</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#859900;">  new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">((resolve, reject) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">3</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    let</span><span style="color:#268BD2;"> p</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">((resolve, reject) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">7</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">      setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">        console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">5</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">        resolve</span><span style="color:#839496;">(</span><span style="color:#D33682;">6</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">        console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">p</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">      }, </span><span style="color:#D33682;">0</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">      resolve</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    });</span></span>
<span class="line"><span style="color:#268BD2;">    resolve</span><span style="color:#839496;">(</span><span style="color:#D33682;">2</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">    p</span><span style="color:#839496;">.</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(arg </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">arg</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    });</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#268BD2;">first</span><span style="color:#839496;">().</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(arg </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">arg</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">});</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#D33682;">4</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// 3、7、4、1、2、5、promise&lt;fulfilled，1&gt;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> script开始</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 执行first函数，同步执行log 3</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 同步执行new Promise，log 7，setTimeout将回调分发至宏任务队列，任务挂起，主线程往下执行resolve(1)</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> log 1进入微任务队列</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 执行resolve(2)，log 2 放入微任务队列</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 同步执行p.then挂起，执行first后面的.then 挂起</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 主线程同步执行log 4，同步任务执行完毕</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 执行微任务队列，依次log 1、log 2</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 微任务全部执行完毕，拿一个宏任务出来执行，log 5</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 下一步resolve 6 没用，Promise A+ 中说明不可改变已经处理完毕的promise状态</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> 最后一步log p，是一个已经被置为fulfilled的promise</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">*/</span></span></code></pre></div></li><li><p>写出下面运行的结果</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> async1</span><span style="color:#859900;"> =</span><span style="color:#93A1A1;font-weight:bold;"> async</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;async1&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">  setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;timer1&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  }, </span><span style="color:#D33682;">2000</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">  await</span><span style="color:#859900;"> new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">(resolve </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;promise1&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;async1 end&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#2AA198;"> &#39;async1 success&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;script start&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">async1</span><span style="color:#839496;">().</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(res </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">res</span><span style="color:#839496;">));</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;script end&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">Promise</span><span style="color:#839496;">.</span><span style="color:#268BD2;">resolve</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(</span><span style="color:#D33682;">2</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(</span><span style="color:#859900;">Promise</span><span style="color:#839496;">.</span><span style="color:#268BD2;">resolve</span><span style="color:#839496;">(</span><span style="color:#D33682;">3</span><span style="color:#839496;">))</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(</span><span style="color:#D33682;">4</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(res </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">res</span><span style="color:#839496;">));</span></span>
<span class="line"><span style="color:#268BD2;">setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;timer2&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}, </span><span style="color:#D33682;">1000</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// script start、async1、promise1、script end、1、timer2、timer1</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">同步执行script start</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">执行 async1，log async1</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">setTimeout 放入宏任务队列，异步任务挂起，执行下一个 new Promise，log promise1,没有resolve，挂起</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">后续的log async1 success和script end其实是在.then中，但是这个promise没有被resolve，不会放入微任务队列，不会执行后续代码</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">执行async1后的.then，放入微任务队列，挂起，执行log script end</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">执行Promise.resolve(1).then ，不是函数，忽略，下一步.then执行，参数不是函数，忽略,catch(4)不是函数，忽略</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">下一步执行.then，放入log res 放入微任务队列（即log 1）</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">执行setTimeout，放入宏任务队列，挂起，主线程处理微任务，log 1</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">最后依次执行宏任务队列，根据等待时间的快慢，log timer2、timer 1 </span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">*/</span></span></code></pre></div></li><li><p>写出下面运行的结果</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> p1</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">(resolve </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    resolve</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;resolve3&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;timer1&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  }, </span><span style="color:#D33682;">0</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">  resolve</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;resolve1&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">  resolve</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;resolve2&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">})</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(res </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">res</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">    setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">      console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">p1</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    }, </span><span style="color:#D33682;">1000</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  })</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">finally</span><span style="color:#839496;">(res </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;finally&#39;</span><span style="color:#839496;">, </span><span style="color:#268BD2;">res</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// resolve1、finally,undefined、timer1、promise&lt;fulfilled,undefined&gt;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  执行new Promise，setTimeout放入宏任务队列</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  resolve1放入微任务队列</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  resolve2放入微任务队列</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  任务挂起，执行.then,挂起</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  无同步任务，执行微任务队列，log resolve1，resolve2没用</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  setTimeout放入宏任务队列</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  无同步任务，执行.finally，放入微任务队列，挂起</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  无同步任务，执行微任务队列，log finally，undefined，因为上一个.then没有return，函数默认return undefined</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  微任务执行完毕，执行宏任务队列，log timer1、promise&lt;fulfilled,undefined&gt;</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">*/</span></span></code></pre></div></li></ul><h3 id="异步编程" tabindex="-1">异步编程 <a class="header-anchor" href="#异步编程" aria-label="Permalink to &quot;异步编程&quot;">​</a></h3><ol><li>实现 sleep 函数，在 n 毫秒之后执行函数，并以函数结果作为返回值(可用 ts 来写)</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> sleep</span><span style="color:#839496;">(fn, time) {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#859900;"> new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">((resolve, reject) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">      resolve</span><span style="color:#839496;">(</span><span style="color:#268BD2;">fn</span><span style="color:#839496;">());</span></span>
<span class="line"><span style="color:#839496;">    }, </span><span style="color:#268BD2;">time</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">sleep</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#2AA198;"> &#39;执行&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}, </span><span style="color:#D33682;">3000</span><span style="color:#839496;">).</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(res </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">res</span><span style="color:#839496;">));</span></span></code></pre></div><ol start="2"><li><p>实现 Promise.retry</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> * 实现 Promise.retry，重试异步函数</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> * 异步函数执行成功后 resolve 结果，</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> * 失败后重试，尝试超过一定次数才真正的 reject</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#859900;">Promise</span><span style="color:#839496;">.</span><span style="color:#268BD2;">retry</span><span style="color:#859900;"> =</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#839496;"> (fn, chance </span><span style="color:#859900;">=</span><span style="color:#D33682;"> 1</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#859900;"> new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">(</span><span style="color:#93A1A1;font-weight:bold;">async</span><span style="color:#839496;"> (resolve, reject) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">    while</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">chance</span><span style="color:#859900;">--</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#859900;">      try</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">        resolve</span><span style="color:#839496;">(</span><span style="color:#859900;">await</span><span style="color:#268BD2;"> fn</span><span style="color:#839496;">());</span></span>
<span class="line"><span style="color:#839496;">      } </span><span style="color:#859900;">catch</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">err</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#859900;">        !</span><span style="color:#268BD2;">chance</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#268BD2;"> reject</span><span style="color:#839496;">(</span><span style="color:#268BD2;">err</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">      }</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#839496;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> doSomething</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#859900;"> new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">((res, reje) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">    setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">      reje</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    }, </span><span style="color:#D33682;">1000</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">Promise</span><span style="color:#839496;">.</span><span style="color:#268BD2;">retry</span><span style="color:#839496;">(</span><span style="color:#268BD2;">doSomething</span><span style="color:#839496;">, </span><span style="color:#D33682;">3</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(res </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;success,res&#39;</span><span style="color:#839496;">))</span></span>
<span class="line"><span style="color:#839496;">  .</span><span style="color:#268BD2;">catch</span><span style="color:#839496;">(err </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;error&#39;</span><span style="color:#839496;">, </span><span style="color:#268BD2;">err</span><span style="color:#839496;">));</span></span></code></pre></div></li><li><p>手写 promise，使用<a href="https://github.com/promises-aplus/promises-tests" target="_blank" rel="noreferrer">promises-aplus-tests</a> 进行测试</p></li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span></span></span></code></pre></div><ol><li><p>信号灯控制器 用异步编程的方式实现一个信号灯（交通灯）控制器，要求：</p><ul><li>红灯亮 50 秒</li><li>绿灯亮 60 秒</li><li>黄灯亮 10 秒</li><li>次序为 红-绿-黄-红-绿-黄</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> red</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;red&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> green</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;green&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> yellow</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;yellow&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// TODO</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> red</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;red shining&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> green</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;green shining&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> yellow</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">  console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;yellow shining&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div></li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">class</span><span style="color:#CB4B16;"> TrafficLight</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  promisedLights </span><span style="color:#859900;">=</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#839496;">  stopSignal </span><span style="color:#859900;">=</span><span style="color:#B58900;"> false</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  constructor</span><span style="color:#839496;">(lights) {</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">promisedLights</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> lights</span><span style="color:#839496;">.</span><span style="color:#268BD2;">map</span><span style="color:#839496;">(({ lighting, duration, color }) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#839496;"> () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#859900;">        new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">((resolve, reject) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">          console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">`${</span><span style="color:#268BD2;">color</span><span style="color:#2AA198;">} start!`</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">          lighting</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#268BD2;">          setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">            if</span><span style="color:#839496;"> (</span><span style="color:#859900;">!</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">stopSignal</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">              console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">`${</span><span style="color:#268BD2;">color</span><span style="color:#2AA198;">} end!`</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">              resolve</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">            }</span></span>
<span class="line"><span style="color:#839496;">          }, </span><span style="color:#268BD2;">duration</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">        });</span></span>
<span class="line"><span style="color:#839496;">    });</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  async</span><span style="color:#268BD2;"> start</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#859900;">    while</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">promisedLights</span><span style="color:#839496;">.length) {</span></span>
<span class="line"><span style="color:#859900;">      if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">stopSignal</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">        this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">promisedLights</span><span style="color:#859900;"> =</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#859900;">        break</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">      }</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">      const</span><span style="color:#268BD2;"> light</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">promisedLights</span><span style="color:#839496;">.</span><span style="color:#268BD2;">shift</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#268BD2;">      light</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#839496;"> (</span><span style="color:#859900;">await</span><span style="color:#268BD2;"> light</span><span style="color:#839496;">());</span></span>
<span class="line"><span style="color:#268BD2;">      this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">promisedLights</span><span style="color:#839496;">.</span><span style="color:#268BD2;">push</span><span style="color:#839496;">(</span><span style="color:#268BD2;">light</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#859900;">      continue</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">  stop</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">stopSignal</span><span style="color:#859900;"> =</span><span style="color:#B58900;"> true</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> lights</span><span style="color:#859900;"> =</span><span style="color:#839496;"> [</span></span>
<span class="line"><span style="color:#839496;">  { duration: </span><span style="color:#D33682;">5000</span><span style="color:#839496;">, lighting: </span><span style="color:#268BD2;">red</span><span style="color:#839496;">, color: </span><span style="color:#2AA198;">&#39;red&#39;</span><span style="color:#839496;"> },</span></span>
<span class="line"><span style="color:#839496;">  { duration: </span><span style="color:#D33682;">6000</span><span style="color:#839496;">, lighting: </span><span style="color:#268BD2;">green</span><span style="color:#839496;">, color: </span><span style="color:#2AA198;">&#39;green&#39;</span><span style="color:#839496;"> },</span></span>
<span class="line"><span style="color:#839496;">  { duration: </span><span style="color:#D33682;">1000</span><span style="color:#839496;">, lighting: </span><span style="color:#268BD2;">yellow</span><span style="color:#839496;">, color: </span><span style="color:#2AA198;">&#39;yellow&#39;</span><span style="color:#839496;"> }</span></span>
<span class="line"><span style="color:#839496;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> trafficLight</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> TrafficLight</span><span style="color:#839496;">(</span><span style="color:#268BD2;">lights</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">trafficLight</span><span style="color:#839496;">.</span><span style="color:#268BD2;">start</span><span style="color:#839496;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> trafficLight</span><span style="color:#839496;">.</span><span style="color:#268BD2;">stop</span><span style="color:#839496;">(), </span><span style="color:#D33682;">100000</span><span style="color:#839496;">);</span></span></code></pre></div><ol start="2"><li>实现一个带并发限制的异步调度器 Scheduler，保证同时运行的任务最多有两个</li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> scheduler</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Scheduler</span><span style="color:#839496;">(</span><span style="color:#D33682;">2</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;1&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 1s后输出’1&#39;</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">2</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;2&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 2s后输出’2&#39;</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;3&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 2s后输出’3&#39;</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;4&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 3s后输出’4&#39;</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">start</span><span style="color:#839496;">();</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">class</span><span style="color:#CB4B16;"> Scheduler</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  limit </span><span style="color:#859900;">=</span><span style="color:#D33682;"> 2</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  taskQueue </span><span style="color:#859900;">=</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#839496;">  count </span><span style="color:#859900;">=</span><span style="color:#D33682;"> 0</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  constructor</span><span style="color:#839496;">(limit) {</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">limit</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> limit</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">taskQueue</span><span style="color:#859900;"> =</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">  addTask</span><span style="color:#839496;">(time, value) {</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">taskQueue</span><span style="color:#839496;">.</span><span style="color:#268BD2;">push</span><span style="color:#839496;">(</span></span>
<span class="line"><span style="color:#839496;">      () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span></span>
<span class="line"><span style="color:#859900;">        new</span><span style="color:#859900;"> Promise</span><span style="color:#839496;">((resolve, reject) </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">          setTimeout</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">            console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">value</span><span style="color:#839496;">, </span><span style="color:#859900;">new</span><span style="color:#268BD2;"> Date</span><span style="color:#839496;">().</span><span style="color:#268BD2;">getSeconds</span><span style="color:#839496;">());</span></span>
<span class="line"><span style="color:#268BD2;">            resolve</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">          }, </span><span style="color:#268BD2;">time</span><span style="color:#859900;"> *</span><span style="color:#D33682;"> 1000</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">        })</span></span>
<span class="line"><span style="color:#839496;">    );</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">  start</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">count</span><span style="color:#859900;"> &lt;</span><span style="color:#268BD2;"> this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">limit</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#268BD2;"> this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">taskQueue</span><span style="color:#839496;">.length) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">      const</span><span style="color:#268BD2;"> promiseTask</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">taskQueue</span><span style="color:#839496;">.</span><span style="color:#268BD2;">shift</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#268BD2;">      this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">count</span><span style="color:#859900;">++</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">      promiseTask</span><span style="color:#839496;">().</span><span style="color:#268BD2;">then</span><span style="color:#839496;">(() </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">        this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">count</span><span style="color:#859900;">--</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">        this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">start</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">      });</span></span>
<span class="line"><span style="color:#859900;">      if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">count</span><span style="color:#859900;"> &lt;</span><span style="color:#268BD2;"> this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">limit</span><span style="color:#839496;">) </span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">start</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> scheduler</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Scheduler</span><span style="color:#839496;">(</span><span style="color:#D33682;">2</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;1&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 1s后输出’1&#39;</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">2</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;2&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 2s后输出’2&#39;</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;3&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 2s后输出’3&#39;</span></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addTask</span><span style="color:#839496;">(</span><span style="color:#D33682;">1</span><span style="color:#839496;">, </span><span style="color:#2AA198;">&#39;4&#39;</span><span style="color:#839496;">); </span><span style="color:#586E75;font-style:italic;">// 3s后输出’4&#39;</span></span>
<span class="line"><span style="color:#268BD2;">console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;start&#39;</span><span style="color:#839496;">, </span><span style="color:#859900;">new</span><span style="color:#268BD2;"> Date</span><span style="color:#839496;">().</span><span style="color:#268BD2;">getSeconds</span><span style="color:#839496;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">scheduler</span><span style="color:#839496;">.</span><span style="color:#268BD2;">start</span><span style="color:#839496;">();</span></span></code></pre></div><h3 id="axios-canceltoken-原理" tabindex="-1">axios cancelToken 原理 <a class="header-anchor" href="#axios-canceltoken-原理" aria-label="Permalink to &quot;axios cancelToken 原理&quot;">​</a></h3><p>cancelToken 是 abortController 的自行实现</p><p>XMLHttpRequest 提供了 abort 方法可以中止请求（后端是否接收到请求，取决于中止的阶段）</p><p>axios 中 onCanceled 是真正中止请求的方法，会调用 xhr.abort()且抛出 abort 错误</p><p>cancelToken 和 abortController 实现思路都是发布订阅机制，请求发起时订阅，抛出的 abort 方法调用时，触发订阅过的请求实例内部的 reject</p><button class="n-button n-button--default-type n-button--medium-type" tabindex="0" type="button" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-bezier-ease-out:cubic-bezier(0, 0, .2, 1);--n-ripple-duration:.6s;--n-opacity-disabled:0.5;--n-wave-opacity:0.6;font-weight:400;--n-color:#0000;--n-color-hover:#0000;--n-color-pressed:#0000;--n-color-focus:#0000;--n-color-disabled:#0000;--n-ripple-color:#18a058;--n-text-color:rgb(51, 54, 57);--n-text-color-hover:#36ad6a;--n-text-color-pressed:#0c7a43;--n-text-color-focus:#36ad6a;--n-text-color-disabled:rgb(51, 54, 57);--n-border:1px solid rgb(224, 224, 230);--n-border-hover:1px solid #36ad6a;--n-border-pressed:1px solid #0c7a43;--n-border-focus:1px solid #36ad6a;--n-border-disabled:1px solid rgb(224, 224, 230);--n-width:initial;--n-height:34px;--n-font-size:14px;--n-padding:0 14px;--n-icon-size:18px;--n-icon-margin:6px;--n-border-radius:3px;"><!----><!----><span class="n-button__content">阻止xml请求</span><div aria-hidden="true" class="n-base-wave"></div><div aria-hidden="true" class="n-button__border" style=""></div><div aria-hidden="true" class="n-button__state-border" style=""></div></button><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> xhr</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> XMLHttpRequest</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#268BD2;">xhr</span><span style="color:#839496;">.</span><span style="color:#268BD2;">method</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;GET&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">xhr</span><span style="color:#839496;">.</span><span style="color:#268BD2;">url</span><span style="color:#859900;"> =</span><span style="color:#2AA198;"> &#39;https://slowmo.glitch.me/5000&#39;</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">xhr</span><span style="color:#839496;">.</span><span style="color:#268BD2;">open</span><span style="color:#839496;">(</span><span style="color:#268BD2;">method</span><span style="color:#839496;">, </span><span style="color:#268BD2;">url</span><span style="color:#839496;">, </span><span style="color:#B58900;">true</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">xhr</span><span style="color:#839496;">.</span><span style="color:#268BD2;">send</span><span style="color:#839496;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">// Abort the request at a later stage</span></span>
<span class="line"><span style="color:#268BD2;">abortButton</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addEventListener</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;click&#39;</span><span style="color:#839496;">, </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">  xhr</span><span style="color:#839496;">.</span><span style="color:#268BD2;">abort</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">});</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#268BD2;">request</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">configOrUrl</span><span style="color:#839496;">, </span><span style="color:#268BD2;">config</span><span style="color:#839496;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 合并配置</span></span>
<span class="line"><span style="color:#268BD2;">    config</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> mergeConfig</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">defaults</span><span style="color:#839496;">, </span><span style="color:#268BD2;">config</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 合并请求头信息</span></span>
<span class="line"><span style="color:#268BD2;">    config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">headers</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> AxiosHeaders</span><span style="color:#839496;">.</span><span style="color:#268BD2;">concat</span><span style="color:#839496;">(</span><span style="color:#268BD2;">contextHeaders</span><span style="color:#839496;">, </span><span style="color:#268BD2;">headers</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 请求拦截器链</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#268BD2;"> requestInterceptorChain</span><span style="color:#859900;"> =</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">interceptors</span><span style="color:#839496;">.</span><span style="color:#268BD2;">request</span><span style="color:#839496;">.</span><span style="color:#268BD2;">forEach</span><span style="color:#839496;">(</span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> unshiftRequestInterceptors</span><span style="color:#839496;"> (interceptor) {</span></span>
<span class="line"><span style="color:#268BD2;">      requestInterceptorChain</span><span style="color:#839496;">.</span><span style="color:#268BD2;">unshift</span><span style="color:#839496;">(</span><span style="color:#268BD2;">interceptor</span><span style="color:#839496;">.</span><span style="color:#268BD2;">fulfilled</span><span style="color:#839496;">, </span><span style="color:#268BD2;">interceptor</span><span style="color:#839496;">.</span><span style="color:#268BD2;">rejected</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 响应拦截器链</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#268BD2;"> responseInterceptorChain</span><span style="color:#859900;"> =</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">interceptors</span><span style="color:#839496;">.</span><span style="color:#268BD2;">response</span><span style="color:#839496;">.</span><span style="color:#268BD2;">forEach</span><span style="color:#839496;">(</span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> pushResponseInterceptors</span><span style="color:#839496;"> (interceptor) {</span></span>
<span class="line"><span style="color:#268BD2;">      responseInterceptorChain</span><span style="color:#839496;">.</span><span style="color:#268BD2;">push</span><span style="color:#839496;">(</span><span style="color:#268BD2;">interceptor</span><span style="color:#839496;">.</span><span style="color:#268BD2;">fulfilled</span><span style="color:#839496;">, </span><span style="color:#268BD2;">interceptor</span><span style="color:#839496;">.</span><span style="color:#268BD2;">rejected</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 执行请求拦截器方法</span></span>
<span class="line"><span style="color:#268BD2;">    doRequestInterceptorChain</span><span style="color:#839496;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 判断config.cancelToken.reason，也就是是否被取消</span></span>
<span class="line"><span style="color:#268BD2;">    throwIfCancellationRequested</span><span style="color:#839496;">(</span><span style="color:#268BD2;">config</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 请求体</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    let</span><span style="color:#268BD2;"> requestData</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">data</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 创建一个xhr实例</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    let</span><span style="color:#268BD2;"> request</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> XMLHttpRequest</span><span style="color:#839496;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // open xhr</span></span>
<span class="line"><span style="color:#268BD2;">    request</span><span style="color:#839496;">.</span><span style="color:#268BD2;">open</span><span style="color:#839496;">(</span><span style="color:#268BD2;">config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">method</span><span style="color:#839496;">.</span><span style="color:#268BD2;">toUpperCase</span><span style="color:#839496;">(), </span><span style="color:#268BD2;">buildURL</span><span style="color:#839496;">(</span><span style="color:#268BD2;">fullPath</span><span style="color:#839496;">, </span><span style="color:#268BD2;">config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">params</span><span style="color:#839496;">, </span><span style="color:#268BD2;">config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">paramsSerializer</span><span style="color:#839496;">), </span><span style="color:#B58900;">true</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 请求状态变更处理函数</span></span>
<span class="line"><span style="color:#268BD2;">    request</span><span style="color:#839496;">.</span><span style="color:#268BD2;">onreadystatechange</span><span style="color:#859900;"> =</span><span style="color:#93A1A1;font-weight:bold;"> function</span><span style="color:#268BD2;"> handleLoad</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">        //.....</span></span>
<span class="line"><span style="color:#839496;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 订阅取消事件</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">cancelToken</span><span style="color:#859900;"> ||</span><span style="color:#268BD2;"> config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">signal</span><span style="color:#839496;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">      // 当token取消了，会执行该函数，也就是abort</span></span>
<span class="line"><span style="color:#268BD2;">      onCanceled</span><span style="color:#859900;"> =</span><span style="color:#839496;"> cancel </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">        if</span><span style="color:#839496;"> (</span><span style="color:#859900;">!</span><span style="color:#268BD2;">request</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#859900;">          return</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">        }</span></span>
<span class="line"><span style="color:#268BD2;">        reject</span><span style="color:#839496;">(</span><span style="color:#859900;">!</span><span style="color:#268BD2;">cancel</span><span style="color:#859900;"> ||</span><span style="color:#268BD2;"> cancel</span><span style="color:#839496;">.</span><span style="color:#268BD2;">type</span><span style="color:#859900;"> ?</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> CanceledError</span><span style="color:#839496;">(</span><span style="color:#B58900;">null</span><span style="color:#839496;">, </span><span style="color:#268BD2;">config</span><span style="color:#839496;">, </span><span style="color:#268BD2;">request</span><span style="color:#839496;">) </span><span style="color:#859900;">:</span><span style="color:#268BD2;"> cancel</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#268BD2;">        request</span><span style="color:#839496;">.</span><span style="color:#268BD2;">abort</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#268BD2;">        request</span><span style="color:#859900;"> =</span><span style="color:#B58900;"> null</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">      };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">      // 此处是用cancelToken的订阅取消事件</span></span>
<span class="line"><span style="color:#268BD2;">      config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">cancelToken</span><span style="color:#859900;"> &amp;&amp;</span><span style="color:#268BD2;"> config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">cancelToken</span><span style="color:#839496;">.</span><span style="color:#268BD2;">subscribe</span><span style="color:#839496;">(</span><span style="color:#268BD2;">onCanceled</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">      // 此处是用signal，也就是AbortConrtroller订阅取消事件</span></span>
<span class="line"><span style="color:#859900;">      if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">signal</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">        config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">signal</span><span style="color:#839496;">.</span><span style="color:#268BD2;">aborted</span><span style="color:#859900;"> ?</span><span style="color:#268BD2;"> onCanceled</span><span style="color:#839496;">() </span><span style="color:#859900;">:</span><span style="color:#268BD2;"> config</span><span style="color:#839496;">.</span><span style="color:#268BD2;">signal</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addEventListener</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;abort&#39;</span><span style="color:#839496;">, </span><span style="color:#268BD2;">onCanceled</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">      }</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 真正发送请求</span></span>
<span class="line"><span style="color:#268BD2;">    request</span><span style="color:#839496;">.</span><span style="color:#268BD2;">send</span><span style="color:#839496;">(</span><span style="color:#268BD2;">requestData</span><span style="color:#859900;"> ||</span><span style="color:#B58900;"> null</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 再次判断config.cancelToken.reason，也就是是否被取消</span></span>
<span class="line"><span style="color:#268BD2;">    throwIfCancellationRequested</span><span style="color:#839496;">(</span><span style="color:#268BD2;">config</span><span style="color:#839496;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    // 执行返回拦截器</span></span>
<span class="line"><span style="color:#268BD2;">    doResponseInterceptorChain</span><span style="color:#839496;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><p><a href="https://juejin.cn/post/7284417436752265277" target="_blank" rel="noreferrer">cancelToken 原理</a><a href="https://cloud.tencent.com/developer/article/2030277" target="_blank" rel="noreferrer">abortController 原理</a></p></div></div></main><footer class="VPDocFooter" data-v-3f19d6b0 data-v-9ba61ddb><!--[--><!--]--><div class="edit-info" data-v-9ba61ddb><div class="edit-link" data-v-9ba61ddb><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/front-end/js/FAQ.md" target="_blank" rel="noreferrer" data-v-9ba61ddb><!--[--><span class="vpi-square-pen edit-link-icon" data-v-9ba61ddb></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-9ba61ddb><p class="VPLastUpdated" data-v-9ba61ddb data-v-dce6c4e2>Last Updated: <time datetime="2025-01-18T05:48:33.000Z" data-v-dce6c4e2></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-9ba61ddb><span class="visually-hidden" id="doc-footer-aria-label" data-v-9ba61ddb>Pager</span><div class="pager" data-v-9ba61ddb><!----></div><div class="pager" data-v-9ba61ddb><a class="VPLink link pager-link next" href="/Jarrett-blog/front-end/html/" data-v-9ba61ddb><!--[--><span class="desc" data-v-9ba61ddb>Next page</span><span class="title" data-v-9ba61ddb>HTML</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-ffb09705 data-v-3496d641><div class="container" data-v-3496d641><p class="message" data-v-3496d641>Released under the MIT License.</p><p class="copyright" data-v-3496d641>MIT Licensed | Copyright © 2021-present Jarrett Wang</p></div></footer><!--[--><div class="n-back-top-placeholder" style="display: none" aria-hidden="true" data-v-e044f95b><!----></div><!--]--></div></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"computer-basic_arithmetic_index.md\":\"CzT_rlIp\",\"computer-basic_design-pattern_index.md\":\"rGAEb7kM\",\"computer-basic_internet_index.md\":\"DPUxJmKp\",\"front-end_browser_index.md\":\"Cs27taAQ\",\"front-end_canvas_index.md\":\"CHFjyw0_\",\"front-end_css_index.md\":\"Bcp7l5W1\",\"front-end_git_index.md\":\"CKJu7ueo\",\"front-end_html_index.md\":\"D8ZslFa7\",\"front-end_js_faq.md\":\"D6-DVbE8\",\"front-end_js_index.md\":\"CEXmCnp2\",\"front-end_micro-front_index.md\":\"CvufYgRx\",\"front-end_miniprogram_index.md\":\"D8UiokhN\",\"front-end_nodejs_index.md\":\"C0JariJ-\",\"front-end_ts_faq.md\":\"CcOrCXrk\",\"front-end_ts_index.md\":\"BBKFg3hc\",\"front-end_vue3_diff.md\":\"CCFSPgFi\",\"front-end_vue3_index.md\":\"D9ykJFfH\",\"front-end_vue_index.md\":\"C8etICUo\",\"index.md\":\"bnZHaE_A\",\"knowledge-map.md\":\"BDaTGmYZ\",\"plan_api-test_index.md\":\"CWo9gAea\",\"plan_front-end-infrastructure_index.md\":\"BsPm8t4N\",\"plan_how-to-make-ts-useful_index.md\":\"Dn2DcqHP\",\"plan_micro-fe-communication_index.md\":\"CNpvxoc4\",\"plan_navigation_index.md\":\"w0EYq4v_\",\"practice_leetcode.md\":\"WkMp1Edn\",\"practice_promise.md\":\"BzvcvJpP\",\"resume_index.md\":\"Ds_WKrNd\",\"tools_slides.md\":\"Bzbfs_Cf\",\"web3_index.md\":\"DrWiqKoY\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"🏠 JarrettBlog\",\"titleTemplate\":\"Vite & Vue powered static site generator\",\"description\":\"前端学习笔记\",\"base\":\"/Jarrett-blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Jarrett817/Jarrett-blog\"},{\"icon\":{\"svg\":\"<svg t=\\\"1658975064450\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"14624\\\" width=\\\"500\\\" height=\\\"500\\\"><path d=\\\"M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14625\\\"></path><path d=\\\"M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14626\\\"></path></svg>\"},\"link\":\"https://juejin.cn/user/3940246036687774\"}],\"editLink\":{\"pattern\":\"https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"lastUpdatedText\":\"Last Updated\",\"nav\":[{\"text\":\"📘 前端基础\",\"link\":\"/front-end/html/\",\"activeMatch\":\"^/front-end/\"},{\"text\":\"📚 计算机基础\",\"link\":\"/computer-basic/design-pattern/\",\"activeMatch\":\"^/computer-basic/\"},{\"text\":\"🏹 方案\",\"link\":\"/plan/micro-fe-communication/\",\"activeMatch\":\"^/plan/\"},{\"text\":\"✍ 练习题\",\"link\":\"/practice/leetcode\",\"activeMatch\":\"^/pratice/\"},{\"text\":\"📘 WEB3\",\"link\":\"/web3/\",\"activeMatch\":\"^/web3/\"},{\"text\":\"🔖 简历\",\"link\":\"/resume/index.html\",\"activeMatch\":\"^/resume/\"}],\"sidebar\":[{\"text\":\"前端基础\",\"items\":[{\"text\":\"HTML\",\"link\":\"/front-end/html/\"},{\"text\":\"CSS\",\"link\":\"/front-end/css/\"},{\"text\":\"JS\",\"link\":\"/front-end/js/\"},{\"text\":\"TS\",\"link\":\"/front-end/ts/\"},{\"text\":\"浏览器\",\"link\":\"/front-end/browser/\"},{\"text\":\"vue\",\"link\":\"/front-end/vue/\"},{\"text\":\"vue3\",\"link\":\"/front-end/vue3/\"},{\"text\":\"nodejs\",\"link\":\"/front-end/nodejs/\"},{\"text\":\"git\",\"link\":\"/front-end/git/\"},{\"text\":\"canvas\",\"link\":\"/front-end/canvas/\"},{\"text\":\"微前端\",\"link\":\"/front-end/micro-front/\"},{\"text\":\"小程序\",\"link\":\"/front-end/miniprogram/\"}]},{\"text\":\"计算机基础\",\"items\":[{\"text\":\"设计模式\",\"link\":\"/computer-basic/design-pattern/\"},{\"text\":\"计算机网络\",\"link\":\"/computer-basic/internet/\"},{\"text\":\"数据结构与算法\",\"link\":\"/computer-basic/arithmetic/\"}]},{\"text\":\"方案\",\"items\":[{\"text\":\"多级跳转\",\"link\":\"/plan/navigation/\"},{\"text\":\"微前端下的主子通信\",\"link\":\"/plan/micro-fe-communication/\"},{\"text\":\"接口测试平台\",\"link\":\"/plan/api-test/\"},{\"text\":\"10分钟速通TS\",\"link\":\"/plan/how-to-make-ts-useful/\"},{\"text\":\"前端基建（一）\",\"link\":\"/plan/front-end-infrastructure/\"}]},{\"text\":\"WEB3\",\"items\":[{\"text\":\"新手入门\",\"link\":\"/web3/index\"}]},{\"text\":\"练习题\",\"items\":[{\"text\":\"算法题\",\"link\":\"/practice/leetcode\"},{\"text\":\"Promise\",\"link\":\"/practice/promise\"}]}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"MIT Licensed | Copyright © 2021-present Jarrett Wang\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>