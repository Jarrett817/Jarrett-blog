<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue | ğŸ  JarrettBlog</title>
    <meta name="description" content="å‰ç«¯å­¦ä¹ ç¬”è®°">
    <link rel="stylesheet" href="/Jarrett-blog/assets/style.f2b3dc79.css">
    <link rel="modulepreload" href="/Jarrett-blog/assets/Home.c5e88031.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/reveal.esm.7135e7ce.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/highlight.esm.c7d93732.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/markdown.esm.479aed26.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/app.dff7797b.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/front-end_vue_index.md.0ac73585.lean.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/app.dff7797b.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="twitter:title" content="vue | ğŸ  JarrettBlog">
    <meta property="og:title" content="vue | ğŸ  JarrettBlog">
  </head>
  <body>
    <div id="app"><!--[--><!----><!----><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/Jarrett-blog/" aria-label="ğŸ  JarrettBlog, back to home" data-v-675d8756 data-v-4a583abe><!----> ğŸ  JarrettBlog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/Jarrett-blog/front-end/html/" data-v-b8818f8c>âœï¸ å‰ç«¯å­¦ä¹ ç¬”è®° <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-b8818f8c>â›°ï¸ è®¡ç®—æœºåŸºç¡€ <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/tools/slides" data-v-b8818f8c>ğŸ”§ å·¥å…·åŒ… <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/Jarrett817/Jarrett-blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/Jarrett-blog/front-end/html/" data-v-b8818f8c>âœï¸ å‰ç«¯å­¦ä¹ ç¬”è®° <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-b8818f8c>â›°ï¸ è®¡ç®—æœºåŸºç¡€ <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/tools/slides" data-v-b8818f8c>ğŸ”§ å·¥å…·åŒ… <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/Jarrett817/Jarrett-blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/html/">HTML</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/css/">CSS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/js/">JS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/ts/">TS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/browser/">æµè§ˆå™¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/Jarrett-blog/front-end/vue/">vue</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•é¡µé¢åº”ç”¨">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•é¡µé¢åº”ç”¨</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¼ ç»Ÿçš„ç½‘é¡µåº”ç”¨">ä¼ ç»Ÿçš„ç½‘é¡µåº”ç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å•é¡µé¢åº”ç”¨">å•é¡µé¢åº”ç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å•é¡µé¢åº”ç”¨çš„ä¼˜ç‚¹">å•é¡µé¢åº”ç”¨çš„ä¼˜ç‚¹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å•é¡µé¢åº”ç”¨çš„ç¼ºç‚¹">å•é¡µé¢åº”ç”¨çš„ç¼ºç‚¹</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#vue-æ ¸å¿ƒ">vue æ ¸å¿ƒ</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#vue-çš„å“åº”å¼åŸç†">vue çš„å“åº”å¼åŸç†</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å…³äºå¯¹è±¡">å…³äºå¯¹è±¡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å…³äºæ•°ç»„">å…³äºæ•°ç»„</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç»„ä»¶é—´é€šä¿¡">ç»„ä»¶é—´é€šä¿¡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å…¶ä»–ä¸å¸¸ç”¨çš„æ–¹æ³•">å…¶ä»–ä¸å¸¸ç”¨çš„æ–¹æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#state">State</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getters">Getters</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#mutations">Mutations</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#actions">Actions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#modules">Modules</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#vue-router-æ ¸å¿ƒ">vue-router æ ¸å¿ƒ</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/nodejs/">nodejs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/git/">git</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/front-end/canvas/">canvas</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="vue"><a class="header-anchor" href="#vue" aria-hidden="true">#</a> vue</h1><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•é¡µé¢åº”ç”¨"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•é¡µé¢åº”ç”¨" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•é¡µé¢åº”ç”¨</h2><h3 id="ä¼ ç»Ÿçš„ç½‘é¡µåº”ç”¨"><a class="header-anchor" href="#ä¼ ç»Ÿçš„ç½‘é¡µåº”ç”¨" aria-hidden="true">#</a> ä¼ ç»Ÿçš„ç½‘é¡µåº”ç”¨</h3><hr><p><img src="/Jarrett-blog/assets/browser-server.d25bed38.png" alt=""><img src="/Jarrett-blog/assets/mvc.502c4236.png" alt=""> ä¼ ç»Ÿçš„ç½‘é¡µåº”ç”¨ï¼Œæµè§ˆå™¨ä½œä¸ºå±•ç¤ºå±‚ï¼Œè·¯ç”±å¤„ç†ã€æœåŠ¡è°ƒç”¨ã€é¡µé¢è·³è½¬éƒ½ç”±åç«¯å¤„ç†ï¼Œå³ä¾¿æœ‰ ajaxï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯æ ‡å‡†çš„å•é¡µé¢åº”ç”¨ã€‚ è¿™ç§ç½‘é¡µåº”ç”¨çš„é‡å¿ƒéƒ½åœ¨åç«¯ï¼Œåç«¯å‡ ä¹åŒ…æ½äº† MVCï¼Œæµè§ˆå™¨ç«¯ä»…æ˜¯ä¸€ä¸ªå±•ç¤ºå±‚</p><h3 id="å•é¡µé¢åº”ç”¨"><a class="header-anchor" href="#å•é¡µé¢åº”ç”¨" aria-hidden="true">#</a> å•é¡µé¢åº”ç”¨</h3><hr><p>MVC å‰ç½®åˆ°æµè§ˆå™¨ç«¯ï¼Œå‰ç«¯è´Ÿè´£è·¯ç”±ï¼Œå„ä¸ªå°çš„ç»„ä»¶ç»„æˆé¡µé¢ï¼Œåœ¨è·¯ç”±å˜åŒ–æ—¶ï¼Œä¸åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œä»…ä»…æ˜¯ç»„åˆå°çš„ç»„ä»¶ï¼Œæ›¿æ¢å˜åŒ–éƒ¨åˆ†ã€‚ç”šè‡³æ•°æ®å±‚ä¹Ÿåœ¨å‰ç«¯ï¼Œå‰ç«¯å°è£…åç«¯ APIï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œåç«¯åªæ˜¯æä¾›æ“ä½œæ•°æ®åº“çš„ API</p><h3 id="å•é¡µé¢åº”ç”¨çš„ä¼˜ç‚¹"><a class="header-anchor" href="#å•é¡µé¢åº”ç”¨çš„ä¼˜ç‚¹" aria-hidden="true">#</a> å•é¡µé¢åº”ç”¨çš„ä¼˜ç‚¹</h3><hr><ul><li>ä¸åˆ·æ–°é¡µé¢ï¼Œç›¸åº”å¿«é€Ÿï¼Œæå‡äº†ç”¨æˆ·ä½“éªŒ</li><li>å‰ç«¯ç»„ä»¶åŒ–ï¼Œä»£ç çš„ç»“æ„å’Œç»„ç»‡æ›´åŠ è§„åˆ’åŒ–ï¼Œåˆ©äºä¿®æ”¹å’Œç»´æŠ¤ï¼Œå¹¶ä¸”å¯ä»¥å¼€å‘ç‹¬ç«‹çš„ç»„ä»¶åº“ï¼Œå¼€å‘æ—¶ç›´æ¥ä½¿ç”¨å³å¯ï¼Œæå¤§æé«˜äº†å¼€å‘æ•ˆç‡</li><li>API å…±äº«ï¼Œå¦‚æœè¦å¤šç«¯å¼€å‘ï¼ˆæµè§ˆå™¨ã€å¾®ä¿¡ã€å®‰å“ã€iosï¼‰ï¼Œåªéœ€è¦ä¿®æ”¹å®¹æ˜“å˜åŒ–çš„å‰ç«¯ UIï¼Œå¯¹åç«¯ API çš„è°ƒç”¨åŸºæœ¬æ˜¯ç›¸åŒçš„ï¼Œæå¤§çš„é™ä½äº†å¼€å‘æˆæœ¬</li></ul><h3 id="å•é¡µé¢åº”ç”¨çš„ç¼ºç‚¹"><a class="header-anchor" href="#å•é¡µé¢åº”ç”¨çš„ç¼ºç‚¹" aria-hidden="true">#</a> å•é¡µé¢åº”ç”¨çš„ç¼ºç‚¹</h3><hr><ul><li>é¦–æ¬¡åŠ è½½å¤§é‡èµ„æº</li><li>æé«˜äº†å‰ç«¯çš„æŠ€æœ¯é—¨æ§›</li><li>ä¸åˆ©äº SEOï¼Œå› ä¸ºæ•°æ®åœ¨å‰ç«¯æ¸²æŸ“ï¼ŒåŠ¨æ€çš„æ•°æ®ä¸åˆ©äºçˆ¬è™«æŠ“å–</li><li>ä¸æ–¹ä¾¿ä½¿ç”¨æµè§ˆå™¨è‡ªå¸¦çš„å¯¼èˆª</li></ul><hr><h2 id="vue-æ ¸å¿ƒ"><a class="header-anchor" href="#vue-æ ¸å¿ƒ" aria-hidden="true">#</a> vue æ ¸å¿ƒ</h2><h3 id="vue-çš„å“åº”å¼åŸç†"><a class="header-anchor" href="#vue-çš„å“åº”å¼åŸç†" aria-hidden="true">#</a> vue çš„å“åº”å¼åŸç†</h3><p>vue2 é€šè¿‡æ•°æ®åŠ«æŒ â• å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°æ•°æ®å“åº”å¼ ä¸»è¦ç”±<code>Object.defineProperty</code>ã€<code>Observer</code>ã€<code>Dep</code>ã€<code>Watcher</code>å®ç° <img src="/Jarrett-blog/assets/vue-reactive.f79dd221.png" alt=""></p><h4 id="observerã€dep-å’Œ-watcher"><a class="header-anchor" href="#observerã€dep-å’Œ-watcher" aria-hidden="true">#</a> Observerã€Dep å’Œ Watcher</h4><hr><p>Vue å°è£…äº†ä¸€ä¸ª<code>defineReactive</code>æ–¹æ³•æ¥å¯¹æ•°æ®è¿›è¡Œ<code>defineProperty</code>æ”¹é€ </p><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token operator">:</span> Object<span class="token punctuation">,</span> key<span class="token operator">:</span> string<span class="token punctuation">,</span> val<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">reactiveGetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//æ·»åŠ ä¾èµ–</span>
      dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">reactiveSetter</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//å‘å¸ƒ</span>
      dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
å¤åˆ¶ä»£ç <span class="token punctuation">;</span>
</code></pre></div><p><code>defineReactive</code>æ–¹æ³•åœ¨æ”¹é€ æ•°æ®çš„æ—¶å€™ï¼Œæ•°æ® get æ—¶è¿›è¡Œä¾èµ–çš„æ·»åŠ ï¼Œset æ—¶å‘å¸ƒ</p><div class="language-javascript"><pre><code><span class="token keyword">class</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> any<span class="token punctuation">;</span>
  dep<span class="token operator">:</span> Dep<span class="token punctuation">;</span>

  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
    <span class="token keyword">this</span><span class="token punctuation">.</span>dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//éå†å‡ºæ¥æŒ¨ä¸ªç”¨Observerå»newä¸€ä¸‹</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
       <span class="token comment">//æ˜¯å¯¹è±¡å°±éå†ï¼ŒæŒ¨ä¸ªè¿›è¡Œå“åº”å¼æ”¹é€ æ”¹é€ </span>
       <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token function">defineReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
å¤åˆ¶ä»£ç 
</code></pre></div><p><code>Observer</code>çš„ä½œç”¨å…¶å®å°±æ˜¯<strong>æ•°æ®åŠ«æŒ</strong>ï¼Œè€Œ Vue è®©æ¯ä¸€ä¸ª<strong>å“åº”å¼</strong>çš„æ•°æ®éƒ½æ˜¯è¢«<code>Observer</code>æ”¹é€ è¿‡çš„</p><div class="language-javascript"><pre><code><span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> target<span class="token operator">:</span> <span class="token operator">?</span>Watcher<span class="token punctuation">;</span>
  id<span class="token operator">:</span> number<span class="token punctuation">;</span>
  subs<span class="token operator">:</span> Array<span class="token operator">&lt;</span>Watcher<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> uid<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">addSub</span><span class="token punctuation">(</span><span class="token parameter">sub<span class="token operator">:</span> Watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">removeSub</span><span class="token punctuation">(</span><span class="token parameter">sub<span class="token operator">:</span> Watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">,</span> sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Dep<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">addDep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> subs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> subs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      subs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
å¤åˆ¶ä»£ç <span class="token punctuation">;</span>
</code></pre></div><p><code>dep</code>é‡Œç»´æŠ¤ä¸€ä¸ª<code>watcher</code>åˆ—è¡¨<code>subs</code>ï¼Œå¹¶ä¸”æœ‰<code>depend</code>å’Œ<code>notify</code>æ–¹æ³•ï¼Œèƒ½æ·»åŠ <code>watcher</code>å¹¶ä¸”å‘å¸ƒé€šçŸ¥ï¼Œåœ¨ get æ•°æ®æ—¶ï¼Œæ·»åŠ <code>watcher</code>åˆ°<code>subs</code>ï¼Œ<code>set</code>æ•°æ®æ—¶ï¼Œéå†<code>subs</code>å¹¶æŒ¨ä¸ªæ‰§è¡Œæ›´æ–° <code>Watcher</code>Â  ç±»ï¼Œ<code>addDep</code>æ·»åŠ ä¾èµ–ï¼ˆè®¢é˜…ï¼‰ï¼Œå¹¶å…·æœ‰<code>update</code>æ–¹æ³•</p><div class="language-javascript"><pre><code><span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
  <span class="token function">addDep</span> <span class="token punctuation">(</span><span class="token parameter">dep<span class="token operator">:</span> Dep</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> dep<span class="token punctuation">.</span>id
    <span class="token comment">//æ·»åŠ ä¾èµ–ï¼ˆè®¢é˜…æ“ä½œï¼‰</span>
    dep<span class="token punctuation">.</span><span class="token function">addSub</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">update</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">run</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>active<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//æ‰§è¡Œæ•°æ®æ›´æ–°</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
å¤åˆ¶ä»£ç 
</code></pre></div><h2 id="å…³äºå¯¹è±¡"><a class="header-anchor" href="#å…³äºå¯¹è±¡" aria-hidden="true">#</a> å…³äºå¯¹è±¡</h2><p>vue æ— æ³•æ£€æµ‹å±æ€§çš„æ·»åŠ æˆ–ç§»é™¤ï¼Œå¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹ï¼ŒVue ä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼ propertyã€‚ä½†æ˜¯å¯ä»¥ç”¨<code>Vue.set(object,propertyName,value)</code> å¦‚æœè¦ä¸ºå·²æœ‰å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–°çš„ propertyï¼Œåº”è¯¥ç”¨åŸå¯¹è±¡ä¸è¦æ··åˆè¿›å»çš„å¯¹è±¡çš„ property ä¸€èµ·åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><div class="language-javascript"><pre><code><span class="token comment">// ä»£æ›¿ `Object.assign(this.someObject, { a: 1, b: 2 })`</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>someObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>someObject<span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å…³äºæ•°ç»„"><a class="header-anchor" href="#å…³äºæ•°ç»„" aria-hidden="true">#</a> å…³äºæ•°ç»„</h2><p>æ•°æ®ä¹Ÿä¸æ˜¯å“åº”å¼çš„ï¼Œç›´æ¥ä¿®æ”¹æ•°ç»„å†…æŸé¡¹å’Œä¿®æ”¹æ•°ç»„çš„é•¿åº¦éƒ½æ˜¯æ— æ³•è¢«æ£€æµ‹çš„ã€‚ä¹Ÿéœ€è¦ç”¨ Vue.set</p><div class="language-javascript"><pre><code><span class="token comment">// Vue.set</span>
Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>items<span class="token punctuation">,</span> indexOfItem<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>vue æ”¹å†™äº†æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•ï¼Œç”¨è¿™äº›æ–¹æ³•æ“ä½œæ•°ç»„èƒ½ä½¿æ•°ç»„è¢«æ£€æµ‹åˆ°</p><ul><li><code>push()</code></li><li><code>pop()</code></li><li><code>shift()</code></li><li><code>unshift()</code></li><li><code>splice()</code></li><li><code>sort()</code></li><li><code>reverse()</code></li></ul><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ç”Ÿå‘½å‘¨æœŸ</h2><p>ç”Ÿå‘½å‘¨æœŸé’©å­è‡ªåŠ¨ç»‘å®š this ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨å°–å¤´å‡½æ•°ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº†çˆ¶ä¸Šä¸‹æ–‡ï¼Œè€Œä¸æ˜¯å½“å‰å®ä¾‹</p><table><thead><tr><th>ç”Ÿå‘½å‘¨æœŸé’©å­</th><th>è°ƒç”¨æ—¶æœº</th></tr></thead><tbody><tr><td>beforeCreate</td><td>å®ä¾‹åˆå§‹åŒ–åï¼Œè¿˜æ²¡æœ‰è¿›è¡Œæ•°æ®è§‚æµ‹ (data observer) å’Œ event/watcher äº‹ä»¶é…ç½®</td></tr><tr><td>created</td><td>å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åç«‹å³è°ƒç”¨ï¼Œå·²ç»å®Œæˆæ•°æ®è§‚æµ‹ (data observer)ï¼Œproperty å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch/event äº‹ä»¶å›è°ƒï¼Œä½†è¿˜æ²¡æœ‰æŒ‚è½½ domï¼Œæ‰€ä»¥$el ä¸å¯ç”¨</td></tr><tr><td>beforeMount</td><td>æŒ‚è½½å¼€å§‹ä¹‹å‰ï¼Œrender é¦–æ¬¡è¢«è°ƒç”¨</td></tr><tr><td>mounted</td><td>æŒ‚è½½å®Œæ¯•æ—¶è°ƒç”¨ï¼Œæ­¤æ—¶æ ¹å®ä¾‹å·²ç»æŒ‚è½½åˆ°äº†æŸä¸ªæ–‡æ¡£å…ƒç´ ä¸Šã€‚ä½†æ˜¯ä¸ä¿è¯æ‰€æœ‰å­ç»„å»ºä¹Ÿéƒ½è¢«æŒ‚è½½ï¼Œç”¨ vm.$nextTick å¯ç­‰åˆ°æ•´ä¸ªè§†å›¾æ¸²æŸ“å®Œæ¯•</td></tr><tr><td>beforeUpdate</td><td>æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯æ˜¯åœ¨è™šæ‹Ÿ dom æ‰“è¡¥ä¸ä¹‹å‰</td></tr><tr><td>updated</td><td>è™šæ‹Ÿ dom é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸å®Œæ¯•åè°ƒç”¨ã€‚</td></tr><tr><td>updated ä¸ä¼šä¿è¯æ‰€æœ‰çš„å­ç»„ä»¶ä¸€èµ·è¢«é‡ç»˜ï¼Œå¦‚æœè¦ç­‰åˆ°æ•´ä¸ªè§†å›¾é‡ç»˜å®Œæ¯•ï¼Œéœ€è¦ä½¿ç”¨ vm.$nextTick</td><td></td></tr><tr><td>activated</td><td>kepp-alive ç¼“å­˜çš„ç»„å»ºæ¿€æ´»æ—¶è°ƒç”¨</td></tr><tr><td>deactivated</td><td>keep-alive çš„ç»„ä»¶åœç”¨æ—¶è°ƒç”¨</td></tr><tr><td>beforeDestroy</td><td>å®ä¾‹é”€æ¯å‰è°ƒç”¨ï¼Œè¿™ä¸€æ­¥é‡Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨</td></tr><tr><td>destroyed</td><td>å®ä¾‹é”€æ¯åè°ƒç”¨</td></tr></tbody></table><h2 id="ç»„ä»¶é—´é€šä¿¡"><a class="header-anchor" href="#ç»„ä»¶é—´é€šä¿¡" aria-hidden="true">#</a> ç»„ä»¶é—´é€šä¿¡</h2><ol><li>çˆ¶ä¼ å­ç”¨ prop</li><li>å­å‘çˆ¶ç”¨$onå’Œ$emitï¼Œå­ç»„ä»¶é€šçŸ¥çˆ¶ç»„ä»¶æ”¹å€¼</li><li>å…„å¼Ÿç»„ä»¶ä¼ å€¼ï¼Œé€šè¿‡çˆ¶ç»„ä»¶ä¼ é€’æˆ–è€…ç”¨ eventBus</li></ol><p>ä¸¾ä¾‹ï¼š</p><div class="language-javascript"><pre><code><span class="token comment">//Bus.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//Child1.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;clickHandle&quot;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Event <span class="token keyword">from</span> <span class="token string">&#39;../bus&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;Child1&#39;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      n<span class="token operator">:</span><span class="token number">100</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">clickHandle</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;update:count&#39;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
 <span class="token operator">...</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

<span class="token comment">//Child2.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>è¿™æ˜¯æ–°çš„n<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>n<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> Event <span class="token keyword">from</span> <span class="token string">&#39;../bus&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;Child2&#39;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">{</span>
      n<span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      Event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;update:count&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>n<span class="token operator">=</span>n
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
 <span class="token operator">...</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre></div><ol start="4"><li>ä»»æ„ç»„ä»¶ä¼ å€¼ï¼Œç”¨ vuex</li></ol><h2 id="å…¶ä»–ä¸å¸¸ç”¨çš„æ–¹æ³•"><a class="header-anchor" href="#å…¶ä»–ä¸å¸¸ç”¨çš„æ–¹æ³•" aria-hidden="true">#</a> å…¶ä»–ä¸å¸¸ç”¨çš„æ–¹æ³•</h2><ol><li>æ‰€æœ‰å­ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡<code>$root</code>è·å–æ ¹å®ä¾‹ã€‚</li></ol><p>å¯ä»¥ç›´æ¥<code>this.$root.xxx</code>è¯»å†™æ ¹ç»„ä»¶çš„æ•°æ®ã€è®¡ç®—å±æ€§å’Œæ–¹æ³•ã€‚ å¯ä»¥å°†æ ¹å®ä¾‹ä½œä¸ºä¸€ä¸ªå…¨å±€ store æ¥ä½¿ç”¨ åªé€‚ç”¨äºå°å‹ demoï¼Œå¤§å‹é¡¹ç›®ç›´æ¥ç”¨ vuex</p><ol start="2"><li>å­ç»„ä»¶å¯ä»¥é€šè¿‡<code>$parent</code>è®¿é—®çˆ¶ç»„ä»¶</li></ol><p>ç”¨æ³•åŒä¸Šï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´ç¨‹åºå¤æ‚æ—¶æ— æ³•å¾—çŸ¥çˆ¶ç»„ä»¶çš„å˜æ›´æ˜¯ä»å“ªé‡Œå‘èµ·çš„</p><ol start="3"><li>ä¾èµ–æ³¨å…¥ provide/inject</li></ol><p>ç¥–å…ˆç»„ä»¶æä¾›ä¸€ä¸ªæ•°æ®/æ–¹æ³•</p><div class="language-javascript"><pre><code><span class="token function-variable function">provide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    getMap<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>getMap
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»»æ„çš„åä»£è·å–è¿™ä¸ªæ•°æ®/æ–¹æ³•</p><div class="language-javascript"><pre><code>inject<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;getMap&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>ref è®¿é—®å­ç»„ä»¶å®ä¾‹æˆ–å­å…ƒç´ </li></ol><p>ä½ å¯ä»¥é€šè¿‡ <code>ref</code> è¿™ä¸ª attribute ä¸ºå­ç»„ä»¶èµ‹äºˆä¸€ä¸ª ID å¼•ç”¨ã€‚ä¾‹å¦‚ï¼š</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-input</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>usernameInput<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-input</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç°åœ¨åœ¨ä½ å·²ç»å®šä¹‰äº†è¿™ä¸ª <code>ref</code> çš„ç»„ä»¶é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š</p><div class="language-vue"><pre><code>this.$refs.usernameInput
</code></pre></div><p><code>$refs</code>åªä¼šåœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆåç”Ÿæ•ˆï¼Œå¹¶ä¸”ä¸æ˜¯å“åº”å¼çš„ã€‚é¿å…åœ¨æ¨¡ç‰ˆæˆ–è®¡ç®—å±æ€§ä¸­è®¿é—®$refs</p><h1 id="vuex-æ ¸å¿ƒ"><a class="header-anchor" href="#vuex-æ ¸å¿ƒ" aria-hidden="true">#</a> vuex æ ¸å¿ƒ</h1><p>vuex æ˜¯ä¸€ä¸ªå•ä¸€çŠ¶æ€æ ‘ï¼Œä½œä¸ºä¸€ä¸ªå”¯ä¸€æ•°æ®æºä½¿ç”¨</p><h2 id="state"><a class="header-anchor" href="#state" aria-hidden="true">#</a> State</h2><p>å…¨å±€æ³¨å†Œ</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// æŠŠ store å¯¹è±¡æä¾›ç»™ â€œstoreâ€ é€‰é¡¹ï¼Œè¿™å¯ä»¥æŠŠ store çš„å®ä¾‹æ³¨å…¥æ‰€æœ‰çš„å­ç»„ä»¶</span>
  store<span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> Counter <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div class=&quot;app&quot;&gt;
      &lt;counter&gt;&lt;/counter&gt;
    &lt;/div&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é€šè¿‡ this.$store è®¿é—®ï¼Œvuex ä¹Ÿæ˜¯å“åº”å¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è®¡ç®—å±æ€§è·å– vuex ä¸­çš„æ•°æ®</p><h2 id="getters"><a class="header-anchor" href="#getters" aria-hidden="true">#</a> Getters</h2><p>vuex çš„è®¡ç®—å±æ€§ æ¥å— state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    todos<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">&#39;...&#39;</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">&#39;...&#39;</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">doneTodos</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åŒæ ·é€šè¿‡ <code>this.$store.getters.xxx</code>Â  è®¿é—® getter ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å®ç°ç»™ getter ä¼ å‚ï¼Œä½†æ˜¯è¿™æ ·ä¼šæ¯æ¬¡éƒ½è¿›è¡Œè°ƒç”¨ï¼Œè€Œä¸ä¼šç¼“å­˜ç»“æœ</p><h2 id="mutations"><a class="header-anchor" href="#mutations" aria-hidden="true">#</a> Mutations</h2><p>æ³¨å†Œä¸€ä¸ªäº‹ä»¶ï¼Œæ¥æ”¶ state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å˜æ›´çŠ¶æ€</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å­ç»„ä»¶ä¸­è§¦å‘è¿™ä¸ªäº‹ä»¶</p><div class="language-javascript"><pre><code>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;increment&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¯ä»¥ä¼ å‚æ•°ï¼Œvuex é‡Œå«åš <strong>è½½è· payload</strong>Â  å¯ä»¥ä¼ å•ä¸ªå‚æ•°ï¼Œæ¨èç”¨å¯¹è±¡çš„å½¢å¼æäº¤è½½è·</p><div class="language-javascript"><pre><code><span class="token comment">// ...</span>
mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>count <span class="token operator">+=</span> payload<span class="token punctuation">.</span>amount
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript"><pre><code>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;increment&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  amount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ­¤å¤–ï¼Œè¿˜æœ‰å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼ï¼Œå…¶ä»–ç”¨æ³•ç…§å¸¸</p><div class="language-javascript"><pre><code>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">&#39;increment&#39;</span><span class="token punctuation">,</span>
  amount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>mutation éœ€è¦éµå®ˆ Vue çš„å“åº”è§„åˆ™</p><h2 id="actions"><a class="header-anchor" href="#actions" aria-hidden="true">#</a> Actions</h2><p>mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°ï¼Œå¼‚æ­¥å›è°ƒä¸­è¿›è¡Œçš„çŠ¶æ€çš„æ”¹å˜éƒ½æ˜¯ä¸å¯è¿½è¸ªçš„ Action ç±»ä¼¼äº mutationï¼Œä½†æ˜¯</p><ul><li>Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€</li><li>Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œ</li></ul><div class="language-javascript"><pre><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;increment&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="modules"><a class="header-anchor" href="#modules" aria-hidden="true">#</a> Modules</h2><p>ä¸ºäº†é¿å… store å¤ªè¿‡è‡ƒè‚¿ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†å‰²æ¨¡å—</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> moduleB <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> moduleA<span class="token punctuation">,</span>
    b<span class="token operator">:</span> moduleB
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="vue-router-æ ¸å¿ƒ"><a class="header-anchor" href="#vue-router-æ ¸å¿ƒ" aria-hidden="true">#</a> vue-router æ ¸å¿ƒ</h2></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/Jarrett817/Jarrett-blog/edit/master/docs/front-end/vue/index.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>Last Updated:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/Jarrett-blog/front-end/browser/" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>æµè§ˆå™¨</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/Jarrett-blog/front-end/nodejs/" data-v-38ede35f><span class="text" data-v-38ede35f>nodejs</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"f16df007\",\"tools_slides.md\":\"ac1cf889\",\"computer-basic_design-pattern_index.md\":\"5e203ae1\",\"computer-basic_fucking-arithmetic_index.md\":\"9900c140\",\"computer-basic_internet_index.md\":\"653ef890\",\"front-end_browser_index.md\":\"6475c368\",\"front-end_canvas_index.md\":\"315c87cc\",\"front-end_css_index.md\":\"9161c7b8\",\"front-end_git_index.md\":\"572d444d\",\"front-end_html_index.md\":\"1857da16\",\"front-end_js_index.md\":\"a922a2f2\",\"front-end_nodejs_index.md\":\"76e10abc\",\"front-end_ts_index.md\":\"d8e36f4c\",\"front-end_vue_index.md\":\"0ac73585\"}")</script>
    <script type="module" async src="/Jarrett-blog/assets/app.dff7797b.js"></script>
  </body>
</html>