<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>vue | Vite &amp; Vue powered static site generator</title>
    <meta name="description" content="前端学习笔记">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/Jarrett-blog/assets/style.BxYy6MEi.css" as="style">
    <link rel="preload stylesheet" href="/Jarrett-blog/vp-icons.css" as="style">
    
    <script type="module" src="/Jarrett-blog/assets/app.hQUXQupM.js"></script>
    <link rel="preload" href="/Jarrett-blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/theme.DXZAdxYV.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/framework.C1rSk1pR.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/front-end_vue_index.md.C8etICUo.lean.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="icon" href="/Jarrett-blogfavicon.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="n-config-provider" data-v-e044f95b><!----><div class="Layout" data-v-e044f95b data-v-ffb09705><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d2b01218></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-d2b01218> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ffb09705 data-v-d5086a5b><div class="VPNavBar has-sidebar top" data-v-d5086a5b data-v-b1dc54d2><div class="wrapper" data-v-b1dc54d2><div class="container" data-v-b1dc54d2><div class="title" data-v-b1dc54d2><div class="VPNavBarTitle has-sidebar" data-v-b1dc54d2 data-v-896105e3><a class="title" href="/Jarrett-blog/" data-v-896105e3><!--[--><!--]--><!----><span data-v-896105e3>🏠 JarrettBlog</span><!--[--><!--]--></a></div></div><div class="content" data-v-b1dc54d2><div class="content-body" data-v-b1dc54d2><!--[--><!--]--><div class="VPNavBarSearch search" data-v-b1dc54d2><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b1dc54d2 data-v-3f5a4db7><span id="main-nav-aria-label" class="visually-hidden" data-v-3f5a4db7> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/Jarrett-blog/front-end/html/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📘 前端基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/computer-basic/design-pattern/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📚 计算机基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/plan/micro-fe-communication/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>🏹 方案</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/practice/leetcode.html" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>✍ 练习题</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/web3/" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>📘 WEB3</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/resume/index.html" tabindex="0" data-v-3f5a4db7 data-v-e9668232><!--[--><span data-v-e9668232>🔖 简历</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-b1dc54d2 data-v-d84b2752><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d84b2752 data-v-56ef3316 data-v-80588559><span class="check" data-v-80588559><span class="icon" data-v-80588559><!--[--><span class="vpi-sun sun" data-v-56ef3316></span><span class="vpi-moon moon" data-v-56ef3316></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b1dc54d2 data-v-29e6104c data-v-4603dc2a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b1dc54d2 data-v-a7f6646a data-v-17857302><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-17857302><span class="vpi-more-horizontal icon" data-v-17857302></span></button><div class="menu" data-v-17857302><div class="VPMenu" data-v-17857302 data-v-d932083f><!----><!--[--><!--[--><!----><div class="group" data-v-a7f6646a><div class="item appearance" data-v-a7f6646a><p class="label" data-v-a7f6646a>Appearance</p><div class="appearance-action" data-v-a7f6646a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-a7f6646a data-v-56ef3316 data-v-80588559><span class="check" data-v-80588559><span class="icon" data-v-80588559><!--[--><span class="vpi-sun sun" data-v-56ef3316></span><span class="vpi-moon moon" data-v-56ef3316></span><!--]--></span></span></button></div></div></div><div class="group" data-v-a7f6646a><div class="item social-links" data-v-a7f6646a><div class="VPSocialLinks social-links-list" data-v-a7f6646a data-v-4603dc2a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-4603dc2a data-v-1f6bfc78><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b1dc54d2 data-v-04046837><span class="container" data-v-04046837><span class="top" data-v-04046837></span><span class="middle" data-v-04046837></span><span class="bottom" data-v-04046837></span></span></button></div></div></div></div><div class="divider" data-v-b1dc54d2><div class="divider-line" data-v-b1dc54d2></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-ffb09705 data-v-a5ffc52e><div class="container" data-v-a5ffc52e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a5ffc52e><span class="vpi-align-left menu-icon" data-v-a5ffc52e></span><span class="menu-text" data-v-a5ffc52e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a5ffc52e data-v-98eee035><button data-v-98eee035>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-ffb09705 data-v-ae7e1657><div class="curtain" data-v-ae7e1657></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-ae7e1657><span class="visually-hidden" id="sidebar-aria-label" data-v-ae7e1657> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0 has-active" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>前端基础</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/html/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>HTML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/css/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>CSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/js/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>JS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/ts/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>TS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/browser/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>浏览器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue3/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>vue3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/nodejs/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>nodejs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/git/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/canvas/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>canvas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/micro-front/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>微前端</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/front-end/miniprogram/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>小程序</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>计算机基础</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>设计模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/internet/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>计算机网络</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/arithmetic/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>数据结构与算法</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>方案</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/navigation/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>多级跳转</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/micro-fe-communication/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>微前端下的主子通信</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/api-test/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>接口测试平台</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/how-to-make-ts-useful/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>10分钟速通TS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/plan/front-end-infrastructure/" data-v-ef850759><!--[--><p class="text" data-v-ef850759>前端基建（一）</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>WEB3</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/web3/index.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>新手入门</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-6412ece5><section class="VPSidebarItem level-0" data-v-6412ece5 data-v-ef850759><div class="item" role="button" tabindex="0" data-v-ef850759><div class="indicator" data-v-ef850759></div><h2 class="text" data-v-ef850759>练习题</h2><!----></div><div class="items" data-v-ef850759><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/practice/leetcode.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>算法题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ef850759 data-v-ef850759><div class="item" data-v-ef850759><div class="indicator" data-v-ef850759></div><a class="VPLink link link" href="/Jarrett-blog/practice/promise.html" data-v-ef850759><!--[--><p class="text" data-v-ef850759>Promise</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ffb09705 data-v-30f0ecb7><div class="VPDoc has-sidebar has-aside" data-v-30f0ecb7 data-v-3f19d6b0><!--[--><!--]--><div class="container" data-v-3f19d6b0><div class="aside" data-v-3f19d6b0><div class="aside-curtain" data-v-3f19d6b0></div><div class="aside-container" data-v-3f19d6b0><div class="aside-content" data-v-3f19d6b0><div class="VPDocAside" data-v-3f19d6b0 data-v-e53cbd78><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-e53cbd78 data-v-c3513957><div class="content" data-v-c3513957><div class="outline-marker" data-v-c3513957></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c3513957>On this page</div><ul class="VPDocOutlineItem root" data-v-c3513957 data-v-d1d61fd6><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-e53cbd78></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><button class="n-button n-button--info-type n-button--large-type" tabindex="0" type="button" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-bezier-ease-out:cubic-bezier(0, 0, .2, 1);--n-ripple-duration:.6s;--n-opacity-disabled:0.5;--n-wave-opacity:0.6;font-weight:400;--n-color:#0000;--n-color-hover:rgba(46, 51, 56, .09);--n-color-pressed:rgba(46, 51, 56, .13);--n-color-focus:rgba(46, 51, 56, .09);--n-color-disabled:#0000;--n-ripple-color:#0000;--n-text-color:#2080f0;--n-text-color-hover:#2080f0;--n-text-color-pressed:#2080f0;--n-text-color-focus:#2080f0;--n-text-color-disabled:#2080f0;--n-border:1px solid #2080f0;--n-border-hover:1px solid #4098fc;--n-border-pressed:1px solid #1060c9;--n-border-focus:1px solid #4098fc;--n-border-disabled:1px solid #2080f0;--n-width:40px;--n-height:40px;--n-font-size:15px;--n-padding:initial;--n-icon-size:20px;--n-icon-margin:6px;--n-border-radius:40px;" data-v-e044f95b><!----><span class="n-button__icon" style="margin:0;"><div class="n-icon-slot" role="none"><i role="img" class="n-icon" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-color:;--n-opacity:;font-size:20px;" data-v-e044f95b><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" data-v-e044f95b><path d="M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20z" fill="currentColor"></path><path d="M14 19.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z" fill="currentColor"></path></svg></i></div></span><!----><div aria-hidden="true" class="n-base-wave"></div><!----><!----></button><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-3f19d6b0><div class="content-container" data-v-3f19d6b0><!--[--><!--]--><main class="main" data-v-3f19d6b0><div style="position:relative;" class="vp-doc _Jarrett-blog_front-end_vue_" data-v-3f19d6b0><div><h1 id="vue" tabindex="-1">vue <a class="header-anchor" href="#vue" aria-label="Permalink to &quot;vue&quot;">​</a></h1><h2 id="为什么要使用单页面应用" tabindex="-1">为什么要使用单页面应用 <a class="header-anchor" href="#为什么要使用单页面应用" aria-label="Permalink to &quot;为什么要使用单页面应用&quot;">​</a></h2><h3 id="传统的网页应用" tabindex="-1">传统的网页应用 <a class="header-anchor" href="#传统的网页应用" aria-label="Permalink to &quot;传统的网页应用&quot;">​</a></h3><hr><p><img src="/Jarrett-blog/assets/browser-server.BxT1A0WC.png" alt="" loading="lazy"><img src="/Jarrett-blog/assets/mvc.ud7o28uy.png" alt="" loading="lazy"> 传统的网页应用，浏览器作为展示层，路由处理、服务调用、页面跳转都由后端处理，即便有 ajax，但也并不是标准的单页面应用。 这种网页应用的重心都在后端，后端几乎包揽了 MVC，浏览器端仅是一个展示层</p><h3 id="单页面应用" tabindex="-1">单页面应用 <a class="header-anchor" href="#单页面应用" aria-label="Permalink to &quot;单页面应用&quot;">​</a></h3><hr><p>MVC 前置到浏览器端，前端负责路由，各个小的组件组成页面，在路由变化时，不刷新整个页面，仅仅是组合小的组件，替换变化部分。甚至数据层也在前端，前端封装后端 API，这种情况下，后端只是提供操作数据库的 API</p><h3 id="单页面应用的优点" tabindex="-1">单页面应用的优点 <a class="header-anchor" href="#单页面应用的优点" aria-label="Permalink to &quot;单页面应用的优点&quot;">​</a></h3><hr><ul><li>不刷新页面，相应快速，提升了用户体验</li><li>前端组件化，代码的结构和组织更加规划化，利于修改和维护，并且可以开发独立的组件库，开发时直接使用即可，极大提高了开发效率</li><li>API 共享，如果要多端开发（浏览器、微信、安卓、ios），只需要修改容易变化的前端 UI，对后端 API 的调用基本是相同的，极大的降低了开发成本</li></ul><h3 id="单页面应用的缺点" tabindex="-1">单页面应用的缺点 <a class="header-anchor" href="#单页面应用的缺点" aria-label="Permalink to &quot;单页面应用的缺点&quot;">​</a></h3><hr><ul><li>首次加载大量资源</li><li>提高了前端的技术门槛</li><li>不利于 SEO，因为数据在前端渲染，动态的数据不利于爬虫抓取</li><li>不方便使用浏览器自带的导航</li></ul><hr><h2 id="vue-核心" tabindex="-1">vue 核心 <a class="header-anchor" href="#vue-核心" aria-label="Permalink to &quot;vue 核心&quot;">​</a></h2><h3 id="vue-的响应式原理" tabindex="-1">vue 的响应式原理 <a class="header-anchor" href="#vue-的响应式原理" aria-label="Permalink to &quot;vue 的响应式原理&quot;">​</a></h3><p>vue2 通过数据劫持 ➕ 发布订阅模式实现数据响应式 主要由<code>Object.defineProperty</code>、<code>Observer</code>、<code>Dep</code>、<code>Watcher</code>实现 <img src="/Jarrett-blog/assets/vue-reactive.CL3PIzG6.png" alt="" loading="lazy"></p><h4 id="observer、dep-和-watcher" tabindex="-1">Observer、Dep 和 Watcher <a class="header-anchor" href="#observer、dep-和-watcher" aria-label="Permalink to &quot;Observer、Dep 和 Watcher&quot;">​</a></h4><hr><p>Vue 封装了一个<code>defineReactive</code>方法来对数据进行<code>defineProperty</code>改造</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> defineReactive</span><span style="color:#839496;">(obj</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Object</span><span style="color:#839496;">, key</span><span style="color:#859900;">:</span><span style="color:#859900;"> string</span><span style="color:#839496;">, val</span><span style="color:#859900;">:</span><span style="color:#859900;"> any</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">  Object</span><span style="color:#839496;">.</span><span style="color:#268BD2;">defineProperty</span><span style="color:#839496;">(</span><span style="color:#268BD2;">obj</span><span style="color:#839496;">, </span><span style="color:#268BD2;">key</span><span style="color:#839496;">, {</span></span>
<span class="line"><span style="color:#268BD2;">    get</span><span style="color:#839496;">: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> reactiveGetter</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">      //添加依赖</span></span>
<span class="line"><span style="color:#268BD2;">      dep</span><span style="color:#839496;">.</span><span style="color:#268BD2;">depend</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#268BD2;"> value</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">    set</span><span style="color:#839496;">: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#268BD2;"> reactiveSetter</span><span style="color:#839496;">(newVal) {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">      //发布</span></span>
<span class="line"><span style="color:#268BD2;">      dep</span><span style="color:#839496;">.</span><span style="color:#268BD2;">notify</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  });</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#839496;">复制代码;</span></span></code></pre></div><p><code>defineReactive</code>方法在改造数据的时候，数据 get 时进行依赖的添加，set 时发布</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">class</span><span style="color:#CB4B16;"> Observer</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  value</span><span style="color:#859900;">:</span><span style="color:#859900;"> any</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  dep</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Dep</span><span style="color:#839496;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  constructor</span><span style="color:#839496;"> (value</span><span style="color:#859900;">:</span><span style="color:#859900;"> any</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">value</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> value</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">dep</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Dep</span><span style="color:#839496;">()</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;">(</span><span style="color:#268BD2;">Array</span><span style="color:#839496;">.</span><span style="color:#268BD2;">isArray</span><span style="color:#839496;">(</span><span style="color:#268BD2;">value</span><span style="color:#839496;">)){</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">      //遍历出来挨个用Observer去new一下</span></span>
<span class="line"><span style="color:#839496;">    }</span><span style="color:#859900;">else</span><span style="color:#839496;">{</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">       //是对象就遍历，挨个进行响应式改造改造</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">       const</span><span style="color:#268BD2;"> keys</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> Object</span><span style="color:#839496;">.</span><span style="color:#268BD2;">keys</span><span style="color:#839496;">(</span><span style="color:#268BD2;">obj</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#859900;">       for</span><span style="color:#839496;"> (</span><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> i</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 0</span><span style="color:#839496;">; </span><span style="color:#268BD2;">i</span><span style="color:#859900;"> &lt;</span><span style="color:#268BD2;"> keys</span><span style="color:#839496;">.length; </span><span style="color:#268BD2;">i</span><span style="color:#859900;">++</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">           defineReactive</span><span style="color:#839496;">(</span><span style="color:#268BD2;">obj</span><span style="color:#839496;">, </span><span style="color:#268BD2;">keys</span><span style="color:#839496;">[</span><span style="color:#268BD2;">i</span><span style="color:#839496;">])</span></span>
<span class="line"><span style="color:#839496;">       }</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;"> }</span></span>
<span class="line"><span style="color:#839496;">复制代码</span></span></code></pre></div><p><code>Observer</code>的作用其实就是<strong>数据劫持</strong>，而 Vue 让每一个<strong>响应式</strong>的数据都是被<code>Observer</code>改造过的</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">class</span><span style="color:#CB4B16;"> Dep</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  static</span><span style="color:#839496;"> target</span><span style="color:#859900;">:</span><span style="color:#859900;"> ?</span><span style="color:#CB4B16;">Watcher</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  id</span><span style="color:#859900;">:</span><span style="color:#859900;"> number</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  subs</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Array</span><span style="color:#839496;">&lt;</span><span style="color:#CB4B16;">Watcher</span><span style="color:#839496;">&gt;;</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">  constructor</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">id</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> uid</span><span style="color:#859900;">++</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">subs</span><span style="color:#859900;"> =</span><span style="color:#839496;"> [];</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#268BD2;">  addSub</span><span style="color:#839496;">(sub</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Watcher</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">    this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">subs</span><span style="color:#839496;">.</span><span style="color:#268BD2;">push</span><span style="color:#839496;">(</span><span style="color:#268BD2;">sub</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#268BD2;">  removeSub</span><span style="color:#839496;">(sub</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Watcher</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">    remove</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">subs</span><span style="color:#839496;">, </span><span style="color:#268BD2;">sub</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#268BD2;">  depend</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">Dep</span><span style="color:#839496;">.</span><span style="color:#268BD2;">target</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">      Dep</span><span style="color:#839496;">.</span><span style="color:#268BD2;">target</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addDep</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#268BD2;">  notify</span><span style="color:#839496;">() {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#268BD2;"> subs</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">subs</span><span style="color:#839496;">.</span><span style="color:#268BD2;">slice</span><span style="color:#839496;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">    for</span><span style="color:#839496;"> (</span><span style="color:#93A1A1;font-weight:bold;">let</span><span style="color:#268BD2;"> i</span><span style="color:#859900;"> =</span><span style="color:#D33682;"> 0</span><span style="color:#839496;">, </span><span style="color:#268BD2;">l</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> subs</span><span style="color:#839496;">.length; </span><span style="color:#268BD2;">i</span><span style="color:#859900;"> &lt;</span><span style="color:#268BD2;"> l</span><span style="color:#839496;">; </span><span style="color:#268BD2;">i</span><span style="color:#859900;">++</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">      subs</span><span style="color:#839496;">[</span><span style="color:#268BD2;">i</span><span style="color:#839496;">].</span><span style="color:#268BD2;">update</span><span style="color:#839496;">();</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#839496;">复制代码;</span></span></code></pre></div><p><code>dep</code>里维护一个<code>watcher</code>列表<code>subs</code>，并且有<code>depend</code>和<code>notify</code>方法，能添加<code>watcher</code>并且发布通知，在 get 数据时，添加<code>watcher</code>到<code>subs</code>，<code>set</code>数据时，遍历<code>subs</code>并挨个执行更新 <code>Watcher</code>  类，<code>addDep</code>添加依赖（订阅），并具有<code>update</code>方法</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">class</span><span style="color:#CB4B16;"> Watcher</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  addDep</span><span style="color:#839496;"> (dep</span><span style="color:#859900;">:</span><span style="color:#CB4B16;"> Dep</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">    const</span><span style="color:#268BD2;"> id</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> dep</span><span style="color:#839496;">.</span><span style="color:#268BD2;">id</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">    //添加依赖（订阅操作）</span></span>
<span class="line"><span style="color:#268BD2;">    dep</span><span style="color:#839496;">.</span><span style="color:#268BD2;">addSub</span><span style="color:#839496;">(</span><span style="color:#268BD2;">this</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#268BD2;">  update</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">      this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">run</span><span style="color:#839496;">()</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#268BD2;">  run</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#859900;">    if</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">active</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">       //执行数据更新</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">复制代码</span></span></code></pre></div><h2 id="关于对象" tabindex="-1">关于对象 <a class="header-anchor" href="#关于对象" aria-label="Permalink to &quot;关于对象&quot;">​</a></h2><p>vue 无法检测属性的添加或移除，对于已经创建的实例，Vue 不允许动态添加根级别的响应式 property。但是可以用<code>Vue.set(object,propertyName,value)</code> 如果要为已有对象赋值多个新的 property，应该用原对象与要混合进去的对象的 property 一起创建一个新的对象。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;font-style:italic;">// 代替 `Object.assign(this.someObject, { a: 1, b: 2 })`</span></span>
<span class="line"><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">someObject</span><span style="color:#859900;"> =</span><span style="color:#268BD2;"> Object</span><span style="color:#839496;">.</span><span style="color:#268BD2;">assign</span><span style="color:#839496;">({}, </span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">someObject</span><span style="color:#839496;">, { a: </span><span style="color:#D33682;">1</span><span style="color:#839496;">, b: </span><span style="color:#D33682;">2</span><span style="color:#839496;"> });</span></span></code></pre></div><h2 id="关于数组" tabindex="-1">关于数组 <a class="header-anchor" href="#关于数组" aria-label="Permalink to &quot;关于数组&quot;">​</a></h2><p>数据也不是响应式的，直接修改数组内某项和修改数组的长度都是无法被检测的。也需要用 Vue.set</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;font-style:italic;">// Vue.set</span></span>
<span class="line"><span style="color:#268BD2;">Vue</span><span style="color:#839496;">.</span><span style="color:#268BD2;">set</span><span style="color:#839496;">(</span><span style="color:#268BD2;">vm</span><span style="color:#839496;">.</span><span style="color:#268BD2;">items</span><span style="color:#839496;">, </span><span style="color:#268BD2;">indexOfItem</span><span style="color:#839496;">, </span><span style="color:#268BD2;">newValue</span><span style="color:#839496;">);</span></span></code></pre></div><p>vue 改写了数组的常用方法，用这些方法操作数组能使数组被检测到</p><ul><li><code>push()</code></li><li><code>pop()</code></li><li><code>shift()</code></li><li><code>unshift()</code></li><li><code>splice()</code></li><li><code>sort()</code></li><li><code>reverse()</code></li></ul><h2 id="生命周期" tabindex="-1">生命周期 <a class="header-anchor" href="#生命周期" aria-label="Permalink to &quot;生命周期&quot;">​</a></h2><p>生命周期钩子自动绑定 this 上下文，所以不能用尖头函数，因为箭头函数绑定了父上下文，而不是当前实例</p><table tabindex="0"><thead><tr><th>生命周期钩子</th><th>调用时机</th></tr></thead><tbody><tr><td>beforeCreate</td><td>实例初始化后，还没有进行数据观测 (data observer) 和 event/watcher 事件配置</td></tr><tr><td>created</td><td>实例创建完成之后立即调用，已经完成数据观测 (data observer)，property 和方法的运算，watch/event 事件回调，但还没有挂载 dom，所以$el 不可用</td></tr><tr><td>beforeMount</td><td>挂载开始之前，render 首次被调用</td></tr><tr><td>mounted</td><td>挂载完毕时调用，此时根实例已经挂载到了某个文档元素上。但是不保证所有子组建也都被挂载，用 vm.$nextTick 可等到整个视图渲染完毕</td></tr><tr><td>beforeUpdate</td><td>数据更新时调用，但是是在虚拟 dom 打补丁之前</td></tr><tr><td>updated</td><td>虚拟 dom 重新渲染和打补丁完毕后调用。</td></tr><tr><td>updated 不会保证所有的子组件一起被重绘，如果要等到整个视图重绘完毕，需要使用 vm.$nextTick</td><td></td></tr><tr><td>activated</td><td>kepp-alive 缓存的组建激活时调用</td></tr><tr><td>deactivated</td><td>keep-alive 的组件停用时调用</td></tr><tr><td>beforeDestroy</td><td>实例销毁前调用，这一步里实例仍然完全可用</td></tr><tr><td>destroyed</td><td>实例销毁后调用</td></tr></tbody></table><h2 id="组件间通信" tabindex="-1">组件间通信 <a class="header-anchor" href="#组件间通信" aria-label="Permalink to &quot;组件间通信&quot;">​</a></h2><ol><li>父传子用 prop</li><li>子向父用$on和$emit，子组件通知父组件改值</li><li>兄弟组件传值，通过父组件传递或者用 eventBus</li></ol><p>举例：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;font-style:italic;">//Bus.js</span></span>
<span class="line"><span style="color:#859900;">import</span><span style="color:#268BD2;"> Vue</span><span style="color:#859900;"> from</span><span style="color:#2AA198;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#859900;">export</span><span style="color:#859900;"> default</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Vue</span><span style="color:#839496;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">//Child1.vue</span></span>
<span class="line"><span style="color:#586E75;">&lt;</span><span style="color:#268BD2;">template</span><span style="color:#586E75;">&gt;</span></span>
<span class="line"><span style="color:#586E75;">    &lt;</span><span style="color:#268BD2;">button</span><span style="color:#DC322F;"> @click=&quot;clickHandle&quot;&gt;</span><span style="color:#DC322F;"> {</span><span style="color:#839496;">{</span><span style="color:#268BD2;">n</span><span style="color:#839496;">}</span><span style="color:#DC322F;">}&lt;/button&gt;</span></span>
<span class="line"><span style="color:#DC322F;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#DC322F;">&lt;script&gt;</span></span>
<span class="line"><span style="color:#93A1A1;">import</span><span style="color:#93A1A1;"> Event</span><span style="color:#93A1A1;"> from</span><span style="color:#2AA198;"> &#39;../bus&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;">export</span><span style="color:#93A1A1;"> default</span><span style="color:#DC322F;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  name</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&#39;Child1&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#268BD2;">  data</span><span style="color:#839496;">(){</span></span>
<span class="line"><span style="color:#839496;">    return{</span></span>
<span class="line"><span style="color:#839496;">      n:</span><span style="color:#D33682;">100</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  },</span></span>
<span class="line"><span style="color:#268BD2;">  methods</span><span style="color:#839496;">: {</span></span>
<span class="line"><span style="color:#268BD2;">    clickHandle</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#268BD2;">      Event</span><span style="color:#839496;">.</span><span style="color:#268BD2;">$emit</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;update:count&#39;</span><span style="color:#839496;">,</span><span style="color:#268BD2;">n</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#DC322F;">}</span></span>
<span class="line"><span style="color:#DC322F;">&lt;/script&gt;</span></span>
<span class="line"><span style="color:#DC322F;">&lt;style&gt;</span></span>
<span class="line"><span style="color:#DC322F;"> ...</span></span>
<span class="line"><span style="color:#DC322F;">&lt;/style&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#586E75;font-style:italic;">//Child2.vue</span></span>
<span class="line"><span style="color:#DC322F;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#DC322F;">    &lt;p&gt;这是新的n:{{n}}&lt;/p&gt;</span></span>
<span class="line"><span style="color:#DC322F;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#DC322F;">&lt;script&gt;</span></span>
<span class="line"><span style="color:#93A1A1;">import</span><span style="color:#93A1A1;"> Event</span><span style="color:#93A1A1;"> from</span><span style="color:#2AA198;"> &#39;../bus&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#93A1A1;">export</span><span style="color:#93A1A1;"> default</span><span style="color:#DC322F;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  name</span><span style="color:#839496;">: </span><span style="color:#2AA198;">&#39;Child2&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#268BD2;">  data</span><span style="color:#839496;">(){</span></span>
<span class="line"><span style="color:#839496;">    return{</span></span>
<span class="line"><span style="color:#839496;">      n:</span><span style="color:#D33682;">0</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#268BD2;">  created</span><span style="color:#839496;">(){</span></span>
<span class="line"><span style="color:#839496;">      Event.$on(</span><span style="color:#2AA198;">&#39;update:count&#39;</span><span style="color:#839496;">,(n)=&gt;{</span></span>
<span class="line"><span style="color:#268BD2;">        console</span><span style="color:#839496;">.</span><span style="color:#268BD2;">log</span><span style="color:#839496;">(</span><span style="color:#268BD2;">n</span><span style="color:#839496;">)</span></span>
<span class="line"><span style="color:#268BD2;">        this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">n</span><span style="color:#859900;">=</span><span style="color:#268BD2;">n</span></span>
<span class="line"><span style="color:#839496;">      })</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#DC322F;">}</span></span>
<span class="line"><span style="color:#DC322F;">&lt;/script&gt;</span></span>
<span class="line"><span style="color:#DC322F;">&lt;style&gt;</span></span>
<span class="line"><span style="color:#DC322F;"> ...</span></span>
<span class="line"><span style="color:#DC322F;">&lt;/style&gt;</span></span></code></pre></div><ol start="4"><li>任意组件传值，用 vuex</li></ol><h2 id="其他不常用的方法" tabindex="-1">其他不常用的方法 <a class="header-anchor" href="#其他不常用的方法" aria-label="Permalink to &quot;其他不常用的方法&quot;">​</a></h2><ol><li>所有子组件都可以通过<code>$root</code>获取根实例。</li></ol><p>可以直接<code>this.$root.xxx</code>读写根组件的数据、计算属性和方法。 可以将根实例作为一个全局 store 来使用 只适用于小型 demo，大型项目直接用 vuex</p><ol start="2"><li>子组件可以通过<code>$parent</code>访问父组件</li></ol><p>用法同上，但是不推荐使用，因为这样会导致程序复杂时无法得知父组件的变更是从哪里发起的</p><ol start="3"><li>依赖注入 provide/inject</li></ol><p>祖先组件提供一个数据/方法</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#839496;">provide: </span><span style="color:#93A1A1;font-weight:bold;">function</span><span style="color:#839496;"> () {</span></span>
<span class="line"><span style="color:#859900;">  return</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    getMap: </span><span style="color:#268BD2;">this</span><span style="color:#839496;">.</span><span style="color:#268BD2;">getMap</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><p>任意的后代获取这个数据/方法</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#839496;">inject: [</span><span style="color:#2AA198;">&#39;getMap&#39;</span><span style="color:#839496;">];</span></span></code></pre></div><ol start="4"><li>ref 访问子组件实例或子元素</li></ol><p>你可以通过 <code>ref</code> 这个 attribute 为子组件赋予一个 ID 引用。例如：</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;">&lt;</span><span style="color:#268BD2;">base-input</span><span style="color:#93A1A1;"> ref</span><span style="color:#839496;">=</span><span style="color:#2AA198;">&quot;usernameInput&quot;</span><span style="color:#586E75;">&gt;&lt;/</span><span style="color:#268BD2;">base-input</span><span style="color:#586E75;">&gt;</span></span></code></pre></div><p>现在在你已经定义了这个 <code>ref</code> 的组件里，你可以使用：</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#839496;">this.$refs.usernameInput</span></span></code></pre></div><p><code>$refs</code>只会在组件渲染完成后生效，并且不是响应式的。避免在模版或计算属性中访问$refs</p><h2 id="vuex-核心" tabindex="-1">vuex 核心 <a class="header-anchor" href="#vuex-核心" aria-label="Permalink to &quot;vuex 核心&quot;">​</a></h2><p>vuex 是一个单一状态树，作为一个唯一数据源使用</p><h3 id="state" tabindex="-1">State <a class="header-anchor" href="#state" aria-label="Permalink to &quot;State&quot;">​</a></h3><p>全局注册</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> app</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Vue</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">  el: </span><span style="color:#2AA198;">&#39;#app&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">  // 把 store 对象提供给 “store” 选项，这可以把 store 的实例注入所有的子组件</span></span>
<span class="line"><span style="color:#268BD2;">  store</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  components: { </span><span style="color:#268BD2;">Counter</span><span style="color:#839496;"> },</span></span>
<span class="line"><span style="color:#839496;">  template: </span><span style="color:#2AA198;">`</span></span>
<span class="line"><span style="color:#2AA198;">    &lt;div class=&quot;app&quot;&gt;</span></span>
<span class="line"><span style="color:#2AA198;">      &lt;counter&gt;&lt;/counter&gt;</span></span>
<span class="line"><span style="color:#2AA198;">    &lt;/div&gt;</span></span>
<span class="line"><span style="color:#2AA198;">  `</span></span>
<span class="line"><span style="color:#839496;">});</span></span></code></pre></div><p>通过 this.$store 访问，vuex 也是响应式的，我们可以用计算属性获取 vuex 中的数据</p><h3 id="getters" tabindex="-1">Getters <a class="header-anchor" href="#getters" aria-label="Permalink to &quot;Getters&quot;">​</a></h3><p>vuex 的计算属性 接受 state 作为第一个参数</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> store</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Vuex</span><span style="color:#839496;">.</span><span style="color:#268BD2;">Store</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">  state: {</span></span>
<span class="line"><span style="color:#839496;">    todos: [</span></span>
<span class="line"><span style="color:#839496;">      { id: </span><span style="color:#D33682;">1</span><span style="color:#839496;">, text: </span><span style="color:#2AA198;">&#39;...&#39;</span><span style="color:#839496;">, done: </span><span style="color:#B58900;">true</span><span style="color:#839496;"> },</span></span>
<span class="line"><span style="color:#839496;">      { id: </span><span style="color:#D33682;">2</span><span style="color:#839496;">, text: </span><span style="color:#2AA198;">&#39;...&#39;</span><span style="color:#839496;">, done: </span><span style="color:#B58900;">false</span><span style="color:#839496;"> }</span></span>
<span class="line"><span style="color:#839496;">    ]</span></span>
<span class="line"><span style="color:#839496;">  },</span></span>
<span class="line"><span style="color:#839496;">  getters: {</span></span>
<span class="line"><span style="color:#268BD2;">    doneTodos</span><span style="color:#839496;">: state </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#859900;">      return</span><span style="color:#268BD2;"> state</span><span style="color:#839496;">.</span><span style="color:#268BD2;">todos</span><span style="color:#839496;">.</span><span style="color:#268BD2;">filter</span><span style="color:#839496;">(todo </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#268BD2;"> todo</span><span style="color:#839496;">.</span><span style="color:#268BD2;">done</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">});</span></span></code></pre></div><p>同样通过 <code>this.$store.getters.xxx</code>  访问 getter 也可以返回一个函数，可以实现给 getter 传参，但是这样会每次都进行调用，而不会缓存结果</p><h3 id="mutations" tabindex="-1">Mutations <a class="header-anchor" href="#mutations" aria-label="Permalink to &quot;Mutations&quot;">​</a></h3><p>注册一个事件，接收 state 作为第一个参数</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> store</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Vuex</span><span style="color:#839496;">.</span><span style="color:#268BD2;">Store</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">  state: {</span></span>
<span class="line"><span style="color:#839496;">    count: </span><span style="color:#D33682;">1</span></span>
<span class="line"><span style="color:#839496;">  },</span></span>
<span class="line"><span style="color:#839496;">  mutations: {</span></span>
<span class="line"><span style="color:#268BD2;">    increment</span><span style="color:#839496;">(state) {</span></span>
<span class="line"><span style="color:#586E75;font-style:italic;">      // 变更状态</span></span>
<span class="line"><span style="color:#268BD2;">      state</span><span style="color:#839496;">.</span><span style="color:#268BD2;">count</span><span style="color:#859900;">++</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">});</span></span></code></pre></div><p>子组件中触发这个事件</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#268BD2;">store</span><span style="color:#839496;">.</span><span style="color:#268BD2;">commit</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;increment&#39;</span><span style="color:#839496;">);</span></span></code></pre></div><p>可以传参数，vuex 里叫做 <strong>载荷 payload</strong>  可以传单个参数，推荐用对象的形式提交载荷</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#586E75;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#839496;">mutations: {</span></span>
<span class="line"><span style="color:#268BD2;">  increment</span><span style="color:#839496;"> (</span><span style="color:#268BD2;">state</span><span style="color:#839496;">, </span><span style="color:#268BD2;">payload</span><span style="color:#839496;">) {</span></span>
<span class="line"><span style="color:#268BD2;">    state</span><span style="color:#839496;">.</span><span style="color:#268BD2;">count</span><span style="color:#859900;"> +=</span><span style="color:#268BD2;"> payload</span><span style="color:#839496;">.</span><span style="color:#268BD2;">amount</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#268BD2;">store</span><span style="color:#839496;">.</span><span style="color:#268BD2;">commit</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;increment&#39;</span><span style="color:#839496;">, {</span></span>
<span class="line"><span style="color:#839496;">  amount: </span><span style="color:#D33682;">10</span></span>
<span class="line"><span style="color:#839496;">});</span></span></code></pre></div><p>此外，还有对象风格的提交方式，其他用法照常</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#268BD2;">store</span><span style="color:#839496;">.</span><span style="color:#268BD2;">commit</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">  type: </span><span style="color:#2AA198;">&#39;increment&#39;</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">  amount: </span><span style="color:#D33682;">10</span></span>
<span class="line"><span style="color:#839496;">});</span></span></code></pre></div><p>mutation 需要遵守 Vue 的响应规则</p><h3 id="actions" tabindex="-1">Actions <a class="header-anchor" href="#actions" aria-label="Permalink to &quot;Actions&quot;">​</a></h3><p>mutation 必须是同步函数，异步回调中进行的状态的改变都是不可追踪的 Action 类似于 mutation，但是</p><ul><li>Action 提交的是 mutation，而不是直接变更状态</li><li>Action 可以包含任意异步操作</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> store</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Vuex</span><span style="color:#839496;">.</span><span style="color:#268BD2;">Store</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">  state: {</span></span>
<span class="line"><span style="color:#839496;">    count: </span><span style="color:#D33682;">0</span></span>
<span class="line"><span style="color:#839496;">  },</span></span>
<span class="line"><span style="color:#839496;">  mutations: {</span></span>
<span class="line"><span style="color:#268BD2;">    increment</span><span style="color:#839496;">(state) {</span></span>
<span class="line"><span style="color:#268BD2;">      state</span><span style="color:#839496;">.</span><span style="color:#268BD2;">count</span><span style="color:#859900;">++</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  },</span></span>
<span class="line"><span style="color:#839496;">  actions: {</span></span>
<span class="line"><span style="color:#268BD2;">    increment</span><span style="color:#839496;">(context) {</span></span>
<span class="line"><span style="color:#268BD2;">      context</span><span style="color:#839496;">.</span><span style="color:#268BD2;">commit</span><span style="color:#839496;">(</span><span style="color:#2AA198;">&#39;increment&#39;</span><span style="color:#839496;">);</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">});</span></span></code></pre></div><h3 id="modules" tabindex="-1">Modules <a class="header-anchor" href="#modules" aria-label="Permalink to &quot;Modules&quot;">​</a></h3><p>为了避免 store 太过臃肿，我们可以分割模块</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> moduleA</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  state</span><span style="color:#839496;">: () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> ({ </span><span style="color:#859900;">...</span><span style="color:#839496;"> }),</span></span>
<span class="line"><span style="color:#839496;">  mutations: { </span><span style="color:#859900;">...</span><span style="color:#839496;"> },</span></span>
<span class="line"><span style="color:#839496;">  actions: { </span><span style="color:#859900;">...</span><span style="color:#839496;"> },</span></span>
<span class="line"><span style="color:#839496;">  getters: { </span><span style="color:#859900;">...</span><span style="color:#839496;"> }</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> moduleB</span><span style="color:#859900;"> =</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#268BD2;">  state</span><span style="color:#839496;">: () </span><span style="color:#93A1A1;font-weight:bold;">=&gt;</span><span style="color:#839496;"> ({ </span><span style="color:#859900;">...</span><span style="color:#839496;"> }),</span></span>
<span class="line"><span style="color:#839496;">  mutations: { </span><span style="color:#859900;">...</span><span style="color:#839496;"> },</span></span>
<span class="line"><span style="color:#839496;">  actions: { </span><span style="color:#859900;">...</span><span style="color:#839496;"> }</span></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"><span style="color:#93A1A1;font-weight:bold;">const</span><span style="color:#268BD2;"> store</span><span style="color:#859900;"> =</span><span style="color:#859900;"> new</span><span style="color:#268BD2;"> Vuex</span><span style="color:#839496;">.</span><span style="color:#268BD2;">Store</span><span style="color:#839496;">({</span></span>
<span class="line"><span style="color:#839496;">  modules: {</span></span>
<span class="line"><span style="color:#839496;">    a: </span><span style="color:#268BD2;">moduleA</span><span style="color:#839496;">,</span></span>
<span class="line"><span style="color:#839496;">    b: </span><span style="color:#268BD2;">moduleB</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">})</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-3f19d6b0 data-v-9ba61ddb><!--[--><!--]--><div class="edit-info" data-v-9ba61ddb><div class="edit-link" data-v-9ba61ddb><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/front-end/vue/index.md" target="_blank" rel="noreferrer" data-v-9ba61ddb><!--[--><span class="vpi-square-pen edit-link-icon" data-v-9ba61ddb></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-9ba61ddb><p class="VPLastUpdated" data-v-9ba61ddb data-v-dce6c4e2>Last Updated: <time datetime="2025-01-18T05:48:33.000Z" data-v-dce6c4e2></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-9ba61ddb><span class="visually-hidden" id="doc-footer-aria-label" data-v-9ba61ddb>Pager</span><div class="pager" data-v-9ba61ddb><a class="VPLink link pager-link prev" href="/Jarrett-blog/front-end/browser/" data-v-9ba61ddb><!--[--><span class="desc" data-v-9ba61ddb>Previous page</span><span class="title" data-v-9ba61ddb>浏览器</span><!--]--></a></div><div class="pager" data-v-9ba61ddb><a class="VPLink link pager-link next" href="/Jarrett-blog/front-end/vue3/" data-v-9ba61ddb><!--[--><span class="desc" data-v-9ba61ddb>Next page</span><span class="title" data-v-9ba61ddb>vue3</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-ffb09705 data-v-3496d641><div class="container" data-v-3496d641><p class="message" data-v-3496d641>Released under the MIT License.</p><p class="copyright" data-v-3496d641>MIT Licensed | Copyright © 2021-present Jarrett Wang</p></div></footer><!--[--><div class="n-back-top-placeholder" style="display: none" aria-hidden="true" data-v-e044f95b><!----></div><!--]--></div></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"computer-basic_arithmetic_index.md\":\"CzT_rlIp\",\"computer-basic_design-pattern_index.md\":\"rGAEb7kM\",\"computer-basic_internet_index.md\":\"DPUxJmKp\",\"front-end_browser_index.md\":\"Cs27taAQ\",\"front-end_canvas_index.md\":\"CHFjyw0_\",\"front-end_css_index.md\":\"Bcp7l5W1\",\"front-end_git_index.md\":\"CKJu7ueo\",\"front-end_html_index.md\":\"D8ZslFa7\",\"front-end_js_faq.md\":\"D6-DVbE8\",\"front-end_js_index.md\":\"CEXmCnp2\",\"front-end_micro-front_index.md\":\"CvufYgRx\",\"front-end_miniprogram_index.md\":\"D8UiokhN\",\"front-end_nodejs_index.md\":\"C0JariJ-\",\"front-end_ts_faq.md\":\"CcOrCXrk\",\"front-end_ts_index.md\":\"BBKFg3hc\",\"front-end_vue3_diff.md\":\"CCFSPgFi\",\"front-end_vue3_index.md\":\"D9ykJFfH\",\"front-end_vue_index.md\":\"C8etICUo\",\"index.md\":\"bnZHaE_A\",\"knowledge-map.md\":\"BDaTGmYZ\",\"plan_api-test_index.md\":\"CWo9gAea\",\"plan_front-end-infrastructure_index.md\":\"BsPm8t4N\",\"plan_how-to-make-ts-useful_index.md\":\"Dn2DcqHP\",\"plan_micro-fe-communication_index.md\":\"CNpvxoc4\",\"plan_navigation_index.md\":\"w0EYq4v_\",\"practice_leetcode.md\":\"WkMp1Edn\",\"practice_promise.md\":\"BzvcvJpP\",\"resume_index.md\":\"Ds_WKrNd\",\"tools_slides.md\":\"Bzbfs_Cf\",\"web3_index.md\":\"DrWiqKoY\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"🏠 JarrettBlog\",\"titleTemplate\":\"Vite & Vue powered static site generator\",\"description\":\"前端学习笔记\",\"base\":\"/Jarrett-blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Jarrett817/Jarrett-blog\"},{\"icon\":{\"svg\":\"<svg t=\\\"1658975064450\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"14624\\\" width=\\\"500\\\" height=\\\"500\\\"><path d=\\\"M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14625\\\"></path><path d=\\\"M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14626\\\"></path></svg>\"},\"link\":\"https://juejin.cn/user/3940246036687774\"}],\"editLink\":{\"pattern\":\"https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"lastUpdatedText\":\"Last Updated\",\"nav\":[{\"text\":\"📘 前端基础\",\"link\":\"/front-end/html/\",\"activeMatch\":\"^/front-end/\"},{\"text\":\"📚 计算机基础\",\"link\":\"/computer-basic/design-pattern/\",\"activeMatch\":\"^/computer-basic/\"},{\"text\":\"🏹 方案\",\"link\":\"/plan/micro-fe-communication/\",\"activeMatch\":\"^/plan/\"},{\"text\":\"✍ 练习题\",\"link\":\"/practice/leetcode\",\"activeMatch\":\"^/pratice/\"},{\"text\":\"📘 WEB3\",\"link\":\"/web3/\",\"activeMatch\":\"^/web3/\"},{\"text\":\"🔖 简历\",\"link\":\"/resume/index.html\",\"activeMatch\":\"^/resume/\"}],\"sidebar\":[{\"text\":\"前端基础\",\"items\":[{\"text\":\"HTML\",\"link\":\"/front-end/html/\"},{\"text\":\"CSS\",\"link\":\"/front-end/css/\"},{\"text\":\"JS\",\"link\":\"/front-end/js/\"},{\"text\":\"TS\",\"link\":\"/front-end/ts/\"},{\"text\":\"浏览器\",\"link\":\"/front-end/browser/\"},{\"text\":\"vue\",\"link\":\"/front-end/vue/\"},{\"text\":\"vue3\",\"link\":\"/front-end/vue3/\"},{\"text\":\"nodejs\",\"link\":\"/front-end/nodejs/\"},{\"text\":\"git\",\"link\":\"/front-end/git/\"},{\"text\":\"canvas\",\"link\":\"/front-end/canvas/\"},{\"text\":\"微前端\",\"link\":\"/front-end/micro-front/\"},{\"text\":\"小程序\",\"link\":\"/front-end/miniprogram/\"}]},{\"text\":\"计算机基础\",\"items\":[{\"text\":\"设计模式\",\"link\":\"/computer-basic/design-pattern/\"},{\"text\":\"计算机网络\",\"link\":\"/computer-basic/internet/\"},{\"text\":\"数据结构与算法\",\"link\":\"/computer-basic/arithmetic/\"}]},{\"text\":\"方案\",\"items\":[{\"text\":\"多级跳转\",\"link\":\"/plan/navigation/\"},{\"text\":\"微前端下的主子通信\",\"link\":\"/plan/micro-fe-communication/\"},{\"text\":\"接口测试平台\",\"link\":\"/plan/api-test/\"},{\"text\":\"10分钟速通TS\",\"link\":\"/plan/how-to-make-ts-useful/\"},{\"text\":\"前端基建（一）\",\"link\":\"/plan/front-end-infrastructure/\"}]},{\"text\":\"WEB3\",\"items\":[{\"text\":\"新手入门\",\"link\":\"/web3/index\"}]},{\"text\":\"练习题\",\"items\":[{\"text\":\"算法题\",\"link\":\"/practice/leetcode\"},{\"text\":\"Promise\",\"link\":\"/practice/promise\"}]}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"MIT Licensed | Copyright © 2021-present Jarrett Wang\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>