<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>计算机网络 | Vite & Vue powered static site generator</title>
    <meta name="description" content="前端学习笔记">
    <link rel="preload stylesheet" href="/Jarrett-blog/assets/style.92992fd9.css" as="style">
    
    <script type="module" src="/Jarrett-blog/assets/app.ba785255.js"></script>
    <link rel="preload" href="/Jarrett-blog/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/framework.7454da9a.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/theme.4c0ff0bf.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/Button.0ced7b7f.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/Icon.d5a3408a.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/chunks/index.2b544e28.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/computer-basic_internet_index.md.cfaec010.lean.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="icon" href="/Jarrett-blog/favicon.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="n-config-provider" data-v-2c40c5a2><!----><div class="Layout" data-v-2c40c5a2 data-v-58c95b52><!--[--><!--]--><!--[--><span tabindex="-1" data-v-e8b274fe></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-e8b274fe> Skip to content </a><!--]--><!----><header class="VPNav" data-v-58c95b52 data-v-f69b5dc7><div class="VPNavBar has-sidebar" data-v-f69b5dc7 data-v-54ddcb59><div class="container" data-v-54ddcb59><div class="title" data-v-54ddcb59><div class="VPNavBarTitle has-sidebar" data-v-54ddcb59 data-v-11318143><a class="title" href="/Jarrett-blog/" data-v-11318143><!--[--><!--]--><!----><!--[-->🏠 JarrettBlog<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-54ddcb59><div class="curtain" data-v-54ddcb59></div><div class="content-body" data-v-54ddcb59><!--[--><!--]--><div class="VPNavBarSearch search" data-v-54ddcb59><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-54ddcb59 data-v-57d63e38><span id="main-nav-aria-label" class="visually-hidden" data-v-57d63e38>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/front-end/html/" tabindex="0" data-v-57d63e38 data-v-2f57cac5><!--[--><span data-v-2f57cac5>📘 前端基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/Jarrett-blog/computer-basic/design-pattern/" tabindex="0" data-v-57d63e38 data-v-2f57cac5><!--[--><span data-v-2f57cac5>📚 计算机基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/plan/virtual-scroll/" tabindex="0" data-v-57d63e38 data-v-2f57cac5><!--[--><span data-v-2f57cac5>🏹 方案</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/practice/leetcode.html" tabindex="0" data-v-57d63e38 data-v-2f57cac5><!--[--><span data-v-2f57cac5>✍ 练习题</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/web3/" tabindex="0" data-v-57d63e38 data-v-2f57cac5><!--[--><span data-v-2f57cac5>📘 WEB3</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Jarrett-blog/resume/index.html" tabindex="0" data-v-57d63e38 data-v-2f57cac5><!--[--><span data-v-2f57cac5>🔖 简历</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-54ddcb59 data-v-8b92f271><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-8b92f271 data-v-00c4f35a data-v-b4c16123><span class="check" data-v-b4c16123><span class="icon" data-v-b4c16123><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-00c4f35a><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-00c4f35a><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-54ddcb59 data-v-2921980c data-v-735c5bd4><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-735c5bd4 data-v-7575c891><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-735c5bd4 data-v-7575c891><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-54ddcb59 data-v-b783f937 data-v-cc911220><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cc911220><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-cc911220><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-cc911220><div class="VPMenu" data-v-cc911220 data-v-8677731f><!----><!--[--><!--[--><!----><div class="group" data-v-b783f937><div class="item appearance" data-v-b783f937><p class="label" data-v-b783f937>Appearance</p><div class="appearance-action" data-v-b783f937><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-b783f937 data-v-00c4f35a data-v-b4c16123><span class="check" data-v-b4c16123><span class="icon" data-v-b4c16123><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-00c4f35a><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-00c4f35a><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-b783f937><div class="item social-links" data-v-b783f937><div class="VPSocialLinks social-links-list" data-v-b783f937 data-v-735c5bd4><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Jarrett817/Jarrett-blog" aria-label="github" target="_blank" rel="noopener" data-v-735c5bd4 data-v-7575c891><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/3940246036687774" aria-label target="_blank" rel="noopener" data-v-735c5bd4 data-v-7575c891><svg t="1658975064450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14624" width="500" height="500"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" fill="#006CFF" p-id="14625"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" fill="#006CFF" p-id="14626"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-54ddcb59 data-v-da91804f><span class="container" data-v-da91804f><span class="top" data-v-da91804f></span><span class="middle" data-v-da91804f></span><span class="bottom" data-v-da91804f></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-58c95b52 data-v-80dd5196><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-80dd5196><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-80dd5196><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-80dd5196>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-80dd5196 data-v-f7a5b1ef><button data-v-f7a5b1ef>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-58c95b52 data-v-a075122d><div class="curtain" data-v-a075122d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a075122d><span class="visually-hidden" id="sidebar-aria-label" data-v-a075122d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-a075122d><section class="VPSidebarItem level-0" data-v-a075122d data-v-dce6a862><div class="item" role="button" tabindex="0" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><h2 class="text" data-v-dce6a862>前端基础</h2><!----></div><div class="items" data-v-dce6a862><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/html/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>HTML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/css/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>CSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/js/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>JS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/ts/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>TS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/browser/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>浏览器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/vue3/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>vue3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/nodejs/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>nodejs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/git/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/canvas/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>canvas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/front-end/micro-front/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>微前端</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-a075122d><section class="VPSidebarItem level-0 has-active" data-v-a075122d data-v-dce6a862><div class="item" role="button" tabindex="0" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><h2 class="text" data-v-dce6a862>计算机基础</h2><!----></div><div class="items" data-v-dce6a862><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>设计模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/internet/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>计算机网络</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/computer-basic/arithmetic/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>数据结构与算法</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-a075122d><section class="VPSidebarItem level-0" data-v-a075122d data-v-dce6a862><div class="item" role="button" tabindex="0" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><h2 class="text" data-v-dce6a862>方案</h2><!----></div><div class="items" data-v-dce6a862><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/plan/navigation/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>多级跳转</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/plan/micro-fe-communication/" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>微前端下的主子通信</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-a075122d><section class="VPSidebarItem level-0" data-v-a075122d data-v-dce6a862><div class="item" role="button" tabindex="0" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><h2 class="text" data-v-dce6a862>WEB3</h2><!----></div><div class="items" data-v-dce6a862><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/web3/index.html" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>新手入门</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-a075122d><section class="VPSidebarItem level-0" data-v-a075122d data-v-dce6a862><div class="item" role="button" tabindex="0" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><h2 class="text" data-v-dce6a862>练习题</h2><!----></div><div class="items" data-v-dce6a862><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/practice/leetcode.html" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>算法题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dce6a862 data-v-dce6a862><div class="item" data-v-dce6a862><div class="indicator" data-v-dce6a862></div><a class="VPLink link link" href="/Jarrett-blog/practice/promise.html" data-v-dce6a862><!--[--><p class="text" data-v-dce6a862>Promise</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-58c95b52 data-v-92fa0cf9><div class="VPDoc has-sidebar has-aside" data-v-92fa0cf9 data-v-aca46a88><!--[--><!--]--><div class="container" data-v-aca46a88><div class="aside" data-v-aca46a88><div class="aside-curtain" data-v-aca46a88></div><div class="aside-container" data-v-aca46a88><div class="aside-content" data-v-aca46a88><div class="VPDocAside" data-v-aca46a88 data-v-3587d6d9><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3587d6d9 data-v-3634142b><div class="content" data-v-3634142b><div class="outline-marker" data-v-3634142b></div><div class="outline-title" role="heading" aria-level="2" data-v-3634142b>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-3634142b><span class="visually-hidden" id="doc-outline-aria-label" data-v-3634142b> Table of Contents for current page </span><ul class="root" data-v-3634142b data-v-873df6d1><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3587d6d9></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><button class="n-button n-button--info-type n-button--large-type" tabindex="0" type="button" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-bezier-ease-out:cubic-bezier(0, 0, .2, 1);--n-ripple-duration:.6s;--n-opacity-disabled:0.5;--n-wave-opacity:0.6;font-weight:400;--n-color:#0000;--n-color-hover:rgba(46, 51, 56, .09);--n-color-pressed:rgba(46, 51, 56, .13);--n-color-focus:rgba(46, 51, 56, .09);--n-color-disabled:#0000;--n-ripple-color:#0000;--n-text-color:#2080f0;--n-text-color-hover:#2080f0;--n-text-color-pressed:#2080f0;--n-text-color-focus:#2080f0;--n-text-color-disabled:#2080f0;--n-border:1px solid #2080f0;--n-border-hover:1px solid #4098fc;--n-border-pressed:1px solid #1060c9;--n-border-focus:1px solid #4098fc;--n-border-disabled:1px solid #2080f0;--n-width:40px;--n-height:40px;--n-font-size:15px;--n-padding:initial;--n-icon-size:20px;--n-icon-margin:6px;--n-border-radius:40px;" data-v-2c40c5a2><!----><span class="n-button__icon" style="margin:0;"><div class="n-icon-slot" role="none"><i role="img" class="n-icon" style="--n-bezier:cubic-bezier(.4, 0, .2, 1);--n-color:;--n-opacity:;font-size:20px;" data-v-2c40c5a2><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" data-v-2c40c5a2><path d="M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20z" fill="currentColor"></path><path d="M14 19.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z" fill="currentColor"></path></svg></i></div></span><!----><div aria-hidden="true" class="n-base-wave"></div><!----><!----></button><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-aca46a88><div class="content-container" data-v-aca46a88><!--[--><!--]--><!----><main class="main" data-v-aca46a88><div style="position:relative;" class="vp-doc _Jarrett-blog_computer-basic_internet_" data-v-aca46a88><div><h1 id="计算机网络" tabindex="-1">计算机网络 <a class="header-anchor" href="#计算机网络" aria-label="Permalink to &quot;计算机网络&quot;">​</a></h1><h2 id="web-及网络基础" tabindex="-1">web 及网络基础 <a class="header-anchor" href="#web-及网络基础" aria-label="Permalink to &quot;web 及网络基础&quot;">​</a></h2><p>web 使用一种名为 HTTP 的协议作为规范，web 是建立在 http 协议上通信的</p><h3 id="http-的诞生" tabindex="-1">http 的诞生 <a class="header-anchor" href="#http-的诞生" aria-label="Permalink to &quot;http 的诞生&quot;">​</a></h3><p>最初是 Tim·BernersLee 博士提出的借助文档之间相互关联形成的超文本，连成可相互参阅的 WWW 万维网。 有三项构建 WWW 的技术，一是把 SGML 标准通用标记语言作为页面的文本标记语言的 HTML；指定文档所在地址的 URL；作为文档传输协议的 HTTP。WWW 这一名称，是 web 浏览器当年用来浏览超文本的客户端应用程序时的名称。现在则用来表示这一系列的集合，也可简称为 web</p><h3 id="网络基础-tcp-ip" tabindex="-1">网络基础 TCP/IP <a class="header-anchor" href="#网络基础-tcp-ip" aria-label="Permalink to &quot;网络基础 TCP/IP&quot;">​</a></h3><p>通常使用的网络包括互联网都是在 TCP/IP 协议族上运作的。协议是能让计算机与网络设备相互通信的规则。 可以认为 TCP/IP 指的是 TCP 和 IP 这两种协议，也可以认为 TCP/IP 是在 IP 协议的通信过程中，使用到的协议族的统称。 ​</p><p>TCP/IP 协议族里最重要的一点是分成。分为 4 层：应用层、传输层、网络层、数据链路层</p><ul><li>应用层决定了向用户提供应用服务时通信的活动。TCP/IP 协议族内预存了各类通用的应用服务。如 FTP 文件传输协议、DNS 域名系统服务。HTTP 协议也正是处于该层</li><li>传输层对上层应用层提供处于网络连接中的两台计算机之间的数据传输，有 TCP 传输控制协议和 UDP 用户数据报协议</li><li>网络层用来处理在网络上流动的数据包。数据包时网络传输的最小数据单位。该层规定了通过怎样的路径到达对方计算机，并把数据包传送给对方。与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线</li><li>链路层又名数据链路层、网络接口层。用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC 网卡及光纤等物理可见部分。所有硬件上的范畴均在链路层的作用范围之内</li></ul><h4 id="tcp-ip-通信传输流" tabindex="-1">TCP/IP 通信传输流 <a class="header-anchor" href="#tcp-ip-通信传输流" aria-label="Permalink to &quot;TCP/IP 通信传输流&quot;">​</a></h4><p>发送端从应用层往下走，接收端从下往应用层走。</p><p>比如</p><ol><li>首先客户端在应用层发出一个想看某个 web 页面的 http 请求</li><li>接着。为了传输方便，传层层把应用层获取到的数据（http 请求报文）进行分割，并在各个报文上打上标记序号及端口号转发给网络层</li><li>在网络层加上通信目的地的 mac 地址后转发给数据链路层</li><li>接收端的服务器在链路层接受到数据，按序往上层发送，一直到达应用层。当传输到应用层，才算真正接收到客户端发送过来的 HTTP 请求</li></ol><p><img src="/Jarrett-blog/assets/work-flow.7ac4c97b.png" alt="image.png"></p><p>发送端层与层之间传输数据时，每经过一层必定会被打上一个该层所属的首部信息。反之，接收端在层与层之间传输数据时，每经过一层时会把对应的首部消去</p><p><img src="/Jarrett-blog/assets/http-encapsulate.5f43775b.png" alt="image.png"></p><h3 id="ip、tcp-和-dns" tabindex="-1">IP、TCP 和 DNS <a class="header-anchor" href="#ip、tcp-和-dns" aria-label="Permalink to &quot;IP、TCP 和 DNS&quot;">​</a></h3><h4 id="ip-协议" tabindex="-1">IP 协议 <a class="header-anchor" href="#ip-协议" aria-label="Permalink to &quot;IP 协议&quot;">​</a></h4><p>位于网络层，几乎所有使用网络的系统都会用到 IP 协议，IP 和 IP 地址不要混淆，IP 其实是一种协议的名称</p><p>IP 协议的作用是把各种数据包传送给对方。为了切实传输，需要满足两个重要的条件 IP 地址和 MAC 地址。</p><ul><li>IP 地址。指明节点被分配到的地址</li><li>MAC 地址。网卡所属的固定地址</li></ul><p>IP 地址和 MAC 地址可以进行配对，IP 地址可以更换，但是 MAC 地址基本上不会更改</p><p>IP 间的通信依赖 MAC 地址。但是在网络上，通信双方在同一局域网（LAN）内的情况是很少的，通常需要多台计算机和网络设备中转才能连接到对方。中转进行时，会利用下一站中转设备的 MAC 地址来搜索下一个中转目标。这时需要 ARP 协议来解析地址，根据通信方的 IP 地址就可以反查出对应的 MAC 地址</p><p>我们无法全面掌握互联网中的传输情况。因为在到达目标前的中转过程中，那些计算机和路由等网络设备智能获悉很粗略的传输路线。这被称为路由选择（routing），每个计算机或者网络设备掌握的都只是这一条网络传输路线中的某一部分</p><h4 id="tcp-协议" tabindex="-1">TCP 协议 <a class="header-anchor" href="#tcp-协议" aria-label="Permalink to &quot;TCP 协议&quot;">​</a></h4><p>TCP 位于传输层，提供可靠的字节流服务</p><blockquote><p>字节流（ByteStreamService）是为了方便传输，TCP 将大块数据分割成以报文段（segment）为单位的数据包进行管理。所谓“可靠”，是 TCP 协议能够确认数据最终是否送达给对方</p></blockquote><h5 id="如何确保可靠" tabindex="-1">如何确保可靠？ <a class="header-anchor" href="#如何确保可靠" aria-label="Permalink to &quot;如何确保可靠？&quot;">​</a></h5><p>送达目标时，<strong>三次握手（three-way handshaking）</strong></p><p>TCP 一定会确认数据包是否成功送达。握手过程中使用了 TCP 的标志（flag）</p><ul><li>SYN（synchronize）</li><li>ACK（acknowledgement）</li></ul><blockquote><p>具体流程是发送端首先发送一个带 SYN 标志的数据包给对方。接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息，最后发送端再回传一个带 ACK 标志的数据包，表示握手结束。如果握手过程中某个阶段莫名中断，tcp 协议会再次以相同的顺序发送相同的数据包。tcp 还有别的手段来保证通信的可靠性</p></blockquote><h4 id="dns-服务" tabindex="-1">DNS 服务 <a class="header-anchor" href="#dns-服务" aria-label="Permalink to &quot;DNS 服务&quot;">​</a></h4><p>DNS（domain name system）服务和 http 都是位于应用层的协议，提供域名到 ip 地址之间的解析服务</p><p>用户通常搜事用主机名或者域名来访问别人的计算机，而不是直接用 IP 地址访问，是因为 IP 地址是一组纯数字，不好记忆</p><p>但是计算机更擅长处理数字，理解名称是困难的，DNS 正是为了解决这个问题，DNS 协议提供通过域名查找 IP 地址，或者逆向从 IP 地址反查域名的服务</p><h4 id="各种协议和-http-协议的关系" tabindex="-1">各种协议和 HTTP 协议的关系 <a class="header-anchor" href="#各种协议和-http-协议的关系" aria-label="Permalink to &quot;各种协议和 HTTP 协议的关系&quot;">​</a></h4><ol><li>客户端有个域名。先去问应用层 DNS 要 IP 地址</li><li>IP 地址给应用层的 HTTP 协议，生成请求报文</li><li>HTTP 将报文交给 TCP 协议，TCP 分割报文</li><li>IP 协议搜索到对方的地址，配合 TCP，将报文传送给对方</li><li>服务器的 TCP 协议接收到报文段，按序号重组请求报文</li><li>报文交给 HTTP 协议，得到对应的请求内容</li><li>请求的处理结果以 TCP/IP 通信协议再向用户进行回传</li></ol><h3 id="uri-和-url" tabindex="-1">URI 和 URL <a class="header-anchor" href="#uri-和-url" aria-label="Permalink to &quot;URI 和 URL&quot;">​</a></h3><p>URI（UniformResourceIdentifier），是由某个协议方案表示的资源的定位标识符。协议方案是指访问资源所使用的协议类型名称</p><ul><li>Uniform。规定统一的格式方便处理多种不同类型的资源</li><li>Resource。资源的定义是“可标识的任何东西”</li><li>Identifier。表示可标识的对象，也称为标识符</li></ul><p>URI 还包括 ftp、mailto、telnet、file 等，标准的 URI 方案有 30 种左右。</p><p>URI 标识某一互联网资源，而 URL 表示资源的地点，即互联网上所处的位置，URL 是 URI 的子集</p><p>绝对 URI 的格式</p><p><a href="http://user:pass@www.example.jp:80/dir/index.html?uid=1#ch1" target="_blank" rel="noreferrer">http://user:pass@www.example.jp:80/dir/index.html?uid=1#ch1</a></p><p>依次为协议+登录信息+服务器地址+服务器端口号+带层次的文件路径+查询字符串+片段标识符</p><h2 id="http-协议" tabindex="-1">HTTP 协议 <a class="header-anchor" href="#http-协议" aria-label="Permalink to &quot;HTTP 协议&quot;">​</a></h2><p>HTTP 协议用于客户端和服务器之间的通信</p><p>请求访问文本或图像等资源的一端称为客户端，提供资源响应的一端称为服务器端。</p><p>客户端会向服务端发送请求。请求报文包括了请求方法、请求 URI、协议版本、可选的首部字段和内容实体</p><p><img src="/Jarrett-blog/assets/request-makeup.d0f03fc6.png" alt="image.png"></p><p>响应也会有类似的报文</p><h3 id="http-是不保存状态的协议" tabindex="-1">HTTP 是不保存状态的协议 <a class="header-anchor" href="#http-是不保存状态的协议" aria-label="Permalink to &quot;HTTP 是不保存状态的协议&quot;">​</a></h3><p>HTTP 不对请求和响应之间的通信状态进行保存，协议对于发送过的请求和响应都不做持久化处理。这是为了更快地处理大量事务，确保协议的可伸缩性。</p><p>但是，随着 web 发展，有了保存状态的需求，比如登陆状态的保存，为了解决这个问题，引入了<strong>Cookie</strong>技术</p><h3 id="http-方法" tabindex="-1">HTTP 方法 <a class="header-anchor" href="#http-方法" aria-label="Permalink to &quot;HTTP 方法&quot;">​</a></h3><ul><li>GET。请求资源</li><li>POST。传输实体主体，POST 的主要目的并不是获取响应的主体内容</li><li>PUT。传输文件，要求在请求报文的主体中包含文件内容，然后保存到请求 URI 指定的位置。但是由于 HTTP/1.1 的 PUT 方法自身不带验证机制，任何人都可以上传文件，存在安全问题，因此一般不用该方法。如果配合 WEB 应用程序的验证机制，或者采用 REST 架构标准的同类网站，就可能开放该方法</li><li>HEAD。获得报文首部，Content-Length、Content-Type 等等</li><li>DELETE。删除文件，但是同样的，HTTP/1.1 方法本身不带验证机制，所以一般也不用，当配合应用程序的验证机制或者遵守 REST 标准时是可能开放使用的</li><li>OPTIONS。询问支持的方法，查询针对 URI 指定的资源支持的方法。返回 GET、POST、HEAD 等服务器支持的方法</li><li>TRACE。追踪路径，壤 web 服务器将之前的请求通信环回给客户端的方法。发送请求时，max-forward 首部字段中填入一个数值，每经过一个服务器就将该数字减 1，当数值为 0 时，停止传输，最后接收到请求的服务器端则返回状态码 200ok。TRACE 方法可以用来确认连接到目标服务器的过程中发生的一系列操作。但是该方法不常用，且容易引发 XST（Cross-site tracing）跨站追踪。只是能看到 max-length 的数值变化</li><li>CONNECT。要求在与服务器通信时建立隧道，实现用隧道协议进行 TCP 通信，主要使用 SSL 安全套接层和 TLS 传输层安全协议把通信内容加密后经网络隧道传输</li></ul><p><img src="/Jarrett-blog/assets/support-methods.5ce5b407.png" alt="image.png"></p><h3 id="持久连接" tabindex="-1">持久连接 <a class="header-anchor" href="#持久连接" aria-label="Permalink to &quot;持久连接&quot;">​</a></h3><p>HTTP keep-alive 或 HTTP connection reuse</p><p>只要任一端没有明确提出断开连接，则保持 TCP 连接状态</p><p>持久连接的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻服务器负担，使得 http 请求和响应都更快结束，提高了页面显示速度</p><p>HTTP/1.1 中，所有的连接默认都是持久连接，但是 HTTP/1.0 中并未标准化，即便有服务器通过非标准手段实现了持久连接，但也未必可靠，客户端和服务器都要支持持久连接才行</p><h4 id="管线化" tabindex="-1">管线化 <a class="header-anchor" href="#管线化" aria-label="Permalink to &quot;管线化&quot;">​</a></h4><p>管线化可以在不等待响应结束的情况下直接发送下一请求，请求数越多，时间差越明显</p><h3 id="cookie-状态管理" tabindex="-1">Cookie 状态管理 <a class="header-anchor" href="#cookie-状态管理" aria-label="Permalink to &quot;Cookie 状态管理&quot;">​</a></h3><p>无状态协议的优点在于不必保存状态，减少了服务器的 CPU 以及内存资源的消耗。</p><p>但是人们又有状态管理的需求，于是需要使用 Cookie。Cookie 通过在请求和响应的报文中写入 cookie 信息来控制客户端的状态。</p><ul><li>cookie 会根据从服务端发送的响应报文内的一个叫做 Set-Cookie 的首部字段信息，通知客户端保存 Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送出去</li><li>服务端发现客户端发送过来的 Cookie 后，会去检查究竟是从哪个客户端发来的请求，然后对比服务器上的记录最后得到之前的状态信息</li></ul><h2 id="http-报文" tabindex="-1">HTTP 报文 <a class="header-anchor" href="#http-报文" aria-label="Permalink to &quot;HTTP 报文&quot;">​</a></h2><p>用于 HTTP 协议交互的信息被称为 HTTP 报文，分为报文首部和报文主体两块，报文由多行 CR+LF 换行划分</p><p>请求报文和响应报文的报文首部结构基本是相似的</p><ul><li>请求行|状态行，请求行包含 GET、POST、HTTP 版本，状态行包含响应结果的状态码、原因短语、HTTP 版本</li><li>请求首部字段|响应首部字段</li><li>通用首部字段|通用首部字段</li><li>实体首部字段|实体首部字段</li><li>其他|其他</li></ul><p>LR+LF</p><p>报文主体便是 html</p><h3 id="http-编码" tabindex="-1">HTTP 编码 <a class="header-anchor" href="#http-编码" aria-label="Permalink to &quot;HTTP 编码&quot;">​</a></h3><p>HTTP 可以按照数据原貌进行直接传输，编码是为了提升效率，通过在传输时编码，能有效地处理大量的访问请求，但是编码的操作需要计算机来完成，因此会消耗更多的 CPU 资源</p><h4 id="报文主体和实体主体的差异" tabindex="-1">报文主体和实体主体的差异 <a class="header-anchor" href="#报文主体和实体主体的差异" aria-label="Permalink to &quot;报文主体和实体主体的差异&quot;">​</a></h4><ul><li>报文</li></ul><p>HTTP 通信的基本单位，8 位组字节流组成，通过 HTTP 通信传输</p><ul><li>实体</li></ul><p>作为请求或响应的有效载荷数据被传输，由实体首部和实体主体组成</p><p>报文的主体是<strong>用来传输请求或者响应的实体主体</strong>，通常可以说报文主体等于实体主体，<strong>只有当传输过程中进行编码操作时，实体主体的内容发生变化，才导致它和报文主体产生差异</strong></p><h4 id="压缩" tabindex="-1">压缩 <a class="header-anchor" href="#压缩" aria-label="Permalink to &quot;压缩&quot;">​</a></h4><p>HTTP 协议具备内容编码功能，可以指明应用在实体内容上的编码格式，原样压缩实体信息。内容编码后的实体由客户端接收并负责解码</p><p>有以下几种编码方式</p><ul><li>gzip(GNU zip)</li><li>compress(UNIX 系统的标准压缩)</li><li>deflate(zlib)</li><li>identity(不进行编码)</li></ul><p>传送大容量数据时，通过把数据分割多块，可以让浏览器逐步显示页面，把实体主体分块的功能称为分块传输编码（chunked transfer coding）</p><p>每一块都用 16 进制标记，最后一块使用(0(CR+LF))标记</p><p>HTTP/1.1 存在传输编码的机制，可以在通信时按某种编码方式传输，但只定义作用于分块传输编码中</p><p>还有一种场景。需要发送多种数据的多部分对象集合。比如邮件里可以写入文字并添加多份附件，是因为采用了 MIME 机制。</p><p>通过使用 multipart/form-data、multipart/byteranges</p><h4 id="范围请求" tabindex="-1">范围请求 <a class="header-anchor" href="#范围请求" aria-label="Permalink to &quot;范围请求&quot;">​</a></h4><p><code>Range: bytes=50001-10000</code></p><p>可以用来从中断处恢复下载</p><h4 id="内容协商" tabindex="-1">内容协商 <a class="header-anchor" href="#内容协商" aria-label="Permalink to &quot;内容协商&quot;">​</a></h4><p>浏览器会根据默认语言显示对应相同网站页面的中文版或者英文版。</p><p>内容协商机制是指客户端和服务器端就响应的资源内容进行交涉，然后提供给客户端最为合适的资源，包含在请求报文中的某些首部字段中，如</p><ul><li>Accept</li><li>Accept-Charset</li><li>Accept-Encoding</li><li>Accept-Language</li><li>Content-Language</li></ul><p>内容协商有 3 种类型</p><ol><li>服务器驱动协商。以请求的首部字段作为参考，在服务端自动处理</li><li>客户端驱动协商。用户从浏览器的可选项列表中手动选择</li><li>透明协商。服务端和客户端各自进行内容协商</li></ol><h2 id="http-状态码" tabindex="-1">HTTP 状态码 <a class="header-anchor" href="#http-状态码" aria-label="Permalink to &quot;HTTP 状态码&quot;">​</a></h2><p>2xx 成功 3xx 重定向 4xx 客户端错误 5xx 服务器错误</p><p>用到了就记住了</p><h2 id="与-http-协作的-web-服务器" tabindex="-1">与 http 协作的 web 服务器 <a class="header-anchor" href="#与-http-协作的-web-服务器" aria-label="Permalink to &quot;与 http 协作的 web 服务器&quot;">​</a></h2><p>http1.1 允许一台 http 服务器搭建多个 web 站点</p><p>也可以以每位客户持有的域名运行各自不同的网站，利用虚拟主机</p><p>因此不同的域名解析出来的 ip 地址可能是相同的</p><p>所以在发送 http 请求时，必须在 host 首部内完整指定主机名或域名的 URI</p><h3 id="通信数据转发程序" tabindex="-1">通信数据转发程序 <a class="header-anchor" href="#通信数据转发程序" aria-label="Permalink to &quot;通信数据转发程序&quot;">​</a></h3><p>除了客户端和服务器，还有一些用于通信数据转发的应用程序</p><h4 id="代理" tabindex="-1">代理 <a class="header-anchor" href="#代理" aria-label="Permalink to &quot;代理&quot;">​</a></h4><p>接收客户端的请求转发给服务器，同时也返回服务器的响应给客户端</p><p>就像个传话的，每次转发或者请求响应时，会追加写入 Via 首部信息</p><p>使用代理服务器，是为了利用缓存技术减少网络带宽的流量，组织内部对特定网站的访问控制，以获取访问日志为主要目的</p><p>缓存代理会缓存源服务器的资源，相同请求直接返回缓存</p><p>透明代理不对报文做任何加工</p><h4 id="网关" tabindex="-1">网关 <a class="header-anchor" href="#网关" aria-label="Permalink to &quot;网关&quot;">​</a></h4><p>转发其他服务器通信数据的服务器</p><p>可以由 http 请求转化为其他协议通信</p><p>能提高通信的安全性，因为可以在客户端与网关之间的通信线路上加密以确保连接的安全</p><h4 id="隧道" tabindex="-1">隧道 <a class="header-anchor" href="#隧道" aria-label="Permalink to &quot;隧道&quot;">​</a></h4><p>在相隔甚远的客户端和服务器之间进行中转，并保持双方通信连接</p><p>可以使用 ssl 等加密手段进行通信</p><p>不解析 http 请求，原样给之后的服务器</p><h3 id="缓存" tabindex="-1">缓存 <a class="header-anchor" href="#缓存" aria-label="Permalink to &quot;缓存&quot;">​</a></h3><p>缓存指的是代理服务器或客户端本地磁盘内保存的资源副本。利用缓存可以减少对源服务器的访问</p><p>缓存会失效也会过期，缓存服务器会向源服务器确认缓存资源的有效性</p><h2 id="nginx-的应用" tabindex="-1">nginx 的应用 <a class="header-anchor" href="#nginx-的应用" aria-label="Permalink to &quot;nginx 的应用&quot;">​</a></h2><ul><li>解决跨域</li><li>请求过滤</li><li>配置 gzip</li><li>负载均衡</li><li>静态资源服务器</li></ul><p>它是一个高性能的反向代理服务器</p><h3 id="什么是代理" tabindex="-1">什么是代理 <a class="header-anchor" href="#什么是代理" aria-label="Permalink to &quot;什么是代理&quot;">​</a></h3><h4 id="正向代理" tabindex="-1">正向代理 <a class="header-anchor" href="#正向代理" aria-label="Permalink to &quot;正向代理&quot;">​</a></h4><p>比如翻墙，客户端向代理服务器发送请求并指定目标，代理服务器转交请求，并将内容返回给客户端</p><ul><li>正向代理是为我们服务的</li><li>正向代理对我们是透明的，对服务端是非透明的，服务端不知道请求是来自代理还是真实客户端</li></ul><h4 id="反向代理" tabindex="-1">反向代理 <a class="header-anchor" href="#反向代理" aria-label="Permalink to &quot;反向代理&quot;">​</a></h4><p>反向代理为服务端服务，反向代理帮助服务器接收来自客户端的请求，帮助服务器做请求转发、负载均衡</p><ul><li>反向代理对服务端是透明的，为服务端服务</li></ul><p><img src="/Jarrett-blog/assets/forward-everse.f4dab8bc.png" alt="image.png"></p><h3 id="基本配置" tabindex="-1">基本配置 <a class="header-anchor" href="#基本配置" aria-label="Permalink to &quot;基本配置&quot;">​</a></h3><p><img src="/Jarrett-blog/assets/basic-config.6a7df616.png" alt="image.png"></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">events</span><span style="color:#839496;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#839496;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#268BD2;">http</span></span>
<span class="line"><span style="color:#839496;">{</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span></span>
<span class="line"><span style="color:#839496;">    {</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#268BD2;">location</span><span style="color:#839496;"> </span><span style="color:#268BD2;">path</span></span>
<span class="line"><span style="color:#839496;">        {</span></span>
<span class="line"><span style="color:#839496;">            </span><span style="color:#859900;">...</span></span>
<span class="line"><span style="color:#839496;">        }</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#268BD2;">location</span><span style="color:#839496;"> </span><span style="color:#268BD2;">path</span></span>
<span class="line"><span style="color:#839496;">        {</span></span>
<span class="line"><span style="color:#839496;">            </span><span style="color:#859900;">...</span></span>
<span class="line"><span style="color:#839496;">        }</span></span>
<span class="line"><span style="color:#839496;">     }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span></span>
<span class="line"><span style="color:#839496;">    {</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#859900;">...</span></span>
<span class="line"><span style="color:#839496;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><code>main</code>:nginx 的全局配置，对全局生效。</li><li><code>events</code>​:配置影响 nginx 服务器或与用户的网络连接。</li><li><code>http</code>：可以嵌套多个 server，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置。</li><li><code>server</code>：配置虚拟主机的相关参数，一个 http 中可以有多个 server。</li><li><code>location</code>：配置请求的路由，以及各种页面的处理情况。</li><li><code>upstream</code>：配置后端服务器具体地址，负载均衡配置不可或缺的部分。</li></ul><h4 id="内置变量" tabindex="-1">内置变量 <a class="header-anchor" href="#内置变量" aria-label="Permalink to &quot;内置变量&quot;">​</a></h4><p>下面是 nginx 一些配置中常用的内置全局变量，你可以在配置的任何位置使用它们。</p><table><thead><tr><th>变量名</th><th>功能</th></tr></thead><tbody><tr><td>$host</td><td>请求信息中的 Host，如果请求中没有 Host 行，则等于设置的服务器名</td></tr><tr><td>$request_method</td><td>客户端请求类型，如 GET、POST</td></tr><tr><td>$remote_addr</td><td>客户端的 IP 地址</td></tr><tr><td>$args</td><td>请求中的参数</td></tr><tr><td>$content_length</td><td>请求头中的 Content-length 字段</td></tr><tr><td>$http_user_agent</td><td>客户端 agent 信息</td></tr><tr><td>$http_cookie</td><td>客户端 cookie 信息</td></tr><tr><td>$remote_addr</td><td>客户端的 IP 地址</td></tr><tr><td>$remote_port</td><td>客户端的端口</td></tr><tr><td>$server_protocol</td><td>请求使用的协议，如 HTTP/1.0、·HTTP/1.1`</td></tr><tr><td>$server_addr</td><td>服务器地址</td></tr><tr><td>$server_name</td><td>服务器名称</td></tr><tr><td>$server_port</td><td>服务器的端口号</td></tr></tbody></table><h3 id="跨域" tabindex="-1">跨域 <a class="header-anchor" href="#跨域" aria-label="Permalink to &quot;跨域&quot;">​</a></h3><p>如果两个页面的协议，端口（如果有指定）和域名都相同，则两个页面具有相同的源。反之则为不同源 <img src="/Jarrett-blog/assets/cross-domain.d5fdbd3f.png" alt="image.png"></p><h4 id="nginx-解决跨域的原理" tabindex="-1">nginx 解决跨域的原理 <a class="header-anchor" href="#nginx-解决跨域的原理" aria-label="Permalink to &quot;nginx 解决跨域的原理&quot;">​</a></h4><p>例如：</p><ul><li>前端 server 的域名为：fe.server.com</li><li>后端服务的域名为：dev.server.com</li></ul><p>现在我在 fe.server.com 对 dev.server.com 发起请求一定会出现跨域。 现在我们只需要启动一个 nginx 服务器，将 server_name 设置为 fe.server.com,然后设置相应的 location 以拦截前端需要跨域的请求，最后将请求代理回 dev.server.com。如下面的配置：</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">server</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">  </span><span style="color:#268BD2;">listen</span><span style="color:#839496;">   </span><span style="color:#D33682;">80</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  </span><span style="color:#268BD2;">server_name</span><span style="color:#839496;">  </span><span style="color:#268BD2;">fe</span><span style="color:#839496;">.</span><span style="color:#268BD2;">server</span><span style="color:#839496;">.</span><span style="color:#268BD2;">com</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  </span><span style="color:#268BD2;">location</span><span style="color:#839496;"> </span><span style="color:#859900;">/</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">proxy_pass</span><span style="color:#839496;"> </span><span style="color:#268BD2;">dev</span><span style="color:#839496;">.</span><span style="color:#268BD2;">server</span><span style="color:#839496;">.</span><span style="color:#268BD2;">com</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">  }</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这样可以完美绕过浏览器的同源策略：fe.server.com 访问 nginx 的 fe.server.com 属于同源访问，而 nginx 对服务端转发的请求不会触发浏览器的同源策略。</p><h3 id="请求过滤" tabindex="-1">请求过滤 <a class="header-anchor" href="#请求过滤" aria-label="Permalink to &quot;请求过滤&quot;">​</a></h3><ul><li>根据状态码过滤</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">error_page</span><span style="color:#839496;"> </span><span style="color:#D33682;">500</span><span style="color:#839496;"> </span><span style="color:#D33682;">501</span><span style="color:#839496;"> </span><span style="color:#D33682;">502</span><span style="color:#839496;"> </span><span style="color:#D33682;">503</span><span style="color:#839496;"> </span><span style="color:#D33682;">504</span><span style="color:#839496;"> </span><span style="color:#D33682;">506</span><span style="color:#839496;"> </span><span style="color:#859900;">/</span><span style="color:#839496;">50</span><span style="color:#268BD2;">x</span><span style="color:#839496;">.</span><span style="color:#268BD2;">html</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">location</span><span style="color:#839496;"> </span><span style="color:#859900;">=</span><span style="color:#839496;"> </span><span style="color:#859900;">/</span><span style="color:#839496;">50</span><span style="color:#268BD2;">x</span><span style="color:#839496;">.</span><span style="color:#268BD2;">html</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">        #</span><span style="color:#268BD2;">将跟路径改编为存放html的路径</span><span style="color:#839496;">。</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#268BD2;">root</span><span style="color:#839496;"> </span><span style="color:#859900;">/</span><span style="color:#268BD2;">root</span><span style="color:#859900;">/</span><span style="color:#268BD2;">static</span><span style="color:#859900;">/</span><span style="color:#268BD2;">html</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>根据 URL 名称过滤，精准匹配 URL，不匹配的 URL 全部重定向到主页。</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">location</span><span style="color:#839496;"> </span><span style="color:#859900;">/</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">rewrite</span><span style="color:#839496;">  </span><span style="color:#859900;">^</span><span style="color:#839496;">.</span><span style="color:#859900;">*</span><span style="color:#268BD2;">$</span><span style="color:#839496;"> </span><span style="color:#859900;">/</span><span style="color:#268BD2;">index</span><span style="color:#839496;">.</span><span style="color:#268BD2;">html</span><span style="color:#839496;">  </span><span style="color:#268BD2;">redirect</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>根据请求类型过滤。</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#859900;">if</span><span style="color:#839496;"> ( </span><span style="color:#268BD2;">$request_method</span><span style="color:#839496;"> </span><span style="color:#859900;">!~</span><span style="color:#839496;"> </span><span style="color:#859900;">^</span><span style="color:#839496;">(</span><span style="color:#268BD2;">GET</span><span style="color:#859900;">|</span><span style="color:#268BD2;">POST</span><span style="color:#859900;">|</span><span style="color:#268BD2;">HEAD</span><span style="color:#839496;">)</span><span style="color:#268BD2;">$</span><span style="color:#839496;"> ) {</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#859900;">return</span><span style="color:#839496;"> </span><span style="color:#D33682;">403</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="配置-gzip" tabindex="-1">配置 gzip <a class="header-anchor" href="#配置-gzip" aria-label="Permalink to &quot;配置 gzip&quot;">​</a></h3><p>gzip 是规定的三种标准 http 压缩格式之一。目前绝大多数网站都在使用 gzip 传输 html、css、javascript 等资源文件。 对于文本文件，gzip 可以将传输流量降低至四分之一到三分之一 并不是每个浏览器都支持 gzip 的，如何知道客户端是否支持 gzip 呢，请求头中的 Accept-Encoding 来标识对压缩的支持。 <img src="/Jarrett-blog/assets/request-headers.be4a72aa.png" alt=""> 启用 gzip 同时需要客户端和服务端的支持，如果客户端支持 gzip 的解析，那么只要服务端能够返回 gzip 的文件就可以启用 gzip 了,我们可以通过 nginx 的配置来让服务端支持 gzip。下面的 respone 中 content-encoding:gzip，指服务端开启了 gzip 的压缩方式。 <img src="/Jarrett-blog/assets/response-headers.a17dab49.png" alt=""></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">gzip</span><span style="color:#839496;">                    </span><span style="color:#268BD2;">on</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">gzip_http_version</span><span style="color:#839496;">       </span><span style="color:#D33682;">1.1</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">gzip_comp_level</span><span style="color:#839496;">         </span><span style="color:#D33682;">5</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">gzip_min_length</span><span style="color:#839496;">         </span><span style="color:#D33682;">1000</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">gzip_types</span><span style="color:#839496;"> </span><span style="color:#268BD2;">text</span><span style="color:#859900;">/</span><span style="color:#268BD2;">csv</span><span style="color:#839496;"> </span><span style="color:#268BD2;">text</span><span style="color:#859900;">/</span><span style="color:#268BD2;">xml</span><span style="color:#839496;"> </span><span style="color:#268BD2;">text</span><span style="color:#859900;">/</span><span style="color:#268BD2;">css</span><span style="color:#839496;"> </span><span style="color:#268BD2;">text</span><span style="color:#859900;">/</span><span style="color:#268BD2;">plain</span><span style="color:#839496;"> </span><span style="color:#268BD2;">text</span><span style="color:#859900;">/</span><span style="color:#268BD2;">javascript</span><span style="color:#839496;"> </span><span style="color:#268BD2;">application</span><span style="color:#859900;">/</span><span style="color:#268BD2;">javascript</span><span style="color:#839496;"> </span><span style="color:#268BD2;">application</span><span style="color:#859900;">/</span><span style="color:#268BD2;">x</span><span style="color:#859900;">-</span><span style="color:#268BD2;">javascript</span><span style="color:#839496;"> </span><span style="color:#268BD2;">application</span><span style="color:#859900;">/</span><span style="color:#268BD2;">json</span><span style="color:#839496;"> </span><span style="color:#268BD2;">application</span><span style="color:#859900;">/</span><span style="color:#268BD2;">xml</span><span style="color:#839496;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="gzip-http-version" tabindex="-1">gzip_http_version <a class="header-anchor" href="#gzip-http-version" aria-label="Permalink to &quot;gzip_http_version&quot;">​</a></h3><ul><li>启用 GZip 所需的 HTTP 最低版本</li><li>默认值为 HTTP/1.1</li></ul><p>这里为什么默认版本不是 1.0 呢？ HTTP 运行在 TCP 连接之上，自然也有着跟 TCP 一样的三次握手、慢启动等特性。 启用持久连接情况下，服务器发出响应后让 TCP 连接继续打开着。同一对客户/服务器之间的后续请求和响应可以通过这个连接发送。 <img src="/Jarrett-blog/assets/keep-alive.5a1dd181.png" alt=""> 为了尽可能的提高 HTTP 性能，使用持久连接就显得尤为重要了。 HTTP/1.1 默认支持 TCP 持久连接，HTTP/1.0 也可以通过显式指定 Connection: keep-alive 来启用持久连接。对于 TCP 持久连接上的 HTTP 报文，客户端需要一种机制来准确判断结束位置，而在 HTTP/1.0 中，这种机制只有 Content-Length。而在 HTTP/1.1 中新增的 Transfer-Encoding: chunked 所对应的分块传输机制可以完美解决这类问题。 nginx 同样有着配置 chunked 的属性 chunked_transfer_encoding，这个属性是默认开启的。 Nginx 在启用了 GZip 的情况下，不会等文件 GZip 完成再返回响应，而是边压缩边响应，这样可以显著提高 TTFB(Time To First Byte，首字节时间，WEB 性能优化重要指标)。这样唯一的问题是，Nginx 开始返回响应时，它无法知道将要传输的文件最终有多大，也就是无法给出 Content-Length 这个响应头部。 所以，在 HTTP1.0 中如果利用 Nginx 启用了 GZip，是无法获得 Content-Length 的，这导致 HTTP1.0 中开启持久链接和使用 GZip 只能二选一，所以在这里 gzip_http_version 默认设置为 1.1。</p><h3 id="gzip-comp-level" tabindex="-1">gzip_comp_level <a class="header-anchor" href="#gzip-comp-level" aria-label="Permalink to &quot;gzip_comp_level&quot;">​</a></h3><ul><li>压缩级别，级别越高压缩率越大，当然压缩时间也就越长（传输快但比较消耗 cpu）。</li><li>默认值为 1</li><li>压缩级别取值为 1-9</li></ul><h3 id="gzip-min-length" tabindex="-1">gzip_min_length <a class="header-anchor" href="#gzip-min-length" aria-label="Permalink to &quot;gzip_min_length&quot;">​</a></h3><ul><li>设置允许压缩的页面最小字节数，Content-Length 小于该值的请求将不会被压缩</li><li>默认值:0</li><li>当设置的值较小时，压缩后的长度可能比原文件大，建议设置 1000 以上</li></ul><h3 id="gzip-types" tabindex="-1">gzip_types <a class="header-anchor" href="#gzip-types" aria-label="Permalink to &quot;gzip_types&quot;">​</a></h3><ul><li>要采用 gzip 压缩的文件类型(MIME 类型)</li><li>默认值:text/html(默认不压缩 js/css)</li></ul><h2 id="负载均衡" tabindex="-1">负载均衡 <a class="header-anchor" href="#负载均衡" aria-label="Permalink to &quot;负载均衡&quot;">​</a></h2><p>负载均衡就是帮助我们将众多的客户端请求合理的分配到各个服务器，以达到服务端资源的充分利用和更少的请求时间</p><h3 id="nginx-实现负载均衡" tabindex="-1">nginx 实现负载均衡 <a class="header-anchor" href="#nginx-实现负载均衡" aria-label="Permalink to &quot;nginx 实现负载均衡&quot;">​</a></h3><ul><li>Upstream 指定后端服务器地址列表</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">upstream</span><span style="color:#839496;"> </span><span style="color:#268BD2;">balanceServer</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.33</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.34</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.35</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>在 server 中拦截响应请求，并将请求转发到 Upstream 中配置的服务器列表。</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">server</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#268BD2;">server_name</span><span style="color:#839496;">  </span><span style="color:#268BD2;">fe</span><span style="color:#839496;">.</span><span style="color:#268BD2;">server</span><span style="color:#839496;">.</span><span style="color:#268BD2;">com</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#268BD2;">listen</span><span style="color:#839496;"> </span><span style="color:#D33682;">80</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">        </span><span style="color:#268BD2;">location</span><span style="color:#839496;"> </span><span style="color:#859900;">/</span><span style="color:#268BD2;">api</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">            </span><span style="color:#268BD2;">proxy_pass</span><span style="color:#839496;"> http:</span><span style="color:#586E75;font-style:italic;">//balanceServer;</span></span>
<span class="line"><span style="color:#839496;">        }</span></span>
<span class="line"><span style="color:#839496;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>下一步要指定分配策略 <img src="/Jarrett-blog/assets/allocation-strategy.697318ed.png" alt="image.png"></p><h4 id="轮询策略" tabindex="-1">轮询策略 <a class="header-anchor" href="#轮询策略" aria-label="Permalink to &quot;轮询策略&quot;">​</a></h4><p>默认策略，将所有客户端请求轮询分配给服务端。可以正常工作，但如果其中某一台服务器压力太大，出现延迟，会影响所有分配在这台服务器下的用户</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">upstream</span><span style="color:#839496;"> </span><span style="color:#268BD2;">balanceServer</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.33</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.34</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.35</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="最小连接数策略" tabindex="-1">最小连接数策略 <a class="header-anchor" href="#最小连接数策略" aria-label="Permalink to &quot;最小连接数策略&quot;">​</a></h4><p>将请求优先分配给压力较小的服务器，它可以平衡每个队列的长度，并避免向压力大的服务器添加更多的请求。</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">upstream</span><span style="color:#839496;"> </span><span style="color:#268BD2;">balanceServer</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">least_conn</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.33</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.34</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.35</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="最快响应时间策略" tabindex="-1">最快响应时间策略 <a class="header-anchor" href="#最快响应时间策略" aria-label="Permalink to &quot;最快响应时间策略&quot;">​</a></h4><p>依赖于 nginx plus，优先分配给响应时间最短的服务器</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">upstream</span><span style="color:#839496;"> </span><span style="color:#268BD2;">balanceServer</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">fair</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.33</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.34</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.35</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="客户端-ip-绑定" tabindex="-1">客户端 ip 绑定 <a class="header-anchor" href="#客户端-ip-绑定" aria-label="Permalink to &quot;客户端 ip 绑定&quot;">​</a></h4><p>来自同一个 ip 的请求永远只分配给一台服务器，有效解决了动态网页存在的 session 共享问题</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">upstream</span><span style="color:#839496;"> </span><span style="color:#268BD2;">balanceServer</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">ip_hash</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.33</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.34</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">server</span><span style="color:#839496;"> </span><span style="color:#D33682;">10.1</span><span style="color:#839496;">.</span><span style="color:#D33682;">22.35</span><span style="color:#839496;">:</span><span style="color:#D33682;">12345</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="静态资源服务器" tabindex="-1">静态资源服务器 <a class="header-anchor" href="#静态资源服务器" aria-label="Permalink to &quot;静态资源服务器&quot;">​</a></h2><p>匹配以<code>png｜gif｜jpg｜jpeg</code>为结尾的请求，并将请求转发到本地路径，<code>root</code>中指定的路径即本地 nginx 的路径，同时可以进行一些缓存设置</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki solarized-dark"><code><span class="line"><span style="color:#268BD2;">location</span><span style="color:#839496;"> </span><span style="color:#859900;">~*</span><span style="color:#839496;"> \.(</span><span style="color:#268BD2;">png</span><span style="color:#859900;">|</span><span style="color:#268BD2;">gif</span><span style="color:#859900;">|</span><span style="color:#268BD2;">jpg</span><span style="color:#859900;">|</span><span style="color:#268BD2;">jpeg</span><span style="color:#839496;">)</span><span style="color:#268BD2;">$</span><span style="color:#839496;"> {</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">root</span><span style="color:#839496;">    </span><span style="color:#859900;">/</span><span style="color:#268BD2;">root</span><span style="color:#859900;">/</span><span style="color:#268BD2;">static</span><span style="color:#859900;">/</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">autoindex</span><span style="color:#839496;"> </span><span style="color:#268BD2;">on</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">access_log</span><span style="color:#839496;">  </span><span style="color:#268BD2;">off</span><span style="color:#839496;">;</span></span>
<span class="line"><span style="color:#839496;">    </span><span style="color:#268BD2;">expires</span><span style="color:#839496;">     10</span><span style="color:#268BD2;">h</span><span style="color:#839496;">;# </span><span style="color:#268BD2;">设置过期时间为10小时</span></span>
<span class="line"><span style="color:#839496;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><a href="http://www.conardli.top/blog/article/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%80%85%E5%BF%85%E5%A4%87%E7%9A%84nginx%E7%9F%A5%E8%AF%86.html#%E9%85%8D%E7%BD%AEgzip" target="_blank" rel="noreferrer">参考</a></p></div></div></main><footer class="VPDocFooter" data-v-aca46a88 data-v-47dfb5d7><!--[--><!--]--><div class="edit-info" data-v-47dfb5d7><div class="edit-link" data-v-47dfb5d7><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/computer-basic/internet/index.md" target="_blank" rel="noreferrer" data-v-47dfb5d7><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-47dfb5d7><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-47dfb5d7><p class="VPLastUpdated" data-v-47dfb5d7 data-v-bdb26374>Last Updated: <time datetime="2024-04-09T08:39:26.000Z" data-v-bdb26374></time></p></div></div><nav class="prev-next" data-v-47dfb5d7><div class="pager" data-v-47dfb5d7><a class="pager-link prev" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-47dfb5d7><span class="desc" data-v-47dfb5d7>Previous page</span><span class="title" data-v-47dfb5d7>设计模式</span></a></div><div class="pager" data-v-47dfb5d7><a class="pager-link next" href="/Jarrett-blog/computer-basic/arithmetic/" data-v-47dfb5d7><span class="desc" data-v-47dfb5d7>Next page</span><span class="title" data-v-47dfb5d7>数据结构与算法</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-58c95b52 data-v-7ea6fbe4><div class="container" data-v-7ea6fbe4><p class="message" data-v-7ea6fbe4>Released under the MIT License.</p><p class="copyright" data-v-7ea6fbe4>MIT Licensed | Copyright © 2021-present Jarrett Wang</p></div></footer><!--[--><div class="n-back-top-placeholder" style="display: none" aria-hidden="true" data-v-2c40c5a2><!----></div><!--]--></div></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"computer-basic_arithmetic_index.md\":\"e24e0d16\",\"front-end_canvas_index.md\":\"ac6d4cd7\",\"front-end_html_index.md\":\"a5bc7681\",\"front-end_git_index.md\":\"d7b821fa\",\"front-end_browser_index.md\":\"293607e8\",\"front-end_nodejs_index.md\":\"44700256\",\"practice_promise.md\":\"9095b855\",\"front-end_ts_index.md\":\"340a992f\",\"computer-basic_design-pattern_index.md\":\"85e2d83d\",\"front-end_css_index.md\":\"f233b602\",\"computer-basic_internet_index.md\":\"cfaec010\",\"tools_slides.md\":\"d6e9ebd8\",\"front-end_vue3_diff.md\":\"b33755e0\",\"resume_index.md\":\"a85009bc\",\"web3_index.md\":\"ee97be7a\",\"front-end_ts_faq.md\":\"e73023f6\",\"front-end_js_faq.md\":\"9dd86001\",\"front-end_vue3_index.md\":\"ee18d170\",\"plan_micro-fe-communication_index.md\":\"7a51e5b1\",\"plan_navigation_index.md\":\"478e57a5\",\"index.md\":\"efb5b884\",\"practice_leetcode.md\":\"4ac994b5\",\"front-end_micro-front_index.md\":\"ee99735c\",\"knowledge-map.md\":\"34c304a7\",\"front-end_vue_index.md\":\"bcfac128\",\"front-end_js_index.md\":\"20c213eb\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"🏠 JarrettBlog\",\"titleTemplate\":\"Vite & Vue powered static site generator\",\"description\":\"前端学习笔记\",\"base\":\"/Jarrett-blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Jarrett817/Jarrett-blog\"},{\"icon\":{\"svg\":\"<svg t=\\\"1658975064450\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"14624\\\" width=\\\"500\\\" height=\\\"500\\\"><path d=\\\"M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14625\\\"></path><path d=\\\"M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z\\\" fill=\\\"#006CFF\\\" p-id=\\\"14626\\\"></path></svg>\"},\"link\":\"https://juejin.cn/user/3940246036687774\"}],\"editLink\":{\"pattern\":\"https://github.com/Jarrett817/Jarrett-blog/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"lastUpdatedText\":\"Last Updated\",\"nav\":[{\"text\":\"📘 前端基础\",\"link\":\"/front-end/html/\",\"activeMatch\":\"^/front-end/\"},{\"text\":\"📚 计算机基础\",\"link\":\"/computer-basic/design-pattern/\",\"activeMatch\":\"^/computer-basic/\"},{\"text\":\"🏹 方案\",\"link\":\"/plan/virtual-scroll/\",\"activeMatch\":\"^/plan/\"},{\"text\":\"✍ 练习题\",\"link\":\"/practice/leetcode\",\"activeMatch\":\"^/pratice/\"},{\"text\":\"📘 WEB3\",\"link\":\"/web3/\",\"activeMatch\":\"^/web3/\"},{\"text\":\"🔖 简历\",\"link\":\"/resume/index.html\",\"activeMatch\":\"^/resume/\"}],\"sidebar\":[{\"text\":\"前端基础\",\"items\":[{\"text\":\"HTML\",\"link\":\"/front-end/html/\"},{\"text\":\"CSS\",\"link\":\"/front-end/css/\"},{\"text\":\"JS\",\"link\":\"/front-end/js/\"},{\"text\":\"TS\",\"link\":\"/front-end/ts/\"},{\"text\":\"浏览器\",\"link\":\"/front-end/browser/\"},{\"text\":\"vue\",\"link\":\"/front-end/vue/\"},{\"text\":\"vue3\",\"link\":\"/front-end/vue3/\"},{\"text\":\"nodejs\",\"link\":\"/front-end/nodejs/\"},{\"text\":\"git\",\"link\":\"/front-end/git/\"},{\"text\":\"canvas\",\"link\":\"/front-end/canvas/\"},{\"text\":\"微前端\",\"link\":\"/front-end/micro-front/\"}]},{\"text\":\"计算机基础\",\"items\":[{\"text\":\"设计模式\",\"link\":\"/computer-basic/design-pattern/\"},{\"text\":\"计算机网络\",\"link\":\"/computer-basic/internet/\"},{\"text\":\"数据结构与算法\",\"link\":\"/computer-basic/arithmetic/\"}]},{\"text\":\"方案\",\"items\":[{\"text\":\"多级跳转\",\"link\":\"/plan/navigation/\"},{\"text\":\"微前端下的主子通信\",\"link\":\"/plan/micro-fe-communication/\"}]},{\"text\":\"WEB3\",\"items\":[{\"text\":\"新手入门\",\"link\":\"/web3/index\"}]},{\"text\":\"练习题\",\"items\":[{\"text\":\"算法题\",\"link\":\"/practice/leetcode\"},{\"text\":\"Promise\",\"link\":\"/practice/promise\"}]}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"MIT Licensed | Copyright © 2021-present Jarrett Wang\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>