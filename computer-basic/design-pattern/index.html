<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è®¾è®¡æ¨¡å¼ | ğŸ  JarrettBlog</title>
    <meta name="description" content="å‰ç«¯å­¦ä¹ ç¬”è®°">
    <link rel="stylesheet" href="/Jarrett-blog/assets/style.f2b3dc79.css">
    <link rel="modulepreload" href="/Jarrett-blog/assets/Home.c5e88031.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/reveal.esm.7135e7ce.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/highlight.esm.c7d93732.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/markdown.esm.479aed26.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/app.dff7797b.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/computer-basic_design-pattern_index.md.5e203ae1.lean.js">
    <link rel="modulepreload" href="/Jarrett-blog/assets/app.dff7797b.js">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="twitter:title" content="è®¾è®¡æ¨¡å¼ | ğŸ  JarrettBlog">
    <meta property="og:title" content="è®¾è®¡æ¨¡å¼ | ğŸ  JarrettBlog">
  </head>
  <body>
    <div id="app"><!--[--><!----><!----><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/Jarrett-blog/" aria-label="ğŸ  JarrettBlog, back to home" data-v-675d8756 data-v-4a583abe><!----> ğŸ  JarrettBlog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/front-end/html/" data-v-b8818f8c>âœï¸ å‰ç«¯å­¦ä¹ ç¬”è®° <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-b8818f8c>â›°ï¸ è®¡ç®—æœºåŸºç¡€ <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/tools/slides" data-v-b8818f8c>ğŸ”§ å·¥å…·åŒ… <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/Jarrett817/Jarrett-blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/front-end/html/" data-v-b8818f8c>âœï¸ å‰ç«¯å­¦ä¹ ç¬”è®° <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/Jarrett-blog/computer-basic/design-pattern/" data-v-b8818f8c>â›°ï¸ è®¡ç®—æœºåŸºç¡€ <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/Jarrett-blog/tools/slides" data-v-b8818f8c>ğŸ”§ å·¥å…·åŒ… <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/Jarrett817/Jarrett-blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item active" href="/Jarrett-blog/computer-basic/design-pattern/">è®¾è®¡æ¨¡å¼</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#è®¾è®¡æ¨¡å¼çš„åˆ©ä¸å¼Š">è®¾è®¡æ¨¡å¼çš„åˆ©ä¸å¼Š</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#åˆ©">åˆ©</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å¼Š">å¼Š</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¸è¦ç›²ç›®ä½¿ç”¨è®¾è®¡æ¨¡å¼">ä¸è¦ç›²ç›®ä½¿ç”¨è®¾è®¡æ¨¡å¼</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è®¾è®¡æ¨¡å¼çš„åŸåˆ™">è®¾è®¡æ¨¡å¼çš„åŸåˆ™</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#å•ä¸€èŒè´£åŸåˆ™">å•ä¸€èŒè´£åŸåˆ™</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å¼€æ”¾-å°é—­åŸåˆ™">å¼€æ”¾-å°é—­åŸåˆ™</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¾èµ–å€’è½¬åŸåˆ™">ä¾èµ–å€’è½¬åŸåˆ™</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é‡Œæ°ä»£æ¢åŸåˆ™">é‡Œæ°ä»£æ¢åŸåˆ™</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼">å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#æ¥å£">æ¥å£</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é—­åŒ…">é—­åŒ…</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç»§æ‰¿">ç»§æ‰¿</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç­–ç•¥æ¨¡å¼">ç­–ç•¥æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å»ºé€ è€…æ¨¡å¼">å»ºé€ è€…æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å·¥å‚æ¨¡å¼">å·¥å‚æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è£…é¥°è€…æ¨¡å¼">è£…é¥°è€…æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é“¾å¼è°ƒç”¨">é“¾å¼è°ƒç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ¡¥æ¥æ¨¡å¼">æ¡¥æ¥æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç»„åˆæ¨¡å¼">ç»„åˆæ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é—¨é¢æ¨¡å¼">é—¨é¢æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é€‚é…å™¨æ¨¡å¼">é€‚é…å™¨æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#äº«å…ƒæ¨¡å¼">äº«å…ƒæ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å‘½ä»¤æ¨¡å¼">å‘½ä»¤æ¨¡å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#èŒè´£é“¾æ¨¡å¼">èŒè´£é“¾æ¨¡å¼</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/computer-basic/internet/">è®¡ç®—æœºç½‘ç»œ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Jarrett-blog/computer-basic/fucking-arithmetic/">æ•°æ®ç»“æ„ä¸ç®—æ³•</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="è®¾è®¡æ¨¡å¼"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼" aria-hidden="true">#</a> è®¾è®¡æ¨¡å¼</h1><h2 id="è®¾è®¡æ¨¡å¼çš„åˆ©ä¸å¼Š"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼çš„åˆ©ä¸å¼Š" aria-hidden="true">#</a> è®¾è®¡æ¨¡å¼çš„åˆ©ä¸å¼Š</h2><p>js çš„è®¾è®¡æ¨¡å¼æœ‰å·¥å‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€é—¨é¢æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼è£…é¥°è€…æ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼</p><h3 id="åˆ©"><a class="header-anchor" href="#åˆ©" aria-hidden="true">#</a> åˆ©</h3><ul><li>å¯ç»´æŠ¤æ€§ã€‚é™ä½æ¨¡å—è€¦åˆç¨‹åº¦ï¼Œåˆ©äºé‡æ„ã€åˆä½œå’Œç»´æŠ¤</li><li>æ²Ÿé€šã€‚å¯¹ç¨‹åºå‘˜æ¥è¯´ï¼Œæ˜¯ä¸€å¥—é€šç”¨çš„æœ¯è¯­</li><li>æ€§èƒ½ã€‚æŸäº›èµ·ä¼˜åŒ–ä½œç”¨çš„è®¾è®¡æ¨¡å¼ã€‚å¯ä»¥å¤§å¹…åº¦æé«˜ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ï¼Œå‡å°‘éœ€è¦ä¼ é€åˆ°å®¢æˆ·ç«¯çš„ä»£ç é‡ã€‚å¦‚äº«å…ƒæ¨¡å¼å’Œä»£ç†æ¨¡å¼</li></ul><h3 id="å¼Š"><a class="header-anchor" href="#å¼Š" aria-hidden="true">#</a> å¼Š</h3><ul><li>å¤æ‚æ€§ã€‚è¿™æ˜¯è·å¾—å¯ç»´æŠ¤æ€§ä»˜å‡ºçš„ä»£ä»·ï¼Œå¸¦å•Šå—ä¼šå˜å¾—æ›´å¤æ‚</li><li>æ€§èƒ½ã€‚æŸäº›æ¨¡å¼èƒ½æå‡æ€§èƒ½ï¼Œä½†å¤šæ•°æ¨¡å¼å¯¹æ€§èƒ½æœ‰æ‰€æ‹–ç´¯ï¼Œå°½ç®¡å¯èƒ½æ˜¯å¾®ä¸è¶³é“çš„ï¼Œå–å†³äºé¡¹ç›®çš„å…·ä½“éœ€æ±‚</li></ul><h3 id="ä¸è¦ç›²ç›®ä½¿ç”¨è®¾è®¡æ¨¡å¼"><a class="header-anchor" href="#ä¸è¦ç›²ç›®ä½¿ç”¨è®¾è®¡æ¨¡å¼" aria-hidden="true">#</a> ä¸è¦ç›²ç›®ä½¿ç”¨è®¾è®¡æ¨¡å¼</h3><p>è¦ä¿è¯æ‰€é€‰ç”¨çš„æ¨¡å¼æ˜¯æœ€æ°å½“çš„é‚£ä¸€ç§ï¼Œä¸è¦è¿‡åº¦ç‰ºç‰²æ€§èƒ½</p><h2 id="è®¾è®¡æ¨¡å¼çš„åŸåˆ™"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼çš„åŸåˆ™" aria-hidden="true">#</a> è®¾è®¡æ¨¡å¼çš„åŸåˆ™</h2><h3 id="å•ä¸€èŒè´£åŸåˆ™"><a class="header-anchor" href="#å•ä¸€èŒè´£åŸåˆ™" aria-hidden="true">#</a> å•ä¸€èŒè´£åŸåˆ™</h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>SRPï¼Œå°±ä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ï¼Œ å¦‚æœä¸€ä¸ªç±»æ‰¿æ‹…çš„èŒè´£è¿‡å¤šï¼Œå°±ç­‰äºæŠŠè¿™äº›èŒè´£è€¦åˆåœ¨ä¸€èµ·ï¼Œä¸€ä¸ªèŒè´£çš„å˜åŒ–å¯èƒ½ä¼šå‰Šå¼±æˆ–è€…æŠ‘åˆ¶è¿™ä¸ªç±»å®Œæˆå…¶ä»–èŒè´£çš„èƒ½åŠ›ï¼Œè¿™ç§è€¦åˆä¼šå¯¼è‡´è„†å¼±çš„è®¾è®¡ï¼Œå½“å˜åŒ–å‘ç”Ÿæ—¶ï¼Œè®¾è®¡ä¼šé­å—åˆ°æ„æƒ³ä¸åˆ°çš„ç ´å</p></div><p>æ‰€ä»¥æˆ‘ä»¬åœ¨å†™ä»£ç è¿‡ç¨‹ä¸­éœ€è¦æœ‰æ„è¯†åœ°å»åˆ†ç¦»ä»£ç ï¼Œæ¯”å¦‚æ ·å¼å’Œé€»è¾‘åˆ†ç¦»</p><h3 id="å¼€æ”¾-å°é—­åŸåˆ™"><a class="header-anchor" href="#å¼€æ”¾-å°é—­åŸåˆ™" aria-hidden="true">#</a> å¼€æ”¾-å°é—­åŸåˆ™</h3><p>è½¯ä»¶å®ä½“åº”è¯¥å¯ä»¥æ‰©å±•ï¼Œä½†æ˜¯ä¸å¯ä»¥ä¿®æ”¹</p><p>æ— è®ºæ¨¡å—æ˜¯å¤šä¹ˆçš„å°é—­ï¼Œéƒ½ä¼šå­˜åœ¨ä¸€äº›æ— æ³•å¯¹ä¹‹å°é—­çš„å˜åŒ–ã€‚æ—¢ç„¶ä¸å¯èƒ½å®Œå…¨å°é—­ï¼Œè®¾è®¡äººå‘˜å¿…é¡»å¯¹äºä»–è®¾è®¡çš„æ¨¡å—åº”è¯¥å¯¹å“ªç§å˜åŒ–å°é—­åšå‡ºé€‰æ‹©ã€‚ä»–å¿…é¡»å…ˆçŒœæµ‹å‡ºæœ€å¯èƒ½å‘ç”Ÿçš„å˜åŒ–ç§ç±»ï¼Œç„¶åæ„é€ æŠ½è±¡æ¥éš”ç¦»é‚£äº›å˜åŒ–</p><p>é¢å¯¹éœ€æ±‚ï¼Œå¯¹ç¨‹åºçš„æ”¹åŠ¨æ˜¯é€šè¿‡å¢åŠ ä¿¡è´·å—è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯æ›´æ”¹ç°æœ‰çš„ä»£ç </p><h3 id="ä¾èµ–å€’è½¬åŸåˆ™"><a class="header-anchor" href="#ä¾èµ–å€’è½¬åŸåˆ™" aria-hidden="true">#</a> ä¾èµ–å€’è½¬åŸåˆ™</h3><p>A. é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ã€‚ä¸¤ä¸ªéƒ½åº”è¯¥ä¾èµ–æŠ½è±¡ B. æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ã€‚ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡</p><p>æ¯”å¦‚ç”µè„‘çš„ä¸»æ¿åäº†ï¼Œå¦‚æœå¯¼è‡´ cpuã€å†…å­˜éƒ½åäº†ï¼Œå°±ä¸åˆç†ã€‚åŒæ ·çš„ï¼Œcpu åäº†ï¼Œå¯¼è‡´å†…å­˜ã€ä¸»æ¿åäº†ä¹Ÿä¸åˆç†</p><h3 id="é‡Œæ°ä»£æ¢åŸåˆ™"><a class="header-anchor" href="#é‡Œæ°ä»£æ¢åŸåˆ™" aria-hidden="true">#</a> é‡Œæ°ä»£æ¢åŸåˆ™</h3><p>ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚æœä½¿ç”¨çš„æ˜¯ä¸€ä¸ªçˆ¶ç±»çš„è¯ï¼Œé‚£ä¹ˆä¸€å®šé€‚ç”¨å…¶å­ç±»ï¼Œè€Œä¸”å®ƒå¯Ÿè§‰ä¸å‡ºçˆ¶ç±»å’Œå­ç±»å¯¹è±¡çš„åŒºåˆ«ã€‚å°±æ˜¯è¯´ï¼Œåœ¨è½¯ä»¶é‡Œé¢ï¼ŒæŠŠçˆ¶ç±»éƒ½æ›¿æ¢æˆå®ƒçš„å­ç±»ï¼Œç¨‹åºçš„è¡Œä¸ºæ²¡æœ‰å˜åŒ–ç®€å•è¯´ï¼Œå­ç±»å‹å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰ä»–ä»¬çš„çˆ¶ç±»å‹ã€‚</p><p>æ­£æ˜¯ç”±äºå­ç±»å‹çš„å¯æ›¿æ¢æ€§æ‰ä½¿å¾—ä½¿ç”¨çˆ¶ç±»ç±»å‹çš„æ¨¡å—åœ¨æ— éœ€ä¿®æ”¹çš„æƒ…å†µä¸‹å°±å¯ä»¥æ‰©å±•</p><h2 id="å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼"><a class="header-anchor" href="#å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼" aria-hidden="true">#</a> å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼</h2><h3 id="æ¥å£"><a class="header-anchor" href="#æ¥å£" aria-hidden="true">#</a> æ¥å£</h3><p>æ¥å£è§„å®šæŸä¸ªå¯¹è±¡å¿…é¡»æœ‰å“ªäº›æ–¹æ³•ï¼Œä½†ä¸è§„å®šæ–¹æ³•çš„å…·ä½“å®ç° åˆ©</p><ul><li>è‡ªæˆ‘æè¿°æ€§</li></ul><p>å¼Šï¼š</p><ul><li>js æ²¡æœ‰å†…ç½®æ¥å£ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†è¯­è¨€çš„çµæ´»æ€§</li></ul><h3 id="é—­åŒ…"><a class="header-anchor" href="#é—­åŒ…" aria-hidden="true">#</a> é—­åŒ…</h3><p>å…¶å®å°±æ˜¯ä¸ºäº†è§£å†³æ›¾ç» js æ²¡æœ‰ let å’Œ const æ—¶çš„é—®é¢˜ã€‚js åªæœ‰å‡½æ•°å…·æœ‰ä½œç”¨åŸŸï¼Œåœ¨å‡½æ•°å¤–éƒ¨ç”¨ var å£°æ˜çš„éƒ½æ˜¯å…¨å±€å˜é‡ â€‹</p><p>æœ‰ä¸ªå¼Šç«¯å°±æ˜¯ç›´æ¥åœ¨ prototype åŸå‹ä¸Šå£°æ˜å‡½æ•°ï¼Œå‡½æ•°ä¼šè¢«åŸå‹é“¾é‡å¤åˆ©ç”¨ï¼Œå†…å­˜ä¸­åªæœ‰ä¸€ä»½ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨é—­åŒ…çš„æ–¹å¼éœ€è¦æ¯æ¬¡ç”Ÿæˆæ–°çš„å‡½æ•°çš„å‰¯æœ¬ï¼Œä¼šè€—è´¹æ›´å¤šçš„å†…å­˜ å¹¶ä¸”è¿™ç§åˆ›å»ºæ¨¡å¼ä¸åˆ©äºæ´¾ç”Ÿå­ç±»ï¼Œå› ä¸ºæ´¾ç”Ÿå‡ºçš„å­ç±»ä¸èƒ½è®¿é—®è¶…ç±»çš„æ‰€æœ‰ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¿™è¢«ç§°ä¸ºç»§æ‰¿ç ´åå°è£…</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">Book</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> _name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>newName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Book</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">getProtoName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">&#39;xxxx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸éœ€è¦è®¿é—®ç§æœ‰å±æ€§çš„æ–¹æ³•ç›´æ¥åœ¨ prototype ä¸­å£°æ˜ï¼Œéœ€è¦è®¿é—®ç§æœ‰å±æ€§çš„ç‰¹æƒæ–¹æ³•æ‰éœ€è¦æŒ‚åœ¨ this ä¸Šã€‚ ä¸€èˆ¬ä½¿ç”¨ç›´æ¥è¿”å›å‡½æ•°å°±å¯ä»¥äº†</p><h3 id="ç»§æ‰¿"><a class="header-anchor" href="#ç»§æ‰¿" aria-hidden="true">#</a> ç»§æ‰¿</h3><div class="language-javascript"><pre><code><span class="token comment">// æœ‰è¿™ä¹ˆä¸€ä¸ªPersonç±»</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ç±»å¼ç»§æ‰¿"><a class="header-anchor" href="#ç±»å¼ç»§æ‰¿" aria-hidden="true">#</a> ç±»å¼ç»§æ‰¿</h4><div class="language-javascript"><pre><code><span class="token comment">// ä½¿ç”¨çš„æ—¶å€™é€šè¿‡new</span>
<span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// readerå°±å¯ä»¥ä½¿ç”¨Personçš„getNameæ–¹æ³•</span>
reader<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="åŸå‹é“¾ç»§æ‰¿"><a class="header-anchor" href="#åŸå‹é“¾ç»§æ‰¿" aria-hidden="true">#</a> åŸå‹é“¾ç»§æ‰¿</h4><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">Author</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> books</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>books <span class="token operator">=</span> books<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åŸå‹æŒ‚æˆPersonï¼Œä½†æ˜¯æ„é€ å™¨æ–¹æ³•è¦ç”¨è‡ªå·±çš„</span>
<span class="token class-name">Author</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Author</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Author<span class="token punctuation">;</span>
<span class="token class-name">Author</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getBooks</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>books<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ç­–ç•¥æ¨¡å¼"><a class="header-anchor" href="#ç­–ç•¥æ¨¡å¼" aria-hidden="true">#</a> ç­–ç•¥æ¨¡å¼</h3><p>å®šä¹‰äº†ç®—æ³•å®¶æ—ï¼Œåˆ†åˆ«åˆ†è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ï¼Œä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·</p><div class="language-ts"><pre><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
  <span class="token keyword">abstract</span> <span class="token function">AlogorithmInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteStrategyA</span> <span class="token keyword">extends</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
  <span class="token function">AlogorithmInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    consol<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Aç®—æ³•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteStrategyB</span> <span class="token keyword">extends</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
  <span class="token function">AlogorithmInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Bç®—æ³•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">ContextInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>strategy<span class="token punctuation">.</span><span class="token function">AlogorithmInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteStrategyA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">ContextInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å…¶å®å°±æ˜¯å°è£…å¤šä¸ªä¸åŒåŠŸèƒ½çš„å‡½æ•°ï¼Œç”¨æ¡ä»¶è¯­å¥å»åŒ¹é…å¯¹åº”çš„ç­–ç•¥ï¼Œä¸ºäº†é¿å…å®¢æˆ·ç«¯éœ€è¦å†™æ¡ä»¶ï¼Œå¯ä»¥ç»“åˆç®€å•å·¥å‚ï¼Œå°†æ¡ä»¶åŒ¹é…æ”¾åˆ°å·¥å‚å†…</p><h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a class="header-anchor" href="#è§‚å¯Ÿè€…æ¨¡å¼" aria-hidden="true">#</a> è§‚å¯Ÿè€…æ¨¡å¼</h3><p>åˆåå‘å¸ƒè®¢é˜…æ¨¡å¼ æœ€å¸¸è§çš„è§‚å¯Ÿè€…æ¨¡å¼çš„ç”¨é€”æ˜¯ dom çš„äº‹ä»¶ç›‘å¬</p><div class="language-javascript"><pre><code><span class="token comment">//ä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨addEventListener</span>
<span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySlector</span><span class="token punctuation">(</span><span class="token string">&#39;#id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//handle click</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//handle click</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> fn1<span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> fn2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ä½¿ç”¨äº‹ä»¶å¤„ç†å™¨</span>
<span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySlector</span><span class="token punctuation">(</span><span class="token string">&#39;#id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//handle click</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//handle click</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>onClick <span class="token operator">=</span> fn1<span class="token punctuation">;</span>
el<span class="token punctuation">.</span>onClick <span class="token operator">=</span> fn2<span class="token punctuation">;</span>
</code></pre></div><h4 id="å¸¸è§å®ç°"><a class="header-anchor" href="#å¸¸è§å®ç°" aria-hidden="true">#</a> å¸¸è§å®ç°</h4><p>æœ‰å¾ˆå¤šå®ç°æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯åšå˜æ¢ï¼Œå¯ä»¥æ˜¯ç”±å‘å¸ƒè€…æ¥å†³å®šè®¢é˜…è€…çš„è®¢é˜…ä¸å¦ï¼Œä¹Ÿå¯ä»¥æ˜¯è®¢é˜…è€…è‡ªå·±å†³å®šè®¢é˜…ä¸å¦ï¼Œè¿˜å¯ä»¥æ˜¯è®¢é˜…è€…ç›´æ¥ä»å‘å¸ƒè€…é‚£é‡Œä¸»åŠ¨æ‹‰å–æ•°æ®ï¼Œå¹¶ä¸”ç½‘ç»œä¸Šå¾ˆå¤šè¨€è®ºå·²ç»å°†è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…åˆ†å¼€æ¥ï¼Œè§‚å¯Ÿè€…æ¨¡å¼åŠ ä¸Šä¸€ä¸ªäº‹ä»¶è°ƒåº¦ä¸­å¿ƒå³æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¸¸è§å®ç°</p><div class="language-javascript"><pre><code><span class="token keyword">class</span> <span class="token class-name">Publisher</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">removeSubscriber</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      subscriber<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Subscriber</span> <span class="token punctuation">{</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">subscribeTo</span><span class="token punctuation">(</span><span class="token parameter">publisher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    publisher<span class="token punctuation">.</span><span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> publisher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Publisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> subscriber1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> subscriber2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> subscriber3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subscriber1<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;1 update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
subscriber2<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2 update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
subscriber3<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3 update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//æµ‹è¯•</span>
subscriber1<span class="token punctuation">.</span><span class="token function">subscribeTo</span><span class="token punctuation">(</span>publisher<span class="token punctuation">)</span><span class="token punctuation">;</span>
subscriber2<span class="token punctuation">.</span><span class="token function">subscribeTo</span><span class="token punctuation">(</span>publisher<span class="token punctuation">)</span><span class="token punctuation">;</span>
subscriber3<span class="token punctuation">.</span><span class="token function">subscribeTo</span><span class="token punctuation">(</span>publisher<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å‘å¸ƒ/è®¢é˜…æ¨¡å¼å®ç°ï¼Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€å¯¹å¤šï¼Œå‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯ä¸€å¯¹ä¸€å¯¹å¤šï¼ˆå‘å¸ƒè€…ä¸ä¸è§‚å¯Ÿè€…ç›´æ¥æ¥è§¦)</p><div class="language-javascript"><pre><code><span class="token comment">//è®¢é˜…è€…</span>
<span class="token keyword">class</span> <span class="token class-name">Subscriber</span> <span class="token punctuation">{</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">//update(event){}</span>
  <span class="token function">subscribeTo</span><span class="token punctuation">(</span><span class="token parameter">channel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    channel<span class="token punctuation">.</span><span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//ä¸­é—´é€šé“</span>
<span class="token keyword">class</span> <span class="token class-name">Channel</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">removeSubscriber</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//publish(event){</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      subscriber<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//subscriber.update(event)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å‘å¸ƒè€…</span>
<span class="token keyword">class</span> <span class="token class-name">Publisher</span> <span class="token punctuation">{</span>
  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token parameter">channel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    channel<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//channel.publish(event)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ï¼Œnewä¸€ä¸ªä¸­é—´é€šé“å¯¹è±¡ã€å‘å¸ƒè€…å¯¹è±¡å’Œä¸‰ä¸ªè®¢é˜…è€…å¯¹è±¡</span>
<span class="token keyword">let</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> publisher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Publisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> subscriber1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> subscriber2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> subscriber3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

subscriber1<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;1 update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
subscriber2<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2 update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
subscriber3<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3 update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//è®¢é˜…è€…å‘ä¸­é—´é€šé“è®¢é˜…</span>
subscriber1<span class="token punctuation">.</span><span class="token function">subscribeTo</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
subscriber2<span class="token punctuation">.</span><span class="token function">subscribeTo</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
subscriber3<span class="token punctuation">.</span><span class="token function">subscribeTo</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//å‘å¸ƒè€…åªå‘ä¸­é—´é€šé“å‘å¸ƒäº‹ä»¶</span>
publisher<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="åˆ©-1"><a class="header-anchor" href="#åˆ©-1" aria-hidden="true">#</a> åˆ©</h5><p>æ¯”å¦‚æ³¨å†Œä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚å€ŸåŠ©ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨å»å¤„ç†å„ç§è¡Œä¸ºï¼Œå°†ä¿¡æ¯ç”±ä¸€ä¸ªè®¢é˜…ä¸­å¿ƒå‘å¸ƒï¼Œå°±ä¸éœ€è¦åå¤çš„åŒæ ·çš„å…ƒç´ æ·»åŠ å„è‡ªçš„äº‹ä»¶ç›‘å¬å™¨ã€‚åˆ©äºå‡å°‘ç³»ç»Ÿå¼€é”€å¹¶æé«˜ç¨‹åºçš„å¯ç»´æŠ¤æ€§</p><h5 id="å¼Š-1"><a class="header-anchor" href="#å¼Š-1" aria-hidden="true">#</a> å¼Š</h5><p>åˆ›å»ºè¢«è§‚å¯Ÿå¯¹è±¡å¸¦æ¥çš„åŠ è½½æ—¶é—´å¼€é”€å¯èƒ½ä¼šè¾ƒå¤§ã€‚å¯ä»¥é€šè¿‡æ‡’åŠ è½½ï¼ŒæŠŠæ–°çš„è¢«è§‚å¯Ÿå¯¹è±¡çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°éœ€è¦å‘é€äº‹ä»¶é€šçŸ¥çš„æ—¶å€™ã€‚</p><h3 id="å»ºé€ è€…æ¨¡å¼"><a class="header-anchor" href="#å»ºé€ è€…æ¨¡å¼" aria-hidden="true">#</a> å»ºé€ è€…æ¨¡å¼</h3><p>è®²ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸ä»–çš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤º</p><div class="language-ts"><pre><code><span class="token comment">// ç”»ä¸€ä¸ªå°äººï¼Œéœ€è¦æœ‰å¤´ã€èº«ä½“ã€æ‰‹è„š</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PersonBuilder</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> pen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>graph <span class="token operator">=</span> graph<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pen <span class="token operator">=</span> pen<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">abstract</span> <span class="token function">buildHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">buildBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">buildArmLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">buildArmRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">buildLegLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token keyword">abstract</span> <span class="token function">buildLegRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç˜¦äººç±»</span>
<span class="token keyword">class</span> <span class="token class-name">PersonThinBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">PersonBuilder</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> pen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">buildHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">buildBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">buildArmLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">buildArmRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">buildLegLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">buildLegRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŒ‡æŒ¥è€…</span>
<span class="token keyword">class</span> <span class="token class-name">PersonDirector</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>pb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç”¨æˆ·éœ€è¦å‘Šè¯‰æŒ‡æŒ¥è€…è¦ä»€ä¹ˆæ ·çš„å°äºº</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pb <span class="token operator">=</span> pb<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">CreatePerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pb<span class="token punctuation">.</span><span class="token function">buildHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pb<span class="token punctuation">.</span><span class="token function">buildBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pd<span class="token punctuation">.</span><span class="token function">buildArmLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pd<span class="token punctuation">.</span><span class="token function">buildArmRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pd<span class="token punctuation">.</span><span class="token function">buildLegLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pd<span class="token punctuation">.</span><span class="token function">buildLegRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å·¥å‚æ¨¡å¼"><a class="header-anchor" href="#å·¥å‚æ¨¡å¼" aria-hidden="true">#</a> å·¥å‚æ¨¡å¼</h3><h4 id="ç®€å•å·¥å‚ï¼ˆé™æ€å·¥å‚ï¼‰"><a class="header-anchor" href="#ç®€å•å·¥å‚ï¼ˆé™æ€å·¥å‚ï¼‰" aria-hidden="true">#</a> ç®€å•å·¥å‚ï¼ˆé™æ€å·¥å‚ï¼‰</h4><p>ä»¥è‡ªè¡Œè½¦å•†åº—ä¸ºä¾‹,å•†åº—æŠŠç”Ÿäº§è‡ªè¡Œè½¦çš„å·¥ä½œäº¤ç»™ä¸€ä¸ªå¤–éƒ¨å¯¹è±¡</p><div class="language-javascript"><pre><code><span class="token comment">//Userç±»</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token comment">//æ„é€ å™¨</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> opt<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>viewPage <span class="token operator">=</span> opt<span class="token punctuation">.</span>viewPage<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//é™æ€æ–¹æ³•</span>
  <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token parameter">role</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>role<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&#39;superAdmin&#39;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&#39;è¶…çº§ç®¡ç†å‘˜&#39;</span><span class="token punctuation">,</span>
          viewPage<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;é¦–é¡µ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é€šè®¯å½•&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å‘ç°é¡µ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;åº”ç”¨æ•°æ®&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æƒé™ç®¡ç†&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&#39;admin&#39;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&#39;ç®¡ç†å‘˜&#39;</span><span class="token punctuation">,</span>
          viewPage<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;é¦–é¡µ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é€šè®¯å½•&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å‘ç°é¡µ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;åº”ç”¨æ•°æ®&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&#39;user&#39;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&#39;æ™®é€šç”¨æˆ·&#39;</span><span class="token punctuation">,</span>
          viewPage<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;é¦–é¡µ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é€šè®¯å½•&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å‘ç°é¡µ&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;å‚æ•°é”™è¯¯, å¯é€‰å‚æ•°:superAdminã€adminã€user&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> superAdmin <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&#39;superAdmin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> admin <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> normalUser <span class="token operator">=</span> User<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="åˆ©-2"><a class="header-anchor" href="#åˆ©-2" aria-hidden="true">#</a> åˆ©</h5><p>å¯¹äºæ„å»ºé€»è¾‘ç®€å•ã€ç›¸åŒä¸”éƒ½æ˜¯åŒç§ç±»çš„å¯¹è±¡å·¥å‚æ˜¯åˆé€‚çš„</p><h5 id="å¼Š-2"><a class="header-anchor" href="#å¼Š-2" aria-hidden="true">#</a> å¼Š</h5><p>éœ€è¦æ·»åŠ æ–°çš„å¯¹è±¡ç§ç±»æ—¶ï¼Œå¾—å»ä¿®æ”¹æºä»£ç ã€‚åªé€‚ç”¨äºåˆ›å»ºå¯¹è±¡æ•°é‡å°‘ã€åˆ›å»ºé€»è¾‘ä¸å¤æ‚æ—¶ä½¿ç”¨</p><h4 id="å·¥å‚æ¨¡å¼-1"><a class="header-anchor" href="#å·¥å‚æ¨¡å¼-1" aria-hidden="true">#</a> å·¥å‚æ¨¡å¼</h4><p>ä¸ç®€å•å·¥å‚ç›¸æ¯”ï¼Œä¸æ˜¯ç”¨å¦ä¸€ä¸ªç±»æ¥ç”Ÿäº§å¯¹è±¡ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªå­ç±»ï¼Œæ ¸å¿ƒç±»æˆäº†æŠ½è±¡ç±»ã€‚ è¿™æ ·æ·»åŠ æ–°çš„ç±»æ—¶å°±æ— éœ€ä¿®æ”¹åŸºç¡€çš„å·¥å‚æ–¹æ³•ï¼Œåªéœ€è¦å°†å­ç±»æ³¨å†Œè¿›å·¥å‚æ–¹æ³•ã€‚</p><div class="language-javascript"><pre><code><span class="token keyword">class</span> <span class="token class-name">FunctionFactoryBase</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŠ½è±¡ç±»</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">role</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> FunctionFactoryBase<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>role <span class="token operator">=</span> role<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">FunctionFactory1</span> <span class="token keyword">extends</span> <span class="token class-name">FunctionFactoryBase</span> <span class="token punctuation">{</span>
  <span class="token comment">// å­ç±»</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">role</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">role</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>role<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&#39;admin&#39;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FunctionFactory1</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          role<span class="token operator">:</span> <span class="token string">&#39;ç®¡ç†å‘˜&#39;</span><span class="token punctuation">,</span>
          permissions<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&#39;è®¾ç½®&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;åˆ é™¤&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;æ–°å¢&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;åˆ›å»º&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;å¼€å‘&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;æ¨é€&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;æé—®&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;è¯„è®º&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&#39;developer&#39;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FunctionFactory1</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          role<span class="token operator">:</span> <span class="token string">&#39;å¼€å‘è€…&#39;</span><span class="token punctuation">,</span>
          permissions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;å¼€å‘&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¨é€&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æé—®&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è¯„è®º&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;å‚æ•°åªèƒ½ä¸º admin æˆ– developer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> role<span class="token punctuation">,</span> permissions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>role<span class="token punctuation">;</span>
    <span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æ˜¯ä¸€ä¸ª</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>role<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, æƒé™ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>permissions<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">FunctionFactory2</span> <span class="token keyword">extends</span> <span class="token class-name">FunctionFactoryBase</span> <span class="token punctuation">{</span>
  <span class="token comment">// å­ç±»</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">role</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">role</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>role<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&#39;user&#39;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FunctionFactory2</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          role<span class="token operator">:</span> <span class="token string">&#39;ç”¨æˆ·&#39;</span><span class="token punctuation">,</span>
          permissions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;æé—®&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è¯„è®º&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;å‚æ•°åªèƒ½ä¸º user&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> role<span class="token punctuation">,</span> permissions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>role<span class="token punctuation">;</span>
    <span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æ˜¯ä¸€ä¸ª</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>role<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, æƒé™ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>permissions<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// let xl = new FunctionFactoryBase();</span>
<span class="token comment">// æ­¤è¡Œä¼šæŠ¥é”™ï¼Œæ³¨é‡Šåæ–¹å¯æ­£å¸¸æ‰§è¡Œåé¢</span>

<span class="token keyword">let</span> xm <span class="token operator">=</span> FunctionFactory1<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xm<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> xh <span class="token operator">=</span> FunctionFactory1<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;developer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xh<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> user1 <span class="token operator">=</span> FunctionFactory2<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™æ ·ä¸€æ¥ï¼Œæ·»åŠ æ–°ç±»æ— éœ€ä¿®æ”¹æŠ½è±¡ç±»å·¥å‚å†…æºä»£ç ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å­ç±»ï¼ˆå·¥å‚ï¼‰ åŸºç¡€å·¥å‚é‡Œå®šä¹‰çš„æ˜¯å„å­å·¥å‚æŠ½è±¡æ–¹æ³•ï¼Œå­å·¥å‚å¯å…·ä½“å®šä¹‰å„è‡ªçš„è¡Œä¸º</p><p>ç¼ºç‚¹åœ¨äºéšç€å·¥å‚ç§ç±»è¶Šæ¥è¶Šå¤šï¼Œç±»ä¼šè¶Šæ¥è¶Šå¤šï¼Œå¢åŠ ç³»ç»Ÿå¤æ‚åº¦</p><h4 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a class="header-anchor" href="#æŠ½è±¡å·¥å‚æ¨¡å¼" aria-hidden="true">#</a> æŠ½è±¡å·¥å‚æ¨¡å¼</h4><p>å·¥å‚æ¨¡å¼é’ˆå¯¹ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ã€è€ŒæŠ½è±¡å·¥å‚é’ˆå¯¹å¤šä¸ªäº§å“ç­‰çº§ç»“æ„ æ¯”å¦‚ï¼Œåä¸ºæ‰‹æœºï¼Œå¯ä»¥æœ‰ mateã€p30 ç­‰ç­‰å­ç±» ä½†æ˜¯åä¸ºä¸åªåšæ‰‹æœºï¼Œè¿˜æœ‰ç”µè„‘ã€ç”µè§†ï¼Œç”µè„‘ã€ç”µè§†ã€æ‰‹æœºä½äºä¸åŒçš„äº§å“ç™»è®°ç»“æ„ï¼Œä½†æ˜¯ä»–ä»¬æ˜¯ç”±ä¸€ä¸ªå·¥å‚ç”Ÿäº§çš„ï¼Œç§°ä¸ºäº§å“æ—</p><div class="language-javascript"><pre><code><span class="token comment">//è¿™é‡Œæ±½è½¦å‚å•†ä½œä¸ºä¸€ä¸ªäº§å“æ—ï¼Œæ—¢å¯ä»¥ç”Ÿäº§è½¦ï¼Œä¹Ÿå¯ä»¥ç”Ÿäº§å‘åŠ¨æœº</span>
<span class="token keyword">class</span> <span class="token class-name">AutomakerFactory</span> <span class="token punctuation">{</span>
  <span class="token function">createCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸èƒ½è°ƒç”¨æŠ½è±¡æ–¹æ³•ï¼Œè¯·è‡ªå·±å®ç°&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">createEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸èƒ½è°ƒç”¨æŠ½è±¡æ–¹æ³•ï¼Œè¯·è‡ªå·±å®ç°&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">BenzFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AutomakerFactory</span> <span class="token punctuation">{</span>
  <span class="token function">createCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BenzCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">createEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BenzEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AudiFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AutomakerFactory</span> <span class="token punctuation">{</span>
  <span class="token function">createCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AudiCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">createEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AudiEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token function">drive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸èƒ½è°ƒç”¨æŠ½è±¡æ–¹æ³•ï¼Œè¯·è‡ªå·±å®ç°&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">BenzCar</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token function">drive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Benz drive&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AudiCar</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span>
  <span class="token function">drive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Audi drive&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Engine</span> <span class="token punctuation">{</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸èƒ½è°ƒç”¨æŠ½è±¡æ–¹æ³•ï¼Œè¯·è‡ªå·±å®ç°&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">BenzEngine</span> <span class="token keyword">extends</span> <span class="token class-name">Engine</span> <span class="token punctuation">{</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Benz engine start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AudiEngine</span> <span class="token keyword">extends</span> <span class="token class-name">Engine</span> <span class="token punctuation">{</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Audi engine start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> benz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BenzFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> benzCar <span class="token operator">=</span> benz<span class="token punctuation">.</span><span class="token function">createCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> benzEngine <span class="token operator">=</span> benz<span class="token punctuation">.</span><span class="token function">createEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> audi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudiFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> audiCar <span class="token operator">=</span> audi<span class="token punctuation">.</span><span class="token function">createCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> audiEngine <span class="token operator">=</span> audi<span class="token punctuation">.</span><span class="token function">createEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

benzCar<span class="token punctuation">.</span><span class="token function">drive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Benz drive</span>
benzEngine<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Benz engine start</span>

audiCar<span class="token punctuation">.</span><span class="token function">drive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Audi drive</span>
audiEngine<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Audi engine start</span>
</code></pre></div><p>ç¼ºç‚¹ä¹Ÿæ˜¯éšç€åˆ†ç±»è¶Šæ¥è¶Šå¤šï¼Œå®šä¹‰çš„ç±»ä¼šè¶Šæ¥è¶Šå¤šï¼Œç³»ç»Ÿå¤æ‚åº¦å˜é«˜</p><p>å‚è€ƒï¼š<a href="https://juejin.cn/post/6844903653774458888" target="_blank" rel="noopener noreferrer">å·¥å‚æ¨¡å¼</a>ã€<a href="https://juejin.cn/post/6844903895546724366" target="_blank" rel="noopener noreferrer">å·¥å‚æ¨¡å¼è¯¦è§£</a>ã€js è®¾è®¡æ¨¡å¼ã€<a href="https://juejin.cn/post/6844904018393710606" target="_blank" rel="noopener noreferrer">æŠ½è±¡å·¥å‚æ¨¡å¼-å­—èŠ‚</a></p><h3 id="è£…é¥°è€…æ¨¡å¼"><a class="header-anchor" href="#è£…é¥°è€…æ¨¡å¼" aria-hidden="true">#</a> è£…é¥°è€…æ¨¡å¼</h3><p>ä¸ºäº†é¿å…ç»å¸¸è¦å»ä¿®æ”¹å¯¹è±¡è‡ªèº«ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°è£…é¥°è€…æ¨¡å¼ è£…é¥°è€…æ¨¡å¼å¯ä»¥ç»™æŸä¸ªå¯¹è±¡æ·»åŠ é¢å¤–çš„èŒè´£ï¼Œè€Œä¸ä¼šå½±å“è¯¥ç±»çš„æ´¾ç”Ÿå¯¹è±¡ æ ¸å¿ƒæ€æƒ³æ˜¯è£…é¥°ä¸€äº›ä¸œè¥¿ï¼Œä½†ä¸å½±å“åŸæ¥çš„åŠŸèƒ½ï¼Œç»™å¯¹è±¡å¢åŠ ä¸€ä¸ªé¢å¤–çš„åŠŸèƒ½ åœ¨å‰ç«¯é¢†åŸŸï¼Œå¯ä»¥çœ‹ä½œåœ¨æŸä¸ªå‡½æ•°æ‰§è¡Œå‰æˆ–è€…æ‰§è¡Œåè¿è¡Œä¸€äº›é¢å¤–çš„å°åŠŸèƒ½</p><ul><li>AOP é¢å‘åˆ‡é¢ç¼–ç¨‹</li></ul><div class="language-javascript"><pre><code><span class="token keyword">const</span> <span class="token constant">AOP</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token constant">AOP</span><span class="token punctuation">.</span><span class="token function-variable function">before</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> before</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">before</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token constant">AOP</span><span class="token punctuation">.</span><span class="token function-variable function">after</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> after</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">after</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>es7 decorator</li></ul><div class="language-javascript"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">losgWrapper</span><span class="token operator">=</span><span class="token parameter">targetClass</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> originRender <span class="token operator">=</span> targetClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>render
  targetClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">render</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">originRender</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token function">yyyy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> targetClass
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">App</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

App<span class="token operator">=</span><span class="token function">logWrapper</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token comment">// es7ææ¡ˆä¿®é¥°ç¬¦ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨@logWrapperè£…é¥°ï¼Œtypescriptä¹Ÿæ”¯æŒä¿®é¥°ç¬¦</span>
@logWrapper
<span class="token keyword">class</span> <span class="token class-name">App</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>some code
<span class="token punctuation">}</span>
</code></pre></div><ul><li>è‡ªè¡Œè½¦çš„ä¾‹å­</li></ul><div class="language-javascript"><pre><code><span class="token keyword">class</span> <span class="token class-name">Bicycle</span> <span class="token punctuation">{</span>
  <span class="token function">wash</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ¸…æ´—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">ride</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å‡ºå‘&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">BicycleDecorator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">bicycle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bicycle <span class="token operator">=</span> bicycle<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">wash</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bicycle<span class="token punctuation">.</span><span class="token function">wash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">ride</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bicycle<span class="token punctuation">.</span><span class="token function">ride</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bicycle<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">HeadlightDecorator</span> <span class="token keyword">extends</span> <span class="token class-name">BicycleDecorator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">bicycle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>bicycle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bicycle<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> bicycle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bicycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bicycle<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bicycle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeadlightDecorator</span><span class="token punctuation">(</span>bicycle<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bicycle<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//100</span>
<span class="token comment">//200</span>
</code></pre></div><h3 id="å•ä¾‹æ¨¡å¼"><a class="header-anchor" href="#å•ä¾‹æ¨¡å¼" aria-hidden="true">#</a> å•ä¾‹æ¨¡å¼</h3><p>æä¾›ä¸€ä¸ªå…¨å±€å•ä¸€çš„å®ä¾‹ï¼Œç¡®ä¿æ‰€æœ‰ä»£ç ä½¿ç”¨åŒä¸€ä»½å…¨å±€èµ„æºã€‚</p><ul><li>åŸºæœ¬çš„å•ä¾‹æ¨¡å¼</li></ul><p>ä¸€å¥è¯æ€»ç»“å°±æ˜¯å•ä½“å°±æ˜¯ä¸€ä¸ªåªèƒ½è¢«å®ä¾‹åŒ–ä¸€æ¬¡å¹¶ä¸”å¯ä»¥é€šè¿‡ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è®¿é—®ç‚¹è®¿é—®çš„ç±» ä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ä¸ªç”¨æ¥åˆ’åˆ†å‘½åç©ºé—´å¹¶å°†ä¸€æ‰¹ç›¸å…³æ–¹æ³•å’Œå±æ€§ç»„ç»‡åœ¨ä¸€èµ·çš„å¯¹è±¡ï¼Œå¦‚æœå¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œæ™ºèƒ½å‘—å®ä¾‹åŒ–ä¸€æ¬¡</p><div class="language-javascript"><pre><code><span class="token keyword">let</span> singleTon <span class="token operator">=</span> <span class="token punctuation">{</span>
  name1<span class="token operator">:</span> <span class="token string">&#39;xxx&#39;</span><span class="token punctuation">,</span>
  name2<span class="token operator">:</span> <span class="token string">&#39;yyy&#39;</span><span class="token punctuation">,</span>
  <span class="token function">methods1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>é¢å‘å¯¹è±¡è®¾è®¡çš„ç¬¬ä¸€æ¡åŸåˆ™ï¼Œç±»å¯ä»¥è¢«æ‹“å±•ï¼Œä½†ä¸èƒ½è¢«ä¿®æ”¹ã€‚æ‰€ä»¥åˆ›å»ºå®Œè¿™ä¹ˆä¸€ä¸ªå•ä½“æ¨¡å¼ï¼Œä¸åº”è¯¥ä½¿ç”¨ delete æ“ä½œç¬¦å»æ›´æ”¹ä»– å¯¹è±¡å­—é¢é‡åªæ˜¯ç”¨æ¥åˆ›å»ºå•ä½“çš„æ–¹å¼ä¹‹ä¸€ å•ä½“é€šå¸¸æœ‰ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼ŒåŒ…æ‹¬æ–¹æ³•å’Œå±æ€§æˆå‘˜ï¼Œä»¥åŠç”¨äºè®¿é—®å®ƒçš„å˜é‡ ä½¿ç”¨å•ä½“æ¨¡å¼èƒ½æœ‰æ•ˆé˜²æ­¢æ–¹æ³•è¢«ä¸åŒçš„äººæ„å¤–æ”¹å†™ â€‹</p><p>ä½¿ç”¨é—­åŒ…å†™çš„å•ä½“æ¨¡å¼åˆç§°ä¸ºæ¨¡å—æ¨¡å¼ â€‹</p><p>åœ¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œè¿˜æœ‰ä¸€ç§ä¼˜åŒ–æ–¹å¼æ˜¯ä½¿ç”¨æƒ°æ€§å®ä¾‹åŒ–ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ª getInstance()æ–¹æ³•ï¼Œå®ƒä¼šå»æ£€æŸ¥å•ä½“æ˜¯å¦å·²ç»è¢«å®ä¾‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰æ‰ä¼šåˆ›å»ºå¹¶è¿”å›å…¶å®ä¾‹ï¼Œå¦‚æœå·²ç»å®ä¾‹åŒ–ï¼Œå®ƒä¼šè¿”å›ç°æœ‰å®ä¾‹ã€‚è°ƒç”¨æ–¹å¼ä¸º x.getInstace().method()</p><h3 id="é“¾å¼è°ƒç”¨"><a class="header-anchor" href="#é“¾å¼è°ƒç”¨" aria-hidden="true">#</a> é“¾å¼è°ƒç”¨</h3><p>jQuery çš„è®¾è®¡æ–¹å¼ï¼Œæ¯æ¬¡æ“ä½œéƒ½ä¼šè¿”å›åŸå¯¹è±¡</p><h3 id="æ¡¥æ¥æ¨¡å¼"><a class="header-anchor" href="#æ¡¥æ¥æ¨¡å¼" aria-hidden="true">#</a> æ¡¥æ¥æ¨¡å¼</h3><p>æ¡¥æ¥æ¨¡å¼èƒ½å¤Ÿåœ¨ä¸æ”¹å˜è°ƒç”¨æ–¹å¼çš„æƒ…å†µä¸‹è®© class1 å’Œ class2 ç‹¬ç«‹äº bridgeClass å‘ç”Ÿæ”¹å˜</p><div class="language-javascript"><pre><code><span class="token keyword">let</span> <span class="token function-variable function">Class1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>c <span class="token operator">=</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">Class2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>d <span class="token operator">=</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">BridgeClass</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Class1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>two <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Class2</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å¤ªæŠ½è±¡ã€‚å…¶å®å¯ä»¥çœ‹æˆæ˜¯å°†æ±½è½¦çš„è½¦å‹å’Œå¼•æ“åˆ†ç¦»ï¼Œç”¨çš„æ—¶å€™ç»„è£…ä¸€ä¸‹</p><div class="language-javascript"><pre><code><span class="token comment">// æ¯”å¦‚ç°åœ¨æœ‰ä¸ªCarç±»ï¼Œæœ‰ä¸ªç»§æ‰¿äºCarçš„RefinedCarï¼Œæ„é€ æ–¹æ³•ä¸­æ¥å—ä¸€ä¸ªEngineå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œ</span>
<span class="token comment">// è¿™ä¸ªEngineä½œä¸ºå…·ä½“å¼•æ“çš„æŠ½è±¡ç±»</span>
<span class="token comment">// ä½¿ç”¨çš„æ—¶å€™åªéœ€è¦</span>
<span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RefinedCar</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HybirdEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è¿™æ ·ä¸€æ¥ï¼Œå¯ä»¥å®ç°è½¦å’Œå¼•æ“çš„ç‹¬ç«‹å¼€å‘</span>
</code></pre></div><p><img src="/Jarrett-blog/assets/car-engine.08bd5514.png" alt="image.png"></p><h3 id="ç»„åˆæ¨¡å¼"><a class="header-anchor" href="#ç»„åˆæ¨¡å¼" aria-hidden="true">#</a> ç»„åˆæ¨¡å¼</h3><p>ç»„åˆæ¨¡å¼é€‚åˆå±‚å±‚åµŒå¥—çš„æ ‘çŠ¶ç»“æ„ ç»„åˆæ¨¡å¼çš„å±‚æ¬¡ä½“ç³»ä¸­åˆ†ä¸ºå¶å¯¹è±¡å’Œç»„åˆå¯¹è±¡ã€‚ â€‹</p><p>ä¸¤ç§æƒ…å†µä¸‹é€‚åˆä½¿ç”¨ç»„åˆæ¨¡å¼</p><ul><li>å­˜åœ¨ä¸€æ‰¹ç»„ç»‡æˆæŸç§å±‚æ¬¡ä½“ç³»çš„å¯¹è±¡</li><li>å¸Œæœ›å¯¹è¿™æ‰¹å¯¹è±¡æˆ–å…¶ä¸­çš„ä¸€éƒ¨åˆ†å¯¹è±¡å®æ–½ä¸€ä¸ªæ“ä½œ</li></ul><h3 id="é—¨é¢æ¨¡å¼"><a class="header-anchor" href="#é—¨é¢æ¨¡å¼" aria-hidden="true">#</a> é—¨é¢æ¨¡å¼</h3><p>éå¸¸å¸¸ç”¨çš„æ¨¡å¼ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨</p><ul><li>æ¶ˆé™¤ç±»ä¸ä½¿ç”¨å®ƒçš„å®¢æˆ·ä»£ç ä¹‹é—´çš„è€¦åˆ</li><li>ç®€åŒ–ç±»çš„æ¥å£</li></ul><div class="language-javascript"><pre><code><span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">drive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="é€‚é…å™¨æ¨¡å¼"><a class="header-anchor" href="#é€‚é…å™¨æ¨¡å¼" aria-hidden="true">#</a> é€‚é…å™¨æ¨¡å¼</h3><p>ç”¨æ¥åè°ƒä¸åŒçš„æ¥å£ã€‚ä¸é—¨é¢æ¨¡å¼çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œå®åˆ™ä¸åŒã€‚ å®ƒä¸é—¨é¢æ¨¡å¼çš„å·®åˆ«åœ¨äºå¦‚ä½•æ”¹å˜æ¥å£ã€‚é—¨é¢å…ƒç´ å±•ç°çš„æ˜¯ä¸€ä¸ªç®€åŒ–çš„æ¥å£ï¼Œå®ƒå¹¶ä¸æä¾›é¢å¤–çš„é€‰æ‹©ï¼Œæœ‰æ—¶ä¸ºäº†æ–¹ä¾¿å®Œæˆå¸¸è§ä»»åŠ¡è¿˜ä¼šåšå‡ºä¸€äº›å˜‰å®šã€‚è€Œé€‚é…å™¨åˆ™è¦æŠŠä¸€ä¸ª pp{}æ¥å£è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ¥å£ï¼Œå¹¶ä¸ä¼šæ»¤é™¤ã€‚ å¯¹å‡½æ•°å‚æ•°çš„é€‚é…ï¼Œif else éƒ½æ˜¯é€‚é…å™¨æ¨¡å¼çš„ä½“ç°</p><h3 id="äº«å…ƒæ¨¡å¼"><a class="header-anchor" href="#äº«å…ƒæ¨¡å¼" aria-hidden="true">#</a> äº«å…ƒæ¨¡å¼</h3><p>æœ€é€‚åˆäºè§£å†³å› åˆ›å»ºå¤§é‡ç±»ä¼¼å¯¹è±¡è€Œç´¯åŠæ€§èƒ½çš„é—®é¢˜</p><p>äº«å…ƒæ¨¡å¼ç”¨äºå‡å°‘åº”ç”¨ç¨‹åºæ‰€éœ€å¯¹è±¡çš„æ•°é‡ã€‚å°†å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€åˆ’åˆ†ä¸ºå†…åœ¨æ•°æ®å’Œå¤–åœ¨æ•°æ®</p><ul><li>å†…åœ¨æ•°æ®ã€‚ç±»çš„å†…éƒ¨æ–¹æ³•æ‰€éœ€è¦çš„ä¿¡æ¯</li><li>å¤–åœ¨æ•°æ®ã€‚å¯ä»¥ä»ç±»èº«ä¸Šå‰¥ç¦»å¹¶å­˜å‚¨åœ¨å¤–éƒ¨çš„ä¿¡æ¯</li></ul><p>åˆ›å»ºäº«å…ƒå¯¹è±¡éœ€è¦ä½¿ç”¨å·¥å‚ã€‚æ˜¯ä¸ºäº†è·Ÿè¸ªåˆ°å·²ç»å®ä¾‹åŒ–çš„å„ä¸ªå¯¹è±¡</p><p>ä¸¾ä¾‹ï¼š</p><div class="language-js"><pre><code><span class="token comment">// è¡¨ç¤ºä¸€ä¸ªåŸå¸‚çš„æ‰€æœ‰æ±½è½¦ï¼Œéœ€è¦ä¿å­˜æ¯ä¸€è¾†æ±½è½¦çš„è¯¦ç»†æƒ…å†µç”šè‡³åŠå…¶æ‰€æœ‰æƒçš„è¯¦ç»†æƒ…å†µ</span>
<span class="token keyword">const</span> <span class="token function-variable function">Car</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">year<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>year <span class="token operator">=</span> year<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
  <span class="token comment">// å„ç§è¯¦ç»†ä¿¡æ¯</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Car</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>year<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>--</p><p>æ•°ä»¥ä¸‡è®¡çš„æ±½è½¦ä¿¡æ¯æ¶ˆè€—æ‰äº†å¤§é‡èµ„æºã€‚ä¸ºäº†ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨äº«å…ƒæ¨¡å¼å‡å°‘æ‰€éœ€å¯¹è±¡çš„æ•°ç›®</p><p>é¦–å…ˆåˆ’åˆ†å†…åœ¨çŠ¶æ€å’Œå¤–åœ¨çŠ¶æ€ã€‚è½¦å­çš„è‡ªç„¶å±æ€§è¾“å…¥å†…åœ¨æ•°æ®ï¼Œæ‰€æœ‰æƒå±æ€§å±äºå¤–åœ¨æ•°æ®ã€‚è¿™æ„å‘³ç€å¯¹äºè½¦å­æ¥è¯´ï¼Œå“ç‰Œã€å‹å·å’Œå‡ºå‚æ—¥æœŸçš„æ¯ä¸€ç§ç»„åˆï¼Œåªéœ€è¦ä¸€ä¸ªæ±½è½¦å¯¹è±¡ã€‚å¯¹äºæ‰€æœ‰æƒæ•°æ®æ¥è¯´ï¼ŒåŒä¸€ä¸ªç±»å‹çš„å„è½¦ä¸»éƒ½å¯ä»¥å…±äº«ä¸€ä¸ªæ±½è½¦å¯¹è±¡</p><div class="language-js"><pre><code><span class="token comment">// æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå·¥å‚æ¥ç”Ÿæˆæ±½è½¦</span>
<span class="token keyword">const</span> carFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> createdCars <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">createCar</span><span class="token punctuation">(</span><span class="token parameter">year<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>createdClass<span class="token punctuation">[</span>year <span class="token operator">+</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">+</span> price<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¦‚æœæ±½è½¦å®ä¾‹å­˜åœ¨ï¼Œå°±ç›´æ¥è¿”å›å·²æœ‰çš„å®ä¾‹</span>
        <span class="token keyword">return</span> createdCars<span class="token punctuation">[</span>year <span class="token operator">+</span> <span class="token string">&#39;-&#39;</span> <span class="token operator">+</span> price<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> owner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        createdCars<span class="token punctuation">[</span>year <span class="token operator">+</span> <span class="token string">&#39;price&#39;</span> <span class="token operator">+</span> price<span class="token punctuation">]</span> <span class="token operator">=</span> car<span class="token punctuation">;</span>
        <span class="token keyword">return</span> car<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿˜éœ€è¦ç®¡ç†å¤–åœ¨çŠ¶æ€</p><div class="language-js"><pre><code><span class="token comment">// ç”¨ä¸€ä¸ªå•ä½“æ¨¡å¼å°è£…å¤–åœ¨çŠ¶æ€æ•°æ®çš„ç®¡ç†å™¨</span>
<span class="token keyword">const</span> CarRecordManager <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> carRecordDatabase <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">addCarRecord</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">year<span class="token punctuation">,</span> price<span class="token punctuation">,</span> owner<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> car <span class="token operator">=</span> CarFactory<span class="token punctuation">.</span><span class="token function">createCar</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> owner<span class="token punctuation">)</span><span class="token punctuation">;</span>
      carRecordDatabase<span class="token punctuation">[</span>owner<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        car<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å…¶ä»–æ“ä½œ</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä» Car ç±»å‰¥ç¦»çš„æ•°æ®éƒ½åœ¨ CarRecordManage è¿™ä¸ªå•ä½“çš„ç§æœ‰å±æ€§ carRecordDatabase ä¸­ã€‚</p><p>è¿™ç§ä¼˜åŒ–æ˜¯ä»¥å¤æ‚æ€§ä¸ºä»£ä»·çš„ã€‚åŸå…ˆåªæœ‰ä¸€ä¸ªæ±½è½¦ç±»ï¼Œç°åœ¨å´å˜æˆäº†ä¸€ä¸ªç±»å’Œä¸¤ä¸ªå•ä½“å¯¹è±¡ã€‚å¹¶ä¸”æŠŠä¸€ä¸ªæ•°æ®ä¿å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„åœ°æ–¹è¿™ç§åšæ³•ä»¤äººå›°æƒ‘ï¼Œä½†æ˜¯èƒ½å¤Ÿè§£å†³æ€§èƒ½ï¼Œè¿™äº›æ— ä¼¤å¤§é›…ã€‚äº«å…ƒæ¨¡å¼è¿ç”¨å¾—å½“èƒ½å¤Ÿæ˜¾è‘—æå‡ç¨‹åºçš„æ€§èƒ½</p><p>ç®¡ç†å¤–åœ¨æ•°æ®æœ‰è®¸å¤šæ–¹æ³•ã€‚ä¹‹å‰ç”¨åˆ°çš„å•ä½“ç®¡ç†å™¨æ˜¯ä¸€ç§è¾ƒå¸¸è§çš„åšæ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼</p><p>ç¤ºä¾‹</p><div class="language-js"><pre><code><span class="token comment">// æ—¥å†ï¼Œé¡ºåºæ˜¾ç¤ºæ¯æœˆä¸­çš„å„å¤©ï¼Œè¿˜ä¼šæŒ‰é¡ºåºæ˜¾ç¤ºä¸€å¹´ä¸­çš„å„ä¸ªæœˆ</span>
<span class="token keyword">const</span> <span class="token function-variable function">CalendarYear</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">year<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>year <span class="token operator">=</span> year<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">;</span>
  parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> y <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>y <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>y <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>y <span class="token operator">%</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>months <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>numDays <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">,</span> <span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">29</span> <span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">CalendarYear</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">display</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>months<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>months<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;block&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">CalendarMonth</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">monthNum<span class="token punctuation">,</span> numDays<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>monthNum <span class="token operator">=</span> monthNum<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">;</span>
  parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> numDays<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>days<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalendarDay</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>months <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>numDays <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">,</span> <span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">29</span> <span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">CalendarMonth</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">display</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>days<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>days<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;block&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">CalendarDay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> date<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">;</span>
  parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">CalendarDay</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">display</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;block&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>date<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æ ¹æ®è¿™æ®µä»£ç çš„å®ç°ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ä¸ºä¸€å¹´åˆ›å»º 365 ä¸ª CalendarDay å¯¹è±¡ã€‚</p><p>æ›´æœ‰æ•ˆçš„åšæ³•æ˜¯æ— è®ºæ—¥å†è¦æ˜¾ç¤ºå¤šå°‘å¹´ï¼Œéƒ½åªç”¨ä¸€ä¸ª CalendarDay å¯¹è±¡æ¥ä»£è¡¨æ‰€æœ‰çš„æ—¥æœŸ</p><p>â€‹ <strong>æ”¹é€  calendar</strong></p><ul><li>ç¬¬ä¸€æ­¥ï¼ŒæŠŠ CalendarDay å¯¹è±¡è½¬åŒ–ä¸ºäº«å…ƒå¯¹è±¡ï¼Œé™¤å»å…¶ä¸­æ‰€æœ‰ä¿å­˜çš„æ•°æ®</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">CalendarDay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">CalendarDay</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">display</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> date<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œç›´æ¥å®ä¾‹åŒ–è¯¥å¯¹è±¡<code>const calendarDay=new CalendarDay()</code></p><ul><li>ç¬¬äºŒæ­¥ï¼Œæ”¹é€  CalendarMonth</li></ul><div class="language-js"><pre><code><span class="token comment">// å¤åˆç‰©</span>
<span class="token keyword">const</span> <span class="token function-variable function">CalendarMonth</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">monthNum<span class="token punctuation">,</span> numDays<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>monthNum <span class="token operator">=</span> monthNum<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">;</span>
  parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> numDays<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>days<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> CalendarDay<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">CalendarMonth</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">display</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>days<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>days<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;block&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æ­¤ä¾‹å­ä¸­ï¼Œæ²¡æœ‰åƒä¹‹å‰çš„ç®¡ç†å™¨ä¸€æ ·ä½¿ç”¨ä¸€ä¸ªä¸­å¿ƒæ•°æ®åº“ï¼Œå…¶å®å…¶ä»–ç±»ä¹Ÿæ²¡åšä»€ä¹ˆä¿®æ”¹ã€‚ è¿™æ˜¯å› ä¸ºç»„åˆå¯¹è±¡çš„æ•°æ®ç»“æ„æœ¬èº«å°±å·²ç»åŒ…å«äº†æ‰€æœ‰çš„å¤–åœ¨æ•°æ®</p><p>ç»„åˆæ¨¡å¼å’Œäº«å…ƒæ¨¡å¼é…åˆçš„æ¯”è¾ƒå®Œç¾çš„ï¼Œå› ä¸ºç»„åˆå¯¹è±¡é€šå¸¸éƒ½æ‹¥æœ‰å¤§é‡å¶å¯¹è±¡ï¼Œå®ƒä¿å­˜ç€è®¸å¤šå¯ä½œä¸ºå¤–åœ¨ æ•°æ®å¤„ç†çš„æ•°æ®ï¼Œå¶å¯¹è±¡é€šå¸¸åªåŒ…å«æå°‘çš„å†…åœ¨æ•°æ®ï¼Œæ‰€ä»¥å®¹æ˜“è¢« è½¬åŒ–ä¸ºå…±äº«èµ„æº</p><blockquote><p>å¦å¤–åœ¨ js éœ€è¦åˆ›å»ºå¤§é‡ html å†…å®¹çš„æƒ…å†µä¸‹ï¼Œäº«å…ƒæ¨¡å¼éå¸¸æœ‰ç”¨</p></blockquote><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>äº«å…ƒæ¨¡å¼çš„ä½¿ç”¨æ¡ä»¶</p><ul><li>é€‚åˆåœ¨ä½¿ç”¨äº†å¤§é‡èµ„æºå¯†é›†å‹å¯¹è±¡æ—¶ä½¿ç”¨ï¼Œå¦‚æœåªæ˜¯å°‘é‡å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™æ ·åšä¸åˆ’ç®—</li><li>å¯¹è±¡ä¸­æ‰€ä¿å­˜çš„æ•°æ®è‡³å°‘æœ‰ä¸€éƒ¨åˆ†èƒ½è¢«è½¬åŒ–ä¸ºå¤–åœ¨æ•°æ®</li><li>å°†å¤–åœ¨æ•°æ®åˆ†ç¦»å‡ºå»åï¼Œç‹¬ä¸€æ— äºŒçš„å¯¹è±¡çš„æ•°ç›®ç›¸å¯¹å°‘ï¼Œæœ€ç†æƒ³çš„æ˜¯åªå­˜åœ¨ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å¯¹è±¡</li></ul></div><h4 id="ä¸€èˆ¬çš„å®ç°æ­¥éª¤"><a class="header-anchor" href="#ä¸€èˆ¬çš„å®ç°æ­¥éª¤" aria-hidden="true">#</a> ä¸€èˆ¬çš„å®ç°æ­¥éª¤</h4><ol><li>å‰¥ç¦»æ‰€æœ‰å¤–åœ¨æ•°æ®</li><li>åˆ›å»ºä¸€ä¸ªç”¨æ¥æ§åˆ¶è¯¥ç±»å®ä¾‹åŒ–çš„å·¥å‚ã€‚è¯¥å·¥å‚æŒæ¡è¯¥ç±»æ‰€æœ‰å·²åˆ›å»ºå‡ºæ¥çš„ç‹¬ä¸€æ— äºŒçš„å®ä¾‹</li><li>åˆ›å»ºä¸€ä¸ªç”¨æ¥ä¿å­˜å¤–åœ¨æ•°æ®çš„ç®¡ç†å™¨ã€‚å®ƒæŠŠå†…åœ¨æ•°æ®æä¾›ç»™å·¥å‚å¯¹è±¡ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚å¤–åœ¨æ•°æ®åˆ™è¢«ä¿å­˜åœ¨ç®¡ç†å™¨çš„ä¸€ä¸ªæ•°æ®ç»“æ„ä¸­ï¼Œç®¡ç†å™¨éšåä¼šæ ¹æ®éœ€è¦å°†è¿™äº›æ•°æ®æä¾›ç»™å…±äº«å¯¹è±¡çš„æ–¹æ³•</li></ol><h3 id="ä»£ç†æ¨¡å¼"><a class="header-anchor" href="#ä»£ç†æ¨¡å¼" aria-hidden="true">#</a> ä»£ç†æ¨¡å¼</h3><p>ä»£ç†æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥æ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå…·æœ‰ä¸å¦ä¸€ä¸ªå¯¹è±¡åŒæ ·çš„æ¥å£ï¼Œå¹¶ä¼šæŠŠä»»ä½•æ–¹æ³•è°ƒç”¨ä¼ é€’ç»™é‚£ä¸ªå¯¹è±¡</p><h4 id="ä»£ç†å¦‚ä½•æ§åˆ¶å¯¹æœ¬ä½“çš„è®¿é—®"><a class="header-anchor" href="#ä»£ç†å¦‚ä½•æ§åˆ¶å¯¹æœ¬ä½“çš„è®¿é—®" aria-hidden="true">#</a> ä»£ç†å¦‚ä½•æ§åˆ¶å¯¹æœ¬ä½“çš„è®¿é—®</h4><p>ä¸å®ç°ä»»ä½•è®¿é—®æ§åˆ¶çš„ä»£ç†æœ€ç®€å•ï¼Œåªè¦æŠŠæ‰€æœ‰æ–¹æ³•è°ƒç”¨éƒ½ä¼ é€’åˆ°æœ¬ä½“</p><p>æœ€æœ‰ç”¨çš„ä»£ç†ç±»å‹æ˜¯<strong>è™šæ‹Ÿä»£ç†</strong>ã€‚å®ƒä¼šè®²æœ¬ä½“çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°æœ‰ æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œé€‚åˆæ§åˆ¶å¸¸è§å¼€é”€å¾ˆå¤§çš„æœ¬ä½“çš„è®¿é—®</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">publicLibraryVirtualProxy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">catalog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>library <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>catalog <span class="token operator">=</span> catalog<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
publicLibraryVirtualProxy<span class="token punctuation">.</span>prototye <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">_initializeLibrary</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>library <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>library <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">publicLibraryVirtualProxy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>catalog<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">findBooks</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">searchString</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_initializeLibrary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>library<span class="token punctuation">.</span><span class="token function">findBooks</span><span class="token punctuation">(</span>searchString<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è™šæ‹Ÿä»£ç†å¯¹äºå‰ç«¯ç¨‹åºå‘˜æ¥è¯´æ¯”è¾ƒæœ‰ç”¨ï¼Œè¿˜æœ‰å…¶ä»–ä»£ç†ç±»å‹</p><ul><li>è¿œç¨‹ä»£ç†ã€‚éœ€è¦è¿œç¨‹å¯¹è±¡é•¿æœŸå­˜åœ¨ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥ä»ä»»ä½•å…¶ä»–ç¯å¢ƒä¸­è®¿é—®ã€‚js ä¸é€‚ç”¨æ˜¯å› ä¸ºï¼Œå…¶ä¸€æ˜¯å› ä¸º js çš„è¿è¡Œæ—¶ç¯å¢ƒä¸ä¼šé•¿æœŸå­˜åœ¨ï¼Œå¤§å¤šæ•° js ç¯å¢ƒéƒ½åœ¨ web æµè§ˆå™¨ä¸­ï¼Œéšç€ç”¨æˆ·çš„ç½‘ä¸Šå†²æµªæ´»åŠ¨ï¼Œé€šå¸¸æ¯å‡ åˆ†é’Ÿéƒ½ä¼šåŠ è½½æˆ–è€…å¸è½½ä¸€æ¬¡ï¼Œå…¶äºŒï¼Œjs æ— æ³•å»ºç«‹åˆ°å¦ä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒçš„å¥—æ¥å­—è¿æ¥ä»¥è®¿é—®å…¶å˜é‡ç©ºé—´ï¼Œå³ä½¿å®ƒèƒ½é•¿æœŸå­˜åœ¨ï¼Œä¸æ­¤æœ€æ¥è¿‘çš„åšæ³•åªæ˜¯ç”¨ json å¯¹æ–¹æ³•è°ƒç”¨è¿›è¡Œåºåˆ—åŒ–ï¼Œç„¶åç”¨ ajax æŠ€æœ¯å°†ç»“æœå‘é€ç»™æŸä¸ªèµ„æº</li><li>ä¿æŠ¤ä»£ç†ã€‚æ ¹æ®å®¢æˆ·çš„èº«ä»½æ§åˆ¶å¯¹ç‰¹å®šæ–¹æ³•çš„è®¿é—®ã€‚</li></ul><h3 id="å‘½ä»¤æ¨¡å¼"><a class="header-anchor" href="#å‘½ä»¤æ¨¡å¼" aria-hidden="true">#</a> å‘½ä»¤æ¨¡å¼</h3><p>ç”¨æ¥å¯¹æ–¹æ³•è¿›è¡Œå‚æ•°åŒ–å¤„ç†å’Œä¼ é€</p><p>æœ€ç®€çš„å‘½ä»¤å¯¹è±¡çš„ç»“æ„å½¢å¼æ˜¯ä¸€ä¸ªæ“ä½œå’Œç”¨ä»¥è°ƒç”¨è¿™ä¸ªæ“ä½œçš„ç‹¬äº«çš„ç»“åˆä½“</p><p>å°±æ˜¯å°†å¯¹è±¡çš„æŸä¸ªæ–¹æ³•å†åŒ…ä¸€å±‚è°ƒç”¨ï¼Œå®ç°è°ƒç”¨å¯¹è±¡å’Œå®ç°æ“ä½œå¯¹è±¡çš„åˆ†ç¦»</p><h3 id="èŒè´£é“¾æ¨¡å¼"><a class="header-anchor" href="#èŒè´£é“¾æ¨¡å¼" aria-hidden="true">#</a> èŒè´£é“¾æ¨¡å¼</h3><p>ç”±å¤šä¸ªä¸åŒç±»å‹çš„å¯¹è±¡ç»„æˆã€‚ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚</p><p>å°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢</p><p>è¿è½¬æµç¨‹ï¼š</p><ol><li>å‘é€è€…çŸ¥é“é“¾ä¸­çš„ç¬¬ä¸€ä¸ªæ¥æ”¶è€…ï¼Œå‘è¿™ä¸ªæ¥æ”¶è€…å‘é€è¯·æ±‚</li><li>æ¯ä¸€ä¸ªæ¥å—è€…éƒ½å¯¹è¯·æ±‚è¿›è¡Œåˆ†æï¼Œè¦ä¹ˆå¤„ç†å®ƒï¼Œè¦ä¹ˆå¾€ä¸‹ä¼ </li><li>æ¯ä¸€ä¸ªæ¥å—è€…çŸ¥é“çš„å…¶ä»–å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œå³å®ƒåœ¨é“¾ä¸­çš„ä¸‹å®¶</li><li>å¦‚æœæ²¡æœ‰ä»»ä½•æ¥æ”¶è€…å¤„ç†è¯·æ±‚ï¼Œé‚£ä¹ˆè¯·æ±‚å°†ä»é“¾ä¸Šç¦»å¼€ï¼Œå¯ä»¥æŠ¥é”™æˆ–è€…åšå…¶ä»–å¤„ç†</li></ol><p>å‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“å“ªä¸€ä¸ªå¯¹è±¡æœ€ç»ˆå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œç³»ç»Ÿçš„æ›´æ”¹å¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹åŠ¨æ€åœ°é‡æ–°ç»„ç»‡å’Œåˆ†é…è´£ä»»</p><div class="language-ts"><pre><code><span class="token comment">// ä¸€ä¸ªä¼‘å‡ç”³è¯·çš„ä¾‹å­ï¼Œå…ˆå»ºä¸€ä¸ªç®¡ç†è€…ç±»</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">setSuperior</span><span class="token punctuation">(</span>superior<span class="token operator">:</span> Manager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ä¸Šçº§</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>superior <span class="token operator">=</span> superior<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">abstract</span> <span class="token function">requestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å†æ¥ä¸€ä¸ªç»ç†ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">commonManager</span> <span class="token keyword">extends</span> <span class="token class-name">Manager</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">requestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç»ç†åªèƒ½æ‰¹å‡†ä¸¤å¤©å†…çš„å‡æœŸ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Request <span class="token operator">===</span> <span class="token string">&#39;è¯·å‡&#39;</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ç»ç†æ‰¹å‡†&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>superior <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      superior<span class="token punctuation">.</span><span class="token function">RequestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¿˜æœ‰æ€»ç›‘ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">Majordomo</span> <span class="token keyword">extends</span> <span class="token class-name">Manager</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">requestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">===</span> <span class="token string">&#39;è¯·å‡&#39;</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span>Number <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ€»ç›‘æ‰¹å‡†&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>superior <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      superior<span class="token punctuation">.</span><span class="token function">RequestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Manager</span> <span class="token punctuation">{</span>
  <span class="token function">RequestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">===</span> <span class="token string">&#39;è¯·å‡&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ€»ç»ç†æ‰¹å‡†è¯·å‡&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>RequestType <span class="token operator">===</span> <span class="token string">&#39;åŠ è–ª&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ€»ç»ç†æ‰¹å‡†åŠ è–ª&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨ä¸¾ä¾‹</span>
<span class="token keyword">const</span> jinli <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommonManager</span><span class="token punctuation">(</span><span class="token string">&#39;ç»ç†&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> zongjian <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Majordomo</span><span class="token punctuation">(</span><span class="token string">&#39;æ€»ç›‘&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> zongjingli <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token string">&#39;æ€»ç»ç†&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jinli<span class="token punctuation">.</span><span class="token function">SetSuperior</span><span class="token punctuation">(</span>zongjian<span class="token punctuation">)</span><span class="token punctuation">;</span>
zongjian<span class="token punctuation">.</span><span class="token function">SetSuperior</span><span class="token punctuation">(</span>zongjingli<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span>RequestType <span class="token operator">=</span> <span class="token string">&#39;è¯·å‡&#39;</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span>RequestContent <span class="token operator">=</span> <span class="token string">&#39;å°èœè¯·å‡&#39;</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span>Number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
jinli<span class="token punctuation">.</span><span class="token function">RequestApplications</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å®¢æˆ·ç«¯çš„ç”³è¯·éƒ½æ˜¯ç”±ç»ç†å‘èµ·ï¼Œä½†å…·ä½“å†³ç­–è€…æ˜¯è°ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“</span>
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/Jarrett817/Jarrett-blog/edit/master/docs/computer-basic/design-pattern/index.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>Last Updated:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/Jarrett-blog/computer-basic/internet/" data-v-38ede35f><span class="text" data-v-38ede35f>è®¡ç®—æœºç½‘ç»œ</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"f16df007\",\"tools_slides.md\":\"ac1cf889\",\"computer-basic_design-pattern_index.md\":\"5e203ae1\",\"computer-basic_fucking-arithmetic_index.md\":\"9900c140\",\"computer-basic_internet_index.md\":\"653ef890\",\"front-end_browser_index.md\":\"6475c368\",\"front-end_canvas_index.md\":\"315c87cc\",\"front-end_css_index.md\":\"9161c7b8\",\"front-end_git_index.md\":\"572d444d\",\"front-end_html_index.md\":\"1857da16\",\"front-end_js_index.md\":\"a922a2f2\",\"front-end_nodejs_index.md\":\"76e10abc\",\"front-end_ts_index.md\":\"d8e36f4c\",\"front-end_vue_index.md\":\"0ac73585\"}")</script>
    <script type="module" async src="/Jarrett-blog/assets/app.dff7797b.js"></script>
  </body>
</html>